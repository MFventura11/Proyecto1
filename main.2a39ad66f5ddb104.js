"use strict";(self.webpackChunkmundial=self.webpackChunkmundial||[]).push([[179],{174:(Mt,Be,V)=>{function N(t){return"function"==typeof t}function U(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const O=U(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function ce(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class ae{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(N(r))try{r()}catch(s){e=s instanceof O?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{he(s)}catch(c){e=e??[],c instanceof O?e=[...e,...c.errors]:e.push(c)}}if(e)throw new O(e)}}add(e){var n;if(e&&e!==this)if(this.closed)he(e);else{if(e instanceof ae){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ce(n,e)}remove(e){const{_finalizers:n}=this;n&&ce(n,e),e instanceof ae&&e._removeParent(this)}}ae.EMPTY=(()=>{const t=new ae;return t.closed=!0,t})();const ve=ae.EMPTY;function Ie(t){return t instanceof ae||t&&"closed"in t&&N(t.remove)&&N(t.add)&&N(t.unsubscribe)}function he(t){N(t)?t():t.unsubscribe()}const Se={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Z={setTimeout(t,e,...n){const{delegate:r}=Z;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Z;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function G(t){Z.setTimeout(()=>{const{onUnhandledError:e}=Se;if(!e)throw t;e(t)})}function ie(){}const it=Je("C",void 0,void 0);function Je(t,e,n){return{kind:t,value:e,error:n}}let pe=null;function ge(t){if(Se.useDeprecatedSynchronousErrorHandling){const e=!pe;if(e&&(pe={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=pe;if(pe=null,n)throw r}}else t()}class Ye extends ae{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ie(e)&&e.add(this)):this.destination=te}static create(e,n,r){return new et(e,n,r)}next(e){this.isStopped?Ae(function Ue(t){return Je("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ae(function Ge(t){return Je("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ae(it,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Re(t,e){return Le.call(t,e)}class Ce{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){oe(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){oe(r)}else oe(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){oe(n)}}}class et extends Ye{constructor(e,n,r){let i;if(super(),N(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Se.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Re(e.next,s),error:e.error&&Re(e.error,s),complete:e.complete&&Re(e.complete,s)}):i=e}this.destination=new Ce(i)}}function oe(t){Se.useDeprecatedSynchronousErrorHandling?function Xe(t){Se.useDeprecatedSynchronousErrorHandling&&pe&&(pe.errorThrown=!0,pe.error=t)}(t):G(t)}function Ae(t,e){const{onStoppedNotification:n}=Se;n&&Z.setTimeout(()=>n(t,e))}const te={closed:!0,next:ie,error:function ye(t){throw t},complete:ie},le="function"==typeof Symbol&&Symbol.observable||"@@observable";function we(t){return t}function He(t){return 0===t.length?we:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Ne=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function fn(t){return t&&t instanceof Ye||function wn(t){return t&&N(t.next)&&N(t.error)&&N(t.complete)}(t)&&Ie(t)}(n)?n:new et(n,r,i);return ge(()=>{const{operator:c,source:d}=this;s.add(c?c.call(s,d):d?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Tt(r))((i,s)=>{const c=new et({next:d=>{try{n(d)}catch(h){s(h),c.unsubscribe()}},error:s,complete:i});this.subscribe(c)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[le](){return this}pipe(...n){return He(n)(this)}toPromise(n){return new(n=Tt(n))((r,i)=>{let s;this.subscribe(c=>s=c,c=>i(c),()=>r(s))})}}return t.create=e=>new t(e),t})();function Tt(t){var e;return null!==(e=t??Se.Promise)&&void 0!==e?e:Promise}const tt=U(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let hn=(()=>{class t extends Ne{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new tr(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new tt}next(n){ge(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){ge(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ge(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?ve:(this.currentObservers=null,s.push(n),new ae(()=>{this.currentObservers=null,ce(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Ne;return n.source=this,n}}return t.create=(e,n)=>new tr(e,n),t})();class tr extends hn{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:ve}}function Bn(t){return N(t?.lift)}function Ht(t){return e=>{if(Bn(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Rt(t,e,n,r,i){return new jn(t,e,n,r,i)}class jn extends Ye{constructor(e,n,r,i,s,c){super(e),this.onFinalize=s,this.shouldUnsubscribe=c,this._next=n?function(d){try{n(d)}catch(h){e.error(h)}}:super._next,this._error=i?function(d){try{i(d)}catch(h){e.error(h)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(d){e.error(d)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Zt(t,e){return Ht((n,r)=>{let i=0;n.subscribe(Rt(r,s=>{r.next(t.call(e,s,i++))}))})}function Cr(t){return this instanceof Cr?(this.v=t,this):new Cr(t)}function bo(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(A){r[A]&&(i[A]=function(R){return new Promise(function(F,Y){s.push([A,R,F,Y])>1||d(A,R)})})}function d(A,R){try{!function h(A){A.value instanceof Cr?Promise.resolve(A.value.v).then(m,_):I(s[0][2],A)}(r[A](R))}catch(F){I(s[0][3],F)}}function m(A){d("next",A)}function _(A){d("throw",A)}function I(A,R){A(R),s.shift(),s.length&&d(s[0][0],s[0][1])}}function $n(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function En(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(c){return new Promise(function(d,h){!function i(s,c,d,h){Promise.resolve(h).then(function(m){s({value:m,done:d})},c)}(d,h,(c=t[s](c)).done,c.value)})}}}const ki=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function pr(t){return N(t?.then)}function X(t){return N(t[le])}function H(t){return Symbol.asyncIterator&&N(t?.[Symbol.asyncIterator])}function j(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const q=function z(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Me(t){return N(t?.[q])}function Ze(t){return bo(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield Cr(n.read());if(i)return yield Cr(void 0);yield yield Cr(r)}}finally{n.releaseLock()}})}function kt(t){return N(t?.getReader)}function cn(t){if(t instanceof Ne)return t;if(null!=t){if(X(t))return function kn(t){return new Ne(e=>{const n=t[le]();if(N(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(ki(t))return function xr(t){return new Ne(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(pr(t))return function J(t){return new Ne(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,G)})}(t);if(H(t))return $(t);if(Me(t))return function W(t){return new Ne(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(kt(t))return function De(t){return $(Ze(t))}(t)}throw j(t)}function $(t){return new Ne(e=>{(function Ke(t,e){var n,r,i,s;return function Ys(t,e,n,r){return new(n||(n=Promise))(function(s,c){function d(_){try{m(r.next(_))}catch(I){c(I)}}function h(_){try{m(r.throw(_))}catch(I){c(I)}}function m(_){_.done?s(_.value):function i(s){return s instanceof n?s:new n(function(c){c(s)})}(_.value).then(d,h)}m((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=$n(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(c){i={error:c}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Ee(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function pt(t,e,n=1/0){return N(e)?pt((r,i)=>Zt((s,c)=>e(r,s,i,c))(cn(t(r,i))),n):("number"==typeof e&&(n=e),Ht((r,i)=>function nt(t,e,n,r,i,s,c,d){const h=[];let m=0,_=0,I=!1;const A=()=>{I&&!h.length&&!m&&e.complete()},R=Y=>m<r?F(Y):h.push(Y),F=Y=>{s&&e.next(Y),m++;let ne=!1;cn(n(Y,_++)).subscribe(Rt(e,_e=>{i?.(_e),s?R(_e):e.next(_e)},()=>{ne=!0},void 0,()=>{if(ne)try{for(m--;h.length&&m<r;){const _e=h.shift();c?Ee(e,c,()=>F(_e)):F(_e)}A()}catch(_e){e.error(_e)}}))};return t.subscribe(Rt(e,R,()=>{I=!0,A()})),()=>{d?.()}}(r,i,t,n)))}function tn(t=1/0){return pt(we,t)}const Gn=new Ne(t=>t.complete());function Js(t){return t[t.length-1]}function Wt(t){return function Fn(t){return t&&N(t.schedule)}(Js(t))?t.pop():void 0}function ar(t,e=0){return Ht((n,r)=>{n.subscribe(Rt(r,i=>Ee(r,t,()=>r.next(i),e),()=>Ee(r,t,()=>r.complete(),e),i=>Ee(r,t,()=>r.error(i),e)))})}function Eu(t,e=0){return Ht((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function qi(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ne(n=>{Ee(n,e,()=>{const r=t[Symbol.asyncIterator]();Ee(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function wt(t,e){return e?function fl(t,e){if(null!=t){if(X(t))return function Yo(t,e){return cn(t).pipe(Eu(e),ar(e))}(t,e);if(ki(t))return function Jo(t,e){return new Ne(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(pr(t))return function zr(t,e){return cn(t).pipe(Eu(e),ar(e))}(t,e);if(H(t))return qi(t,e);if(Me(t))return function To(t,e){return new Ne(n=>{let r;return Ee(n,e,()=>{r=t[q](),Ee(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(c){return void n.error(c)}s?n.complete():n.next(i)},0,!0)}),()=>N(r?.return)&&r.return()})}(t,e);if(kt(t))return function Ki(t,e){return qi(Ze(t),e)}(t,e)}throw j(t)}(t,e):cn(t)}function Ma(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new et({next:()=>{r.unsubscribe(),t()}});return e(...n).subscribe(r)}function Sn(t){for(let e in t)if(t[e]===Sn)return e;throw Error("Could not find renamed property on target object.")}function vn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(vn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function ys(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Nr=Sn({__forward_ref__:Sn});function Iu(t){return t.__forward_ref__=Iu,t.toString=function(){return vn(this())},t}function yt(t){return function Fi(t){return"function"==typeof t&&t.hasOwnProperty(Nr)&&t.__forward_ref__===Iu}(t)?t():t}class gt extends Error{constructor(e,n){super(function So(t,e){return`NG0${Math.abs(t)}${e?": "+e.trim():""}`}(e,n)),this.code=e}}function Nt(t){return"string"==typeof t?t:null==t?"":String(t)}function Cu(t,e){throw new gt(-201,!1)}function ai(t,e){null==t&&function ln(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Gt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Rr(t){return{providers:t.providers||[],imports:t.imports||[]}}function Xs(t){return ta(t,mc)||ta(t,lh)}function ta(t,e){return t.hasOwnProperty(e)?t[e]:null}function ml(t){return t&&(t.hasOwnProperty(Bs)||t.hasOwnProperty(gr))?t[Bs]:null}const mc=Sn({\u0275prov:Sn}),Bs=Sn({\u0275inj:Sn}),lh=Sn({ngInjectableDef:Sn}),gr=Sn({ngInjectorDef:Sn});var vt=(()=>((vt=vt||{})[vt.Default=0]="Default",vt[vt.Host=1]="Host",vt[vt.Self=2]="Self",vt[vt.SkipSelf=4]="SkipSelf",vt[vt.Optional=8]="Optional",vt))();let yc;function ir(t){const e=yc;return yc=t,e}function yl(t,e,n){const r=Xs(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&vt.Optional?null:void 0!==e?e:void Cu(vn(t))}function Zi(t){return{toString:t}.toString()}var Li=(()=>((Li=Li||{})[Li.OnPush=0]="OnPush",Li[Li.Default=1]="Default",Li))(),ui=(()=>{return(t=ui||(ui={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",ui;var t})();const _n=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Yi={},dn=[],ra=Sn({\u0275cmp:Sn}),Ji=Sn({\u0275dir:Sn}),ia=Sn({\u0275pipe:Sn}),Ao=Sn({\u0275mod:Sn}),St=Sn({\u0275fac:Sn}),Xn=Sn({__NG_ELEMENT_ID__:Sn});let dh=0;function js(t){return Zi(()=>{const n=!0===t.standalone,r={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Li.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||dn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ui.Emulated,id:"c"+dh++,styles:t.styles||dn,_:null,setInput:null,schemas:t.schemas||null,tView:null},s=t.dependencies,c=t.features;return i.inputs=Oe(t.inputs,r),i.outputs=Oe(t.outputs),c&&c.forEach(d=>d(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(Ra).filter(_c):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(mr).filter(_c):null,i})}function Ra(t){return Mn(t)||In(t)}function _c(t){return null!==t}function vs(t){return Zi(()=>({type:t.type,bootstrap:t.bootstrap||dn,declarations:t.declarations||dn,imports:t.imports||dn,exports:t.exports||dn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Oe(t,e){if(null==t)return Yi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const xt=js;function Kr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function Mn(t){return t[ra]||null}function In(t){return t[Ji]||null}function mr(t){return t[ia]||null}function Pr(t,e){const n=t[Ao]||null;if(!n&&!0===e)throw new Error(`Type ${vn(t)} does not have '\u0275mod' property.`);return n}function sn(t){return Array.isArray(t)&&"object"==typeof t[1]}function Xi(t){return Array.isArray(t)&&!0===t[1]}function wl(t){return 0!=(8&t.flags)}function Au(t){return 2==(2&t.flags)}function Fa(t){return 1==(1&t.flags)}function ws(t){return null!==t.template}function El(t){return 0!=(256&t[2])}function es(t,e){return t.hasOwnProperty(St)?t[St]:null}class vg{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Tl(t){return t.type.prototype.ngOnChanges&&(t.setInput=_g),ja}function ja(){const t=aa(this),e=t?.current;if(e){const n=t.previous;if(n===Yi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function _g(t,e,n,r){const i=aa(t)||function mh(t,e){return t[Ec]=e}(t,{previous:Yi,current:null}),s=i.current||(i.current={}),c=i.previous,d=this.declaredInputs[n],h=c[d];s[d]=new vg(h&&h.currentValue,e,c===Yi),t[r]=e}const Ec="__ngSimpleChanges__";function aa(t){return t[Ec]||null}function sr(t){for(;Array.isArray(t);)t=t[0];return t}function Qr(t,e){return sr(e[t.index])}function Es(t,e){return t.data[e]}function Or(t,e){const n=e[t];return sn(n)?n:n[0]}function Bi(t){return 64==(64&t[2])}function so(t,e){return null==e?null:t[e]}function Ru(t){t[18]=0}function Od(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ft={lFrame:wh(null),bindingsEnabled:!0};function Wa(){return Ft.bindingsEnabled}function Fe(){return Ft.lFrame.lView}function ct(){return Ft.lFrame.tView}function kr(){let t=Ml();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ml(){return Ft.lFrame.currentTNode}function oo(t,e){const n=Ft.lFrame;n.currentTNode=t,n.isParent=e}function Fd(){return Ft.lFrame.isParent}function dr(){return Ft.lFrame.bindingIndex++}function da(t,e){const n=Ft.lFrame;n.bindingIndex=n.bindingRootIndex=t,Fu(e)}function Fu(t){Ft.lFrame.currentDirectiveIndex=t}function Vd(t){Ft.lFrame.currentQueryIndex=t}function uo(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function di(t,e,n){if(n&vt.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&vt.Host||(i=uo(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,t=s}const r=Ft.lFrame=fa();return r.currentTNode=e,r.lView=t,!0}function Lu(t){const e=fa(),n=t[1];Ft.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function fa(){const t=Ft.lFrame,e=null===t?null:t.child;return null===e?wh(t):e}function wh(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Vu(){const t=Ft.lFrame;return Ft.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Mc=Vu;function xc(){const t=Vu();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Jr(){return Ft.lFrame.selectedIndex}function ts(t){Ft.lFrame.selectedIndex=t}function za(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:c,ngAfterContentChecked:d,ngAfterViewInit:h,ngAfterViewChecked:m,ngOnDestroy:_}=s;c&&(t.contentHooks||(t.contentHooks=[])).push(-n,c),d&&((t.contentHooks||(t.contentHooks=[])).push(n,d),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,d)),h&&(t.viewHooks||(t.viewHooks=[])).push(-n,h),m&&((t.viewHooks||(t.viewHooks=[])).push(n,m),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,m)),null!=_&&(t.destroyHooks||(t.destroyHooks=[])).push(n,_)}}function qa(t,e,n){Oo(t,e,3,n)}function ns(t,e,n,r){(3&t[2])===n&&Oo(t,e,n,r)}function Po(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Oo(t,e,n,r){const s=r??-1,c=e.length-1;let d=0;for(let h=void 0!==r?65535&t[18]:0;h<c;h++)if("number"==typeof e[h+1]){if(d=e[h],null!=r&&d>=r)break}else e[h]<0&&(t[18]+=65536),(d<s||-1==s)&&(Bd(t,n,e,h),t[18]=(4294901760&t[18])+h+2),h++}function Bd(t,e,n,r){const i=n[r]<0,s=n[r+1],d=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(d)}finally{}}}else try{s.call(d)}finally{}}class Ka{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function T(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],c=n[r++],d=n[r++];t.setAttribute(e,c,d,s)}else{const s=i,c=n[++r];B(s)?t.setProperty(e,s,c):t.setAttribute(e,s,c),r++}}return r}function x(t){return 3===t||4===t||6===t}function B(t){return 64===t.charCodeAt(0)}function ee(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||ue(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function ue(t,e,n,r,i){let s=0,c=t.length;if(-1===e)c=-1;else for(;s<t.length;){const d=t[s++];if("number"==typeof d){if(d===e){c=-1;break}if(d>e){c=s-1;break}}}for(;s<t.length;){const d=t[s];if("number"==typeof d)break;if(d===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==c&&(t.splice(c,0,e),s=c+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function xe(t){return-1!==t}function Qe(t){return 32767&t}function _t(t,e){let n=function mt(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let Ut=!0;function Ct(t){const e=Ut;return Ut=t,e}let ju=0;const Ci={};function ga(t,e){const n=ji(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,ma(r.data,t),ma(e,null),ma(r.blueprint,null));const i=Gs(t,e),s=t.injectorIndex;if(xe(i)){const c=Qe(i),d=_t(i,e),h=d[1].data;for(let m=0;m<8;m++)e[s+m]=d[c+m]|h[c+m]}return e[s+8]=i,s}function ma(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ji(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Gs(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=bh(i),null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Fo(t,e,n){!function Ol(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Xn)&&(r=n[Xn]),null==r&&(r=n[Xn]=ju++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function lv(t,e,n){if(n&vt.Optional)return t;Cu()}function Ch(t,e,n,r){if(n&vt.Optional&&void 0===r&&(r=null),0==(n&(vt.Self|vt.Host))){const i=t[9],s=ir(void 0);try{return i?i.get(e,r,n&vt.Optional):yl(e,r,n&vt.Optional)}finally{ir(s)}}return lv(r,0,n)}function dv(t,e,n,r=vt.Default,i){if(null!==t){if(1024&e[2]){const c=function Cg(t,e,n,r,i){let s=t,c=e;for(;null!==s&&null!==c&&1024&c[2]&&!(256&c[2]);){const d=Ud(s,c,n,r|vt.Self,Ci);if(d!==Ci)return d;let h=s.parent;if(!h){const m=c[21];if(m){const _=m.get(n,Ci,r);if(_!==Ci)return _}h=bh(c),c=c[15]}s=h}return i}(t,e,n,r,Ci);if(c!==Ci)return c}const s=Ud(t,e,n,r,Ci);if(s!==Ci)return s}return Ch(e,n,r,i)}function Ud(t,e,n,r,i){const s=function Fl(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Xn)?t[Xn]:void 0;return"number"==typeof e?e>=0?255&e:p0:e}(n);if("function"==typeof s){if(!di(e,t,r))return r&vt.Host?lv(i,0,r):Ch(e,n,r,i);try{const c=s(r);if(null!=c||r&vt.Optional)return c;Cu()}finally{Mc()}}else if("number"==typeof s){let c=null,d=ji(t,e),h=-1,m=r&vt.Host?e[16][6]:null;for((-1===d||r&vt.SkipSelf)&&(h=-1===d?Gs(t,e):e[d+8],-1!==h&&Ig(r,!1)?(c=e[1],d=Qe(h),e=_t(h,e)):d=-1);-1!==d;){const _=e[1];if(Uu(s,d,_.data)){const I=h0(d,e,n,c,r,m);if(I!==Ci)return I}h=e[d+8],-1!==h&&Ig(r,e[1].data[d+8]===m)&&Uu(s,d,e)?(c=_,d=Qe(h),e=_t(h,e)):d=-1}}return i}function h0(t,e,n,r,i,s){const c=e[1],d=c.data[t+8],_=function kl(t,e,n,r,i){const s=t.providerIndexes,c=e.data,d=1048575&s,h=t.directiveStart,_=s>>20,A=i?d+_:t.directiveEnd;for(let R=r?d:d+_;R<A;R++){const F=c[R];if(R<h&&n===F||R>=h&&F.type===n)return R}if(i){const R=c[h];if(R&&ws(R)&&R.type===n)return h}return null}(d,c,n,null==r?Au(d)&&Ut:r!=c&&0!=(3&d.type),i&vt.Host&&s===d);return null!==_?Qa(e,c,_,d):Ci}function Qa(t,e,n,r){let i=t[n];const s=e.data;if(function pa(t){return t instanceof Ka}(i)){const c=i;c.resolving&&function pl(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new gt(-200,`Circular dependency in DI detected for ${t}${n}`)}(function An(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Nt(t)}(s[n]));const d=Ct(c.canSeeViewProviders);c.resolving=!0;const h=c.injectImpl?ir(c.injectImpl):null;di(t,r,vt.Default);try{i=t[n]=c.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function wg(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const c=Tl(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,c),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,c)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==h&&ir(h),Ct(d),c.resolving=!1,Mc()}}return i}function Uu(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ig(t,e){return!(t&vt.Self||t&vt.Host&&e)}class Oc{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return dv(this._tNode,this._lView,e,r,n)}}function p0(){return new Oc(kr(),Fe())}function bh(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[6]:null}const Ya="__parameters__";function Hu(t,e,n){return Zi(()=>{const r=function Th(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const c=new i(...s);return d.annotation=c,d;function d(h,m,_){const I=h.hasOwnProperty(Ya)?h[Ya]:Object.defineProperty(h,Ya,{value:[]})[Ya];for(;I.length<=_;)I.push(null);return(I[_]=I[_]||[]).push(c),h}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class nn{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Gt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function $t(t,e){t.forEach(n=>Array.isArray(n)?$t(n,e):e(n))}function er(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function rs(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const Gd={},Mg="__NG_DI_FLAG__",xg="ngTempTokenPath",kS=/\n/gm,v0="__source";let Ng;function Nh(t){const e=Ng;return Ng=t,e}function Rh(t,e=vt.Default){if(void 0===Ng)throw new gt(-203,!1);return null===Ng?yl(t,void 0,e):Ng.get(t,e&vt.Optional?null:void 0,e)}function Bt(t,e=vt.Default){return(function na(){return yc}()||Rh)(yt(t),e)}function Br(t,e=vt.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),Bt(t,e)}function Rg(t){const e=[];for(let n=0;n<t.length;n++){const r=yt(t[n]);if(Array.isArray(r)){if(0===r.length)throw new gt(900,!1);let i,s=vt.Default;for(let c=0;c<r.length;c++){const d=r[c],h=_0(d);"number"==typeof h?-1===h?i=d.token:s|=h:i=d}e.push(Bt(i,s))}else e.push(Bt(r))}return e}function Ph(t,e){return t[Mg]=e,t.prototype[Mg]=e,t}function _0(t){return t[Mg]}const Oh=Ph(Hu("Optional"),8),zd=Ph(Hu("SkipSelf"),4);let M0;const kv=new nn("ENVIRONMENT_INITIALIZER"),U0=new nn("INJECTOR",-1),rA=new nn("INJECTOR_DEF_TYPES");class iA{get(e,n=Gd){if(n===Gd){const r=new Error(`NullInjectorError: No provider for ${vn(e)}!`);throw r.name="NullInjectorError",r}return n}}function $0(...t){return{\u0275providers:sA(0,t)}}function sA(t,...e){const n=[],r=new Set;let i;return $t(e,s=>{const c=s;Uh(c,n,[],r)&&(i||(i=[]),i.push(c))}),void 0!==i&&ya(i,n),n}function ya(t,e){for(let n=0;n<t.length;n++){const{providers:i}=t[n];$t(i,s=>{e.push(s)})}}function Uh(t,e,n,r){if(!(t=yt(t)))return!1;let i=null,s=ml(t);const c=!s&&Mn(t);if(s||c){if(c&&!c.standalone)return!1;i=t}else{const h=t.ngModule;if(s=ml(h),!s)return!1;i=h}const d=r.has(i);if(c){if(d)return!1;if(r.add(i),c.dependencies){const h="function"==typeof c.dependencies?c.dependencies():c.dependencies;for(const m of h)Uh(m,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!d){let m;r.add(i);try{$t(s.imports,_=>{Uh(_,e,n,r)&&(m||(m=[]),m.push(_))})}finally{}void 0!==m&&ya(m,e)}if(!d){const m=es(i)||(()=>new i);e.push({provide:i,useFactory:m,deps:dn},{provide:rA,useValue:i,multi:!0},{provide:kv,useValue:()=>Bt(i),multi:!0})}const h=s.providers;null==h||d||$t(h,_=>{e.push(_)})}}return i!==t&&void 0!==t.providers}const oA=Sn({provide:String,useValue:Sn});function jg(t){return null!==t&&"object"==typeof t&&oA in t}function jl(t){return"function"==typeof t}const $h=new nn("Set Injector scope."),Zd={},z0={};let q0;function qu(){return void 0===q0&&(q0=new iA),q0}class ru{}class Fv extends ru{constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Hh(e,c=>this.processProvider(c)),this.records.set(U0,Qd(void 0,this)),i.has("environment")&&this.records.set(ru,Qd(void 0,this));const s=this.records.get($h);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(rA.multi,dn,vt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const n=Nh(this),r=ir(void 0);try{return e()}finally{Nh(n),ir(r)}}get(e,n=Gd,r=vt.Default){this.assertNotDestroyed();const i=Nh(this),s=ir(void 0);try{if(!(r&vt.SkipSelf)){let d=this.records.get(e);if(void 0===d){const h=function lA(t){return"function"==typeof t||"object"==typeof t&&t instanceof nn}(e)&&Xs(e);d=h&&this.injectableDefInScope(h)?Qd(Lv(e),Zd):null,this.records.set(e,d)}if(null!=d)return this.hydrate(e,d)}return(r&vt.Self?qu():this.parent).get(e,n=r&vt.Optional&&n===Gd?null:n)}catch(c){if("NullInjectorError"===c.name){if((c[xg]=c[xg]||[]).unshift(vn(e)),i)throw c;return function D0(t,e,n,r){const i=t[xg];throw e[v0]&&i.unshift(e[v0]),t.message=function mv(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=vn(e);if(Array.isArray(e))i=e.map(vn).join(" -> ");else if("object"==typeof e){let s=[];for(let c in e)if(e.hasOwnProperty(c)){let d=e[c];s.push(c+":"+("string"==typeof d?JSON.stringify(d):vn(d)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(kS,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[xg]=null,t}(c,e,"R3InjectorError",this.source)}throw c}finally{ir(s),Nh(i)}}resolveInjectorInitializers(){const e=Nh(this),n=ir(void 0);try{const r=this.get(kv.multi,dn,vt.Self);for(const i of r)i()}finally{Nh(e),ir(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(vn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new gt(205,!1)}processProvider(e){let n=jl(e=yt(e))?e:yt(e&&e.provide);const r=function aA(t){return jg(t)?Qd(void 0,t.useValue):Qd(function K0(t,e,n){let r;if(jl(t)){const i=yt(t);return es(i)||Lv(i)}if(jg(t))r=()=>yt(t.useValue);else if(function Kd(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Rg(t.deps||[]));else if(function W0(t){return!(!t||!t.useExisting)}(t))r=()=>Bt(yt(t.useExisting));else{const i=yt(t&&(t.useClass||t.provide));if(!function uA(t){return!!t.deps}(t))return es(i)||Lv(i);r=()=>new i(...Rg(t.deps))}return r}(t),Zd)}(e);if(jl(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Qd(void 0,Zd,!0),i.factory=()=>Rg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Zd&&(n.value=z0,n.value=n.factory()),"object"==typeof n.value&&n.value&&function cA(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=yt(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function Lv(t){const e=Xs(t),n=null!==e?e.factory:es(t);if(null!==n)return n;if(t instanceof nn)throw new gt(204,!1);if(t instanceof Function)return function Vv(t){const e=t.length;if(e>0)throw function co(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new gt(204,!1);const n=function ch(t){const e=t&&(t[mc]||t[lh]);if(e){const n=function gl(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new gt(204,!1)}function Qd(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Z0(t){return!!t.\u0275providers}function Hh(t,e){for(const n of t)Array.isArray(n)?Hh(n,e):Z0(n)?Hh(n.\u0275providers,e):e(n)}class Ug{}class J0{resolveComponentFactory(e){throw function dA(t){const e=Error(`No component factory found for ${vn(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let va=(()=>{class t{}return t.NULL=new J0,t})();function X0(){return Ul(kr(),Fe())}function Ul(t,e){return new Uc(Qr(t,e))}let Uc=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=X0,t})();class eE{}let nE=(()=>{class t{}return t.\u0275prov=Gt({token:t,providedIn:"root",factory:()=>null}),t})();class Yd{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const rE=new Yd("14.1.3"),Jd={};function fo(t){return t.ngOriginalError}class Xd{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&fo(e);for(;n&&fo(n);)n=fo(n);return n||null}}const Gv=new Map;let on=0;const Zv="__ngContext__";function ss(t,e){sn(e)?(t[Zv]=e[20],function dE(t){Gv.set(t[20],t)}(e)):t[Zv]=e}function Hg(t){const e=t[Zv];return"number"==typeof e?function zv(t){return Gv.get(t)||null}(e):e||null}function Wg(t){const e=Hg(t);return e?sn(e)?e:e.lView:null}const SA=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(_n))();function Ku(t){return t instanceof Function?t():t}var zs=(()=>((zs=zs||{})[zs.Important=1]="Important",zs[zs.DashCase=2]="DashCase",zs))();function Jv(t,e){return undefined(t,e)}function ef(t){const e=t[3];return Xi(e)?e[3]:e}function zh(t){return NA(t[13])}function e_(t){return NA(t[4])}function NA(t){for(;null!==t&&!Xi(t);)t=t[4];return t}function tf(t,e,n,r,i){if(null!=r){let s,c=!1;Xi(r)?s=r:sn(r)&&(c=!0,r=r[0]);const d=sr(r);0===t&&null!==n?null==i?wE(e,n,d):rf(e,n,d,i||null,!0):1===t&&null!==n?rf(e,n,d,i||null,!0):2===t?function VA(t,e,n){const r=Zh(t,e);r&&function kA(t,e,n,r){t.removeChild(e,n,r)}(t,r,e,n)}(e,d,c):3===t&&e.destroyNode(d),null!=s&&function gF(t,e,n,r,i){const s=n[7];s!==sr(n)&&tf(e,t,r,s,i);for(let d=10;d<n.length;d++){const h=n[d];em(h[1],h,t,e,r,s)}}(e,t,s,n,i)}}function Kg(t,e,n){return t.createElement(e,n)}function PA(t,e){const n=t[9],r=n.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,Od(i,-1)),n.splice(r,1)}function Zg(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&PA(i,r),e>0&&(t[n-1][4]=r[4]);const s=rs(t,10+e);!function RA(t,e){em(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const c=s[19];null!==c&&c.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function OA(t,e){if(!(128&e[2])){const n=e[11];n.destroyNode&&em(t,e,n,3,null,null),function n_(t){let e=t[13];if(!e)return nf(t[1],t);for(;e;){let n=null;if(sn(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)sn(e)&&nf(e[1],e),e=e[3];null===e&&(e=t),sn(e)&&nf(e[1],e),n=e&&e[4]}e=n}}(e)}}function nf(t,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function i_(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof Ka)){const s=n[r+1];if(Array.isArray(s))for(let c=0;c<s.length;c+=2){const d=i[s[c]],h=s[c+1];try{h.call(d)}finally{}}else try{s.call(i)}finally{}}}}(t,e),function Qg(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const c=n[s+1],d="function"==typeof c?c(e):sr(e[c]),h=r[i=n[s+2]],m=n[s+3];"boolean"==typeof m?d.removeEventListener(n[s],h,m):m>=0?r[i=m]():r[i=-m].unsubscribe(),s+=2}else{const c=r[i=n[s+1]];n[s].call(c)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[7]=null}}(t,e),1===e[1].type&&e[11].destroy();const n=e[17];if(null!==n&&Xi(e[3])){n!==e[3]&&PA(n,e);const r=e[19];null!==r&&r.detachView(t)}!function IA(t){Gv.delete(t[20])}(e)}}function Yg(t,e,n){return function Jg(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const i=t.data[r.directiveStart].encapsulation;if(i===ui.None||i===ui.Emulated)return null}return Qr(r,n)}(t,e.parent,n)}function rf(t,e,n,r,i){t.insertBefore(e,n,r,i)}function wE(t,e,n){t.appendChild(e,n)}function EE(t,e,n,r,i){null!==r?rf(t,e,n,r,i):wE(t,e,n)}function Zh(t,e){return t.parentNode(e)}let s_=function FA(t,e,n){return 40&t.type?Qr(t,n):null};function sf(t,e,n,r){const i=Yg(t,r,e),s=e[11],d=function IE(t,e,n){return s_(t,e,n)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let h=0;h<n.length;h++)EE(s,i,n[h],d,!1);else EE(s,i,n,d,!1)}function o_(t,e){if(null!==e){const n=e.type;if(3&n)return Qr(e,t);if(4&n)return bE(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return o_(t,r);{const i=t[e.index];return Xi(i)?bE(-1,i):sr(i)}}if(32&n)return Jv(e,t)()||sr(t[e.index]);{const r=LA(t,e);return null!==r?Array.isArray(r)?r[0]:o_(ef(t[16]),r):o_(t,e.next)}}return null}function LA(t,e){return null!==e?t[16][6].projection[e.projection]:null}function bE(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return o_(r,i)}return e[7]}function TE(t,e,n,r,i,s,c){for(;null!=n;){const d=r[n.index],h=n.type;if(c&&0===e&&(d&&ss(sr(d),r),n.flags|=4),64!=(64&n.flags))if(8&h)TE(t,e,n.child,r,i,s,!1),tf(e,t,i,d,s);else if(32&h){const m=Jv(n,r);let _;for(;_=m();)tf(e,t,i,_,s);tf(e,t,i,d,s)}else 16&h?BA(t,e,r,n,i,s):tf(e,t,i,d,s);n=c?n.projectionNext:n.next}}function em(t,e,n,r,i,s){TE(n,r,t.firstChild,e,i,s,!1)}function BA(t,e,n,r,i,s){const c=n[16],h=c[6].projection[r.projection];if(Array.isArray(h))for(let m=0;m<h.length;m++)tf(e,t,i,h[m],s);else TE(t,e,h,c[3],i,s,!0)}function Qu(t,e,n){t.setAttribute(e,"style",n)}function Qh(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function SE(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}const tm="ng-template";function AE(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==SE(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function nm(t){return 4===t.type&&t.value!==tm}function UA(t,e,n){return e===(4!==t.type||n?t.value:tm)}function $c(t,e,n){let r=4;const i=t.attrs||[],s=function ME(t){for(let e=0;e<t.length;e++)if(x(t[e]))return e;return t.length}(i);let c=!1;for(let d=0;d<e.length;d++){const h=e[d];if("number"!=typeof h){if(!c)if(4&r){if(r=2|1&r,""!==h&&!UA(t,h,n)||""===h&&1===e.length){if(Lo(r))return!1;c=!0}}else{const m=8&r?h:e[++d];if(8&r&&null!==t.attrs){if(!AE(t.attrs,m,n)){if(Lo(r))return!1;c=!0}continue}const I=$A(8&r?"class":h,i,nm(t),n);if(-1===I){if(Lo(r))return!1;c=!0;continue}if(""!==m){let A;A=I>s?"":i[I+1].toLowerCase();const R=8&r?A:null;if(R&&-1!==SE(R,m,0)||2&r&&m!==A){if(Lo(r))return!1;c=!0}}}}else{if(!c&&!Lo(r)&&!Lo(h))return!1;if(c&&Lo(h))continue;c=!1,r=h|1&r}}return Lo(r)||c}function Lo(t){return 0==(1&t)}function $A(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const c=e[i];if(c===t)return i;if(3===c||6===c)s=!0;else{if(1===c||2===c){let d=e[++i];for(;"string"==typeof d;)d=e[++i];continue}if(4===c)break;if(0===c){i+=4;continue}}i+=s?1:2}return-1}return function WA(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function rm(t,e,n=!1){for(let r=0;r<e.length;r++)if($c(t,e[r],n))return!0;return!1}function Yh(t,e){return t?":not("+e.trim()+")":e}function af(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let c=t[n];if("string"==typeof c)if(2&r){const d=t[++n];i+="["+c+(d.length>0?'="'+d+'"':"")+"]"}else 8&r?i+="."+c:4&r&&(i+=" "+c);else""!==i&&!Lo(c)&&(e+=Yh(s,i),i=""),r=c,s=s||!Lo(r);n++}return""!==i&&(e+=Yh(s,i)),e}const Qt={};function Wl(t){xE(ct(),Fe(),Jr()+t,!1)}function xE(t,e,n,r){if(!r)if(3==(3&e[2])){const s=t.preOrderCheckHooks;null!==s&&qa(e,s,n)}else{const s=t.preOrderHooks;null!==s&&ns(e,s,0,n)}ts(n)}function l_(t,e=null,n=null,r){const i=PE(t,e,n,r);return i.resolveInjectorInitializers(),i}function PE(t,e=null,n=null,r,i=new Set){const s=[n||dn,$0(t)];return r=r||("object"==typeof t?void 0:vn(t)),new Fv(s,e||qu(),r||null,i)}let Vo=(()=>{class t{static create(n,r){if(Array.isArray(n))return l_({name:""},r,n,"");{const i=n.name??"";return l_({name:i},n.parent,n.providers,i)}}}return t.THROW_IF_NOT_FOUND=Gd,t.NULL=new iA,t.\u0275prov=Gt({token:t,providedIn:"any",factory:()=>Bt(U0)}),t.__NG_ELEMENT_ID__=-1,t})();function Pt(t,e=vt.Default){const n=Fe();return null===n?Bt(t,e):dv(kr(),n,yt(t),e)}function lf(){throw new Error("invalid")}function $i(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const c=t.data[s];Vd(i),c.contentQueries(2,e[s],s)}}}function Ts(t,e,n,r,i,s,c,d,h,m,_){const I=e.blueprint.slice();return I[0]=i,I[2]=76|r,(null!==_||t&&1024&t[2])&&(I[2]|=1024),Ru(I),I[3]=I[15]=t,I[8]=n,I[10]=c||t&&t[10],I[11]=d||t&&t[11],I[12]=h||t&&t[12]||null,I[9]=m||t&&t[9]||null,I[6]=s,I[20]=function EA(){return on++}(),I[21]=_,I[16]=2==e.type?t[16]:I,I}function ql(t,e,n,r,i){let s=t.data[e];if(null===s)s=function zc(t,e,n,r,i){const s=Ml(),c=Fd(),h=t.data[e]=function QE(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,c?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=h),null!==s&&(c?null==s.child&&null!==h.parent&&(s.child=h):null===s.next&&(s.next=h)),h}(t,e,n,r,i),function Ac(){return Ft.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const c=function xl(){const t=Ft.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===c?-1:c.injectorIndex}return oo(s,!0),s}function Ea(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Ju(t,e,n){Lu(e);try{const r=t.viewQuery;null!==r&&wm(1,r,n);const i=t.template;null!==i&&Kl(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&$i(t,e),t.staticViewQueries&&wm(2,t.viewQuery,n);const s=t.components;null!==s&&function fm(t,e){for(let n=0;n<e.length;n++)EM(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,xc()}}function su(t,e,n,r){const i=e[2];if(128!=(128&i)){Lu(e);try{Ru(e),function Dh(t){return Ft.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Kl(t,e,n,2,r);const c=3==(3&i);if(c){const m=t.preOrderCheckHooks;null!==m&&qa(e,m,null)}else{const m=t.preOrderHooks;null!==m&&ns(e,m,0,null),Po(e,0)}if(function DM(t){for(let e=zh(t);null!==e;e=e_(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r],s=i[3];0==(512&i[2])&&Od(s,1),i[2]|=512}}}(e),function nI(t){for(let e=zh(t);null!==e;e=e_(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];Bi(r)&&su(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&$i(t,e),c){const m=t.contentCheckHooks;null!==m&&qa(e,m)}else{const m=t.contentHooks;null!==m&&ns(e,m,1),Po(e,1)}!function np(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)ts(~i);else{const s=i,c=n[++r],d=n[++r];da(c,s),d(2,e[s])}}}finally{ts(-1)}}(t,e);const d=t.components;null!==d&&function zl(t,e){for(let n=0;n<e.length;n++)wM(t,e[n])}(e,d);const h=t.viewQuery;if(null!==h&&wm(2,h,r),c){const m=t.viewCheckHooks;null!==m&&qa(e,m)}else{const m=t.viewHooks;null!==m&&ns(e,m,2),Po(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Od(e[3],-1))}finally{xc()}}}function pf(t,e,n,r){const i=e[10],c=function Sl(t){return 4==(4&t[2])}(e);try{!c&&i.begin&&i.begin(),c&&Ju(t,e,r),su(t,e,n,r)}finally{!c&&i.end&&i.end()}}function Kl(t,e,n,r,i){const s=Jr(),c=2&r;try{ts(-1),c&&e.length>22&&xE(t,e,22,!1),n(r,i)}finally{ts(s)}}function qc(t,e,n){!Wa()||(function A_(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||ga(n,e),ss(r,e);const c=n.initialInputs;for(let d=i;d<s;d++){const h=t.data[d],m=ws(h);m&&eI(e,n,h);const _=Qa(e,t,d,n);ss(_,e),null!==c&&tI(0,d-i,_,h,0,c),m&&(Or(n.index,e)[8]=_)}}(t,e,n,Qr(n,e)),128==(128&n.flags)&&function M_(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,c=function ku(){return Ft.lFrame.currentDirectiveIndex}();try{ts(s);for(let d=r;d<i;d++){const h=t.data[d],m=e[d];Fu(d),(null!==h.hostBindings||0!==h.hostVars||null!==h.hostAttrs)&&x_(h,m)}}finally{ts(-1),Fu(c)}}(t,e,n))}function Kc(t,e,n=Qr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const c=r[s+1],d=-1===c?n(e,t):t[c];t[i++]=d}}}function C_(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=hm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function hm(t,e,n,r,i,s,c,d,h,m){const _=22+r,I=_+i,A=function KE(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Qt);return n}(_,I),R="function"==typeof m?m():m;return A[1]={type:t,blueprint:A,template:n,queries:null,viewQuery:d,declTNode:e,data:A.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:I,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof c?c():c,firstChild:null,schemas:h,consts:R,incompleteFirstPass:!1}}function T_(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function S_(t,e){const r=e.directiveEnd,i=t.data,s=e.attrs,c=[];let d=null,h=null;for(let m=e.directiveStart;m<r;m++){const _=i[m],I=_.inputs,A=null===s||nm(e)?null:vM(I,s);c.push(A),d=T_(I,m,d),h=T_(_.outputs,m,h)}null!==d&&(d.hasOwnProperty("class")&&(e.flags|=16),d.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=c,e.inputs=d,e.outputs=h}function YE(t,e){const n=Or(e,t);16&n[2]||(n[2]|=32)}function pm(t,e,n,r){let i=!1;if(Wa()){const s=function yM(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const c=r[s];rm(n,c.selectors,!1)&&(i||(i=[]),Fo(ga(n,e),t,c.type),ws(c)?(mm(t,n),i.unshift(c)):i.push(c))}return i}(t,e,n),c=null===r?null:{"":-1};if(null!==s){i=!0,XE(n,t.data.length,s.length);for(let _=0;_<s.length;_++){const I=s[_];I.providersResolver&&I.providersResolver(I)}let d=!1,h=!1,m=Ea(t,e,s.length,null);for(let _=0;_<s.length;_++){const I=s[_];n.mergedAttrs=ee(n.mergedAttrs,I.hostAttrs),ym(t,n,e,m,I),JE(m,I,c),null!==I.contentQueries&&(n.flags|=8),(null!==I.hostBindings||null!==I.hostAttrs||0!==I.hostVars)&&(n.flags|=128);const A=I.type.prototype;!d&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),d=!0),!h&&(A.ngOnChanges||A.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),h=!0),m++}S_(t,n)}c&&function N_(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new gt(-301,!1);r.push(e[i],s)}}}(n,r,c)}return n.mergedAttrs=ee(n.mergedAttrs,n.attrs),i}function gm(t,e,n,r,i,s){const c=s.hostBindings;if(c){let d=t.hostBindingOpCodes;null===d&&(d=t.hostBindingOpCodes=[]);const h=~e.index;(function mM(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(d)!=h&&d.push(h),d.push(r,i,c)}}function x_(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function mm(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function JE(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ws(e)&&(n[""]=t)}}function XE(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ym(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=es(i.type)),c=new Ka(s,ws(i),Pt);t.blueprint[r]=c,n[r]=c,gm(t,e,0,r,Ea(t,n,i.hostVars,Qt),i)}function eI(t,e,n){const r=Qr(e,t),i=C_(n),s=t[10],c=gf(t,Ts(t,i,null,n.onPush?32:16,r,e,s,s.createRenderer(r,n),null,null,null));t[e.index]=c}function tI(t,e,n,r,i,s){const c=s[e];if(null!==c){const d=r.setInput;for(let h=0;h<c.length;){const m=c[h++],_=c[h++],I=c[h++];null!==d?r.setInput(n,I,m,_):n[_]=I}}}function vM(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function R_(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function wM(t,e){const n=Or(e,t);if(Bi(n)){const r=n[1];48&n[2]?su(r,n,r.template,n[8]):n[5]>0&&P_(n)}}function P_(t){for(let r=zh(t);null!==r;r=e_(r))for(let i=10;i<r.length;i++){const s=r[i];if(Bi(s))if(512&s[2]){const c=s[1];su(c,s,c.template,s[8])}else s[5]>0&&P_(s)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Or(n[r],t);Bi(i)&&i[5]>0&&P_(i)}}function EM(t,e){const n=Or(e,t),r=n[1];(function rI(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),Ju(r,n,n[8])}function gf(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Dm(t,e,n){const r=e[10];r.begin&&r.begin();try{su(t,e,t.template,n)}catch(i){throw function hi(t,e){const n=t[9],r=n?n.get(Xd,null):null;r&&r.handleError(e)}(e,i),i}finally{r.end&&r.end()}}function k_(t){!function O_(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Wg(n);if(null!==r){const i=r[1];pf(i,r,i.template,n)}}}(t[8])}function wm(t,e,n){Vd(0),e(t,n)}const bM=(()=>Promise.resolve(null))();function Em(t,e,n,r,i){for(let s=0;s<n.length;){const c=n[s++],d=n[s++],h=e[c],m=t.data[c];null!==m.setInput?m.setInput(h,i,r,d):h[d]=i}}function Xu(t,e,n){const r=function io(t,e){return sr(e[t])}(e,t);!function Kh(t,e,n){t.setValue(e,n)}(t[11],r,n)}function Im(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let c=0;c<e.length;c++){const d=e[c];"number"==typeof d?s=d:1==s?i=ys(i,d):2==s&&(r=ys(r,d+": "+e[++c]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function rp(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(sr(s)),Xi(s))for(let d=10;d<s.length;d++){const h=s[d],m=h[1].firstChild;null!==m&&rp(h[1],h,m,r)}const c=n.type;if(8&c)rp(t,e,n.child,r);else if(32&c){const d=Jv(n,e);let h;for(;h=d();)r.push(h)}else if(16&c){const d=LA(e,n);if(Array.isArray(d))r.push(...d);else{const h=ef(e[16]);rp(h[1],h,d,r,!0)}}n=i?n.projectionNext:n.next}return r}class ip{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return rp(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Xi(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Zg(e,r),rs(n,r))}this._attachedToViewContainer=!1}OA(this._lView[1],this._lView)}onDestroy(e){!function b_(t,e,n,r){const i=function sI(t){return t[7]||(t[7]=[])}(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&function F_(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){!function _m(t){for(;t;){t[2]|=32;const e=ef(t);if(El(t)&&!e)return t;t=e}return null}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Dm(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new gt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Zu(t,e){em(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new gt(902,!1);this._appRef=e}}class aI extends ip{constructor(e){super(e),this._view=e}detectChanges(){k_(this._view)}checkNoChanges(){}get context(){return null}}class Cm extends va{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Mn(e);return new mf(n,this.ngModule)}}function Ql(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class SM{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){const i=this.injector.get(e,Jd,r);return i!==Jd||n===Jd?i:this.parentInjector.get(e,n,r)}}class mf extends Ug{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function a_(t){return t.map(af).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return Ql(this.componentDef.inputs)}get outputs(){return Ql(this.componentDef.outputs)}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof ru?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const c=s?new SM(e,s):e,d=c.get(eE,null);if(null===d)throw new gt(407,!1);const h=c.get(nE,null),m=d.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",I=r?function ZE(t,e,n){return t.selectRootElement(e,n===ui.ShadowDom)}(m,r,this.componentDef.encapsulation):Kg(d.createRenderer(null,this.componentDef),_,function TM(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(_)),A=this.componentDef.onPush?288:272,R=function NM(t,e){return{components:[],scheduler:t||SA,clean:bM,playerHandler:e||null,flags:0}}(),F=hm(0,null,null,1,0,null,null,null,null,null),Y=Ts(null,F,R,A,null,null,d,m,h,c,null);let ne,_e;Lu(Y);try{const je=function uI(t,e,n,r,i,s){const c=n[1];n[22]=t;const h=ql(c,22,2,"#host",null),m=h.mergedAttrs=e.hostAttrs;null!==m&&(Im(h,m,!0),null!==t&&(T(i,t,m),null!==h.classes&&Qh(i,t,h.classes),null!==h.styles&&Qu(i,t,h.styles)));const _=r.createRenderer(t,e),I=Ts(n,C_(e),null,e.onPush?32:16,n[22],h,r,_,s||null,null,null);return c.firstCreatePass&&(Fo(ga(h,n),c,e.type),mm(c,h),XE(h,n.length,1)),gf(n,I),n[22]=I}(I,this.componentDef,Y,d,m);if(I)if(r)T(m,I,["ng-version",rE.full]);else{const{attrs:fe,classes:$e}=function uf(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!Lo(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);fe&&T(m,I,fe),$e&&$e.length>0&&Qh(m,I,$e.join(" "))}if(_e=Es(F,22),void 0!==n){const fe=_e.projection=[];for(let $e=0;$e<this.ngContentSelectors.length;$e++){const rt=n[$e];fe.push(null!=rt?Array.from(rt):null)}}ne=function au(t,e,n,r,i){const s=n[1],c=function gM(t,e,n){const r=kr();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ym(t,r,e,Ea(t,e,1,null),n),S_(t,r));const i=Qa(e,t,r.directiveStart,r);ss(i,e);const s=Qr(r,e);return s&&ss(s,e),i}(s,n,e);if(r.components.push(c),t[8]=c,null!==i)for(const h of i)h(c,e);if(e.contentQueries){const h=kr();e.contentQueries(1,c,h.directiveStart)}const d=kr();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ts(d.index),gm(n[1],d,0,d.directiveStart,d.directiveEnd,e),x_(e,c)),c}(je,this.componentDef,Y,R,[RM]),Ju(F,Y,null)}finally{xc()}return new NF(this.componentType,ne,Ul(_e,Y),Y,_e)}}class NF extends class Q0{}{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new aI(i),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;Em(s[1],s,i,e,n),YE(s,this._tNode.index)}}get injector(){return new Oc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function RM(){const t=kr();za(Fe()[1],t)}let Tm=null;function Zc(){if(!Tm){const t=_n.Symbol;if(t&&t.iterator)Tm=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Tm=r)}}}return Tm}function yf(t){return!!function V_(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Zc()in t)}function bi(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Mm(t,e,n){const r=Fe();return bi(r,dr(),e)&&function ho(t,e,n,r,i,s,c,d){const h=Qr(e,n);let _,m=e.inputs;!d&&null!=m&&(_=m[r])?(Em(t,n,_,r,i),Au(e)&&YE(n,e.index)):3&e.type&&(r=function hM(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=c?c(i,e.value||"",r):i,s.setProperty(h,r,i))}(ct(),function qn(){const t=Ft.lFrame;return Es(t.tView,t.selectedIndex)}(),r,t,e,r[11],n,!1),Mm}function xm(t,e,n,r,i){const c=i?"class":"style";Em(t,n,e.inputs[c],c,r)}function ei(t,e,n,r){const i=Fe(),s=ct(),c=22+t,d=i[11],h=i[c]=Kg(d,e,function Rl(){return Ft.lFrame.currentNamespace}()),m=s.firstCreatePass?function CI(t,e,n,r,i,s,c){const d=e.consts,m=ql(e,t,2,i,so(d,s));return pm(e,n,m,so(d,c)),null!==m.attrs&&Im(m,m.attrs,!1),null!==m.mergedAttrs&&Im(m,m.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,m),m}(c,s,i,0,e,n,r):s.data[c];oo(m,!0);const _=m.mergedAttrs;null!==_&&T(d,h,_);const I=m.classes;null!==I&&Qh(d,h,I);const A=m.styles;return null!==A&&Qu(d,h,A),64!=(64&m.flags)&&sf(s,i,h,m),0===function Ha(){return Ft.lFrame.elementDepthCount}()&&ss(h,i),function li(){Ft.lFrame.elementDepthCount++}(),Fa(m)&&(qc(s,i,m),function Zl(t,e,n){if(wl(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const c=t.data[s];c.contentQueries&&c.contentQueries(1,n[s],s)}}}(s,m,i)),null!==r&&Kc(i,m),ei}function fr(){let t=kr();Fd()?function ao(){Ft.lFrame.isParent=!1}():(t=t.parent,oo(t,!1));const e=t;!function Al(){Ft.lFrame.elementDepthCount--}();const n=ct();return n.firstCreatePass&&(za(n,t),wl(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Pl(t){return 0!=(16&t.flags)}(e)&&xm(n,e,Fe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Ih(t){return 0!=(32&t.flags)}(e)&&xm(n,e,Fe(),e.stylesWithoutHost,!1),fr}function tc(t,e,n,r){return ei(t,e,n,r),fr(),tc}function Pm(t){return!!t&&"function"==typeof t.then}function td(t){return!!t&&"function"==typeof t.subscribe}const UM=td;function jr(t,e=""){const n=Fe(),r=ct(),i=t+22,s=r.firstCreatePass?ql(r,i,1,e,null):r.data[i],c=n[i]=function qg(t,e){return t.createText(e)}(n[11],e);sf(r,n,c,s),oo(s,!1)}function fp(t,e,n){const r=Fe(),i=function Jl(t,e,n,r){return bi(t,dr(),n)?e+Nt(n)+r:Qt}(r,t,e,n);return i!==Qt&&Xu(r,Jr(),i),fp}const nd="en-US";let rC=nd;class Ca{}class CC{}class hD extends Ca{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Cm(this);const r=Pr(e);this._bootstrapComponents=Ku(r.bootstrap),this._r3Injector=PE(e,n,[{provide:Ca,useValue:this},{provide:va,useValue:this.componentFactoryResolver}],vn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Nf extends CC{constructor(e){super(),this.moduleType=e}create(e){return new hD(this.moduleType,e)}}class pD extends Ca{constructor(e,n,r){super(),this.componentFactoryResolver=new Cm(this),this.instance=null;const i=new Fv([...e,{provide:Ca,useValue:this},{provide:va,useValue:this.componentFactoryResolver}],n||qu(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function gD(t,e,n=null){return new pD(t,e,n).injector}function fN(t,e,n,r,i,s){const c=e+n;return bi(t,c,i)?function uu(t,e,n){return t[e]=n}(t,c+1,s?r.call(s,i):r(i)):function Xm(t,e){const n=t[e];return n===Qt?void 0:n}(t,c+1)}function vN(t,e,n){const r=t+22,i=Fe(),s=function ca(t,e){return t[e]}(i,r);return function ey(t,e){return t[1].data[e].pure}(i,r)?fN(i,function Fr(){const t=Ft.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,s.transform,n,s):s.transform(n)}function wD(t){return e=>{setTimeout(t,void 0,e)}}const Ms=class DD extends hn{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),c=r;if(e&&"object"==typeof e){const h=e;i=h.next?.bind(h),s=h.error?.bind(h),c=h.complete?.bind(h)}this.__isAsync&&(s=wD(s),i&&(i=wD(i)),c&&(c=wD(c)));const d=super.subscribe({next:i,error:s,complete:c});return e instanceof ae&&e.add(d),d}};let Jc=(()=>{class t{}return t.__NG_ELEMENT_ID__=ty,t})();const QF=Jc,EN=class extends QF{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e,n){const r=this._declarationTContainer.tViews,i=Ts(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,n||null);i[17]=this._declarationLView[this._declarationTContainer.index];const c=this._declarationLView[19];return null!==c&&(i[19]=c.createEmbeddedView(r)),Ju(r,i,e),new ip(i)}};function ty(){return function ny(t,e){return 4&t.type?new EN(e,t,Ul(t,e)):null}(kr(),Fe())}let hu=(()=>{class t{}return t.__NG_ELEMENT_ID__=YF,t})();function YF(){return function CN(t,e){let n;const r=e[t.index];if(Xi(r))n=r;else{let i;if(8&t.type)i=sr(r);else{const s=e[11];i=s.createComment("");const c=Qr(t,e);rf(s,Zh(s,c),i,function hF(t,e){return t.nextSibling(e)}(s,c),!1)}e[t.index]=n=R_(r,e,i,t),gf(e,n)}return new LC(n,t,e)}(kr(),Fe())}const JF=hu,LC=class extends JF{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ul(this._hostTNode,this._hostLView)}get injector(){return new Oc(this._hostTNode,this._hostLView)}get parentInjector(){const e=Gs(this._hostTNode,this._hostLView);if(xe(e)){const n=_t(e,this._hostLView),r=Qe(e);return new Oc(n[1].data[r+8],n)}return new Oc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=IN(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const c=e.createEmbeddedView(n||{},s);return this.insert(c,i),c}createComponent(e,n,r,i,s){const c=e&&!function re(t){return"function"==typeof t}(e);let d;if(c)d=n;else{const I=n||{};d=I.index,r=I.injector,i=I.projectableNodes,s=I.environmentInjector||I.ngModuleRef}const h=c?e:new mf(Mn(e)),m=r||this.parentInjector;if(!s&&null==h.ngModule){const A=(c?m:this.parentInjector).get(ru,null);A&&(s=A)}const _=h.create(m,i,void 0,s);return this.insert(_.hostView,d),_}insert(e,n){const r=e._lView,i=r[1];if(function Tc(t){return Xi(t[3])}(r)){const _=this.indexOf(e);if(-1!==_)this.detach(_);else{const I=r[3],A=new LC(I,I[6],I[3]);A.detach(A.indexOf(e))}}const s=this._adjustIndex(n),c=this._lContainer;!function DE(t,e,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-10?(e[4]=n[i],er(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const c=e[17];null!==c&&n!==c&&function r_(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(c,e);const d=e[19];null!==d&&d.insertView(t),e[2]|=64}(i,r,c,s);const d=bE(s,c),h=r[11],m=Zh(h,c[7]);return null!==m&&function t_(t,e,n,r,i,s){r[0]=i,r[6]=e,em(t,r,n,1,i,s)}(i,c[6],h,r,m,d),e.attachToViewContainerRef(),er(ED(c),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=IN(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Zg(this._lContainer,n);r&&(rs(ED(this._lContainer),n),OA(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Zg(this._lContainer,n);return r&&null!=rs(ED(this._lContainer),n)?new ip(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function IN(t){return t[8]}function ED(t){return t[8]||(t[8]=[])}function cy(...t){}const Ap=new nn("Application Initializer");let Mp=(()=>{class t{constructor(n){this.appInits=n,this.resolve=cy,this.reject=cy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Pm(s))n.push(s);else if(UM(s)){const c=new Promise((d,h)=>{s.subscribe({complete:d,error:h})});n.push(c)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(Bt(Ap,8))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const xp=new nn("AppId",{providedIn:"root",factory:function rb(){return`${Np()}${Np()}${Np()}`}});function Np(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qN=new nn("Platform Initializer"),PD=new nn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ly=new nn("appBootstrapListener");let lL=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const rl=new nn("LocaleId",{providedIn:"root",factory:()=>Br(rl,vt.Optional|vt.SkipSelf)||function dL(){return typeof $localize<"u"&&$localize.locale||nd}()});class hL{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let ib=(()=>{class t{compileModuleSync(n){return new Nf(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Ku(Pr(n).declarations).reduce((c,d)=>{const h=Mn(d);return h&&c.push(new mf(h)),c},[]);return new hL(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const yL=(()=>Promise.resolve(0))();function o(t){typeof Zone>"u"?yL.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class u{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ms(!1),this.onMicrotaskEmpty=new Ms(!1),this.onStable=new Ms(!1),this.onError=new Ms(!1),typeof Zone>"u")throw new gt(908,!1);Zone.assertZonePatched();const i=this;if(i._nesting=0,i._outer=i._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;i._inner=i._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function a(){let t=_n.requestAnimationFrame,e=_n.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function v(t){const e=()=>{!function p(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(_n,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,w(t),t.isCheckStableRunning=!0,f(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),w(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,c,d)=>{try{return C(t),n.invokeTask(i,s,c,d)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),S(t)}},onInvoke:(n,r,i,s,c,d,h)=>{try{return C(t),n.invoke(i,s,c,d,h)}finally{t.shouldCoalesceRunChangeDetection&&e(),S(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,w(t),f(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!u.isInAngularZone())throw new gt(909,!1)}static assertNotInAngularZone(){if(u.isInAngularZone())throw new gt(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,c=s.scheduleEventTask("NgZoneEvent: "+i,e,l,cy,cy);try{return s.runTask(c,n,r)}finally{s.cancelTask(c)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const l={};function f(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function w(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function C(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function S(t){t._nesting--,f(t)}class P{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ms,this.onMicrotaskEmpty=new Ms,this.onStable=new Ms,this.onError=new Ms}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const L=new nn(""),K=new nn("");let ot,se=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ot||(function ze(t){ot=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{u.assertNotInAngularZone(),o(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())o(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(c=>c.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(Bt(u),Bt(be),Bt(K))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac}),t})(),be=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return ot?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),dt=null;const jt=new nn("AllowMultipleToken"),Ve=new nn("PlatformDestroyListeners");class dy{constructor(e,n){this.name=e,this.token=n}}function hy(t,e,n=[]){const r=`Platform: ${e}`,i=new nn(r);return(s=[])=>{let c=QN();if(!c||c.injector.get(jt,!1)){const d=[...n,...s,{provide:i,useValue:!0}];t?t(d):function OD(t){if(dt&&!dt.get(jt,!1))throw new gt(400,!1);dt=t;const e=t.get(vL);(function fy(t){const e=t.get(qN,null);e&&e.forEach(n=>n())})(t)}(function py(t=[],e){return Vo.create({name:e,providers:[{provide:$h,useValue:"platform"},{provide:Ve,useValue:new Set([()=>dt=null])},...t]})}(d,r))}return function FD(t){const e=QN();if(!e)throw new gt(401,!1);return e}()}}function QN(){return dt?.get(vL)??null}let vL=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function G3(t,e){let n;return n="noop"===t?new P:("zone.js"===t?void 0:t)||new u(e),n}(r?.ngZone,function _L(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:u,useValue:i}];return i.run(()=>{const c=Vo.create({providers:s,parent:this.injector,name:n.moduleType.name}),d=n.create(c),h=d.injector.get(Xd,null);if(!h)throw new gt(402,!1);return i.runOutsideAngular(()=>{const m=i.onError.subscribe({next:_=>{h.handleError(_)}});d.onDestroy(()=>{ub(this._modules,d),m.unsubscribe()})}),function DL(t,e,n){try{const r=n();return Pm(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(h,i,()=>{const m=d.injector.get(Mp);return m.runInitializers(),m.donePromise.then(()=>(function iC(t){ai(t,"Expected localeId to be defined"),"string"==typeof t&&(rC=t.toLowerCase().replace(/_/g,"-"))}(d.injector.get(rl,nd)||nd),this._moduleDoBootstrap(d),d))})})}bootstrapModule(n,r=[]){const i=wL({},r);return function Rn(t,e,n){const r=new Nf(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(ab);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new gt(403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new gt(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Ve,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(Bt(Vo))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function wL(t,e){return Array.isArray(e)?e.reduce(wL,t):{...t,...e}}let ab=(()=>{class t{constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Ne(d=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{d.next(this._stable),d.complete()})}),c=new Ne(d=>{let h;this._zone.runOutsideAngular(()=>{h=this._zone.onStable.subscribe(()=>{u.assertNotInAngularZone(),o(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,d.next(!0))})})});const m=this._zone.onUnstable.subscribe(()=>{u.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{d.next(!1)}))});return()=>{h.unsubscribe(),m.unsubscribe()}});this.isStable=function Sd(...t){const e=Wt(t),n=function wu(t,e){return"number"==typeof Js(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?cn(r[0]):tn(n)(wt(r,e)):Gn}(s,c.pipe(function hl(t={}){const{connector:e=(()=>new hn),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let c,d,h,m=0,_=!1,I=!1;const A=()=>{d?.unsubscribe(),d=void 0},R=()=>{A(),c=h=void 0,_=I=!1},F=()=>{const Y=c;R(),Y?.unsubscribe()};return Ht((Y,ne)=>{m++,!I&&!_&&A();const _e=h=h??e();ne.add(()=>{m--,0===m&&!I&&!_&&(d=Ma(F,i))}),_e.subscribe(ne),!c&&m>0&&(c=new et({next:je=>_e.next(je),error:je=>{I=!0,A(),d=Ma(R,n,je),_e.error(je)},complete:()=>{_=!0,A(),d=Ma(R,r),_e.complete()}}),cn(Y).subscribe(c))})(s)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof Ug;if(!this._injector.get(Mp).done)throw!i&&function tl(t){const e=Mn(t)||In(t)||mr(t);return null!==e&&e.standalone}(n),new gt(405,false);let c;c=i?n:this._injector.get(va).resolveComponentFactory(n),this.componentTypes.push(c.componentType);const d=function ad(t){return t.isBoundToModule}(c)?void 0:this._injector.get(Ca),m=c.create(Vo.NULL,[],r||c.selector,d),_=m.location.nativeElement,I=m.injector.get(L,null);return I?.registerApplication(_),m.onDestroy(()=>{this.detachView(m.hostView),ub(this.components,m),I?.unregisterApplication(_)}),this._loadComponent(m),m}tick(){if(this._runningTick)throw new gt(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;ub(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(ly,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ub(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new gt(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)(Bt(u),Bt(ru),Bt(Xd))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ub(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let IL=!0,YN=(()=>{class t{}return t.__NG_ELEMENT_ID__=K3,t})();function K3(t){return function Z3(t,e,n){if(Au(t)&&!n){const r=Or(t.index,e);return new ip(r,r)}return 47&t.type?new ip(e[16],e):null}(kr(),Fe(),16==(16&t))}class AL{constructor(){}supports(e){return yf(e)}create(e){return new t8(e)}}const e8=(t,e)=>e;class t8{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||e8}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const c=!r||n&&n.currentIndex<xL(r,i,s)?n:r,d=xL(c,i,s),h=c.currentIndex;if(c===r)i--,r=r._nextRemoved;else if(n=n._next,null==c.previousIndex)i++;else{s||(s=[]);const m=d-i,_=h-i;if(m!=_){for(let A=0;A<m;A++){const R=A<s.length?s[A]:s[A]=0,F=R+A;_<=F&&F<m&&(s[A]=R+1)}s[c.previousIndex]=_-m}}d!==h&&e(c,d,h)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!yf(e))throw new gt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,c,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let d=0;d<this.length;d++)s=e[d],c=this._trackByFn(d,s),null!==n&&Object.is(n.trackById,c)?(r&&(n=this._verifyReinsertion(n,s,c,d)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,c,d),r=!0),n=n._next}else i=0,function Sm(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Zc()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,d=>{c=this._trackByFn(i,d),null!==n&&Object.is(n.trackById,c)?(r&&(n=this._verifyReinsertion(n,d,c,i)),Object.is(n.item,d)||this._addIdentityChange(n,d)):(n=this._mismatch(n,d,c,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new n8(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new ML),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ML),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class n8{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class r8{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class ML{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new r8,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xL(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function RL(){return new db([new AL])}let db=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||RL()),deps:[[t,new zd,new Oh]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new gt(901,!1)}}return t.\u0275prov=Gt({token:t,providedIn:"root",factory:RL}),t})();const u8=hy(null,"core",[]);let c8=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(Bt(ab))},t.\u0275mod=vs({type:t}),t.\u0275inj=Rr({}),t})(),fb=null;function Rf(){return fb}const Ho=new nn("DocumentToken");let nR=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Gt({token:t,factory:function(){return function h8(){return Bt(OL)}()},providedIn:"platform"}),t})();const p8=new nn("Location Initialized");let OL=(()=>{class t extends nR{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Rf().getBaseHref(this._doc)}onPopState(n){const r=Rf().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Rf().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){kL()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){kL()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(Bt(Ho))},t.\u0275prov=Gt({token:t,factory:function(){return function g8(){return new OL(Bt(Ho))}()},providedIn:"platform"}),t})();function kL(){return!!window.history.pushState}function rR(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function FL(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function ud(t){return t&&"?"!==t[0]?"?"+t:t}let Pp=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Gt({token:t,factory:function(){return Br(VL)},providedIn:"root"}),t})();const LL=new nn("appBaseHref");let VL=(()=>{class t extends Pp{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Br(Ho).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return rR(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+ud(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const c=this.prepareExternalUrl(i+ud(s));this._platformLocation.pushState(n,r,c)}replaceState(n,r,i,s){const c=this.prepareExternalUrl(i+ud(s));this._platformLocation.replaceState(n,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(Bt(nR),Bt(LL,8))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),m8=(()=>{class t extends Pp{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=rR(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let c=this.prepareExternalUrl(i+ud(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(n,r,c)}replaceState(n,r,i,s){let c=this.prepareExternalUrl(i+ud(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(Bt(nR),Bt(LL,8))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac}),t})(),iR=(()=>{class t{constructor(n){this._subject=new Ms,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._baseHref=FL(BL(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ud(r))}normalize(n){return t.stripTrailingSlash(function v8(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,BL(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ud(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ud(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return t.normalizeQueryParams=ud,t.joinWithSlash=rR,t.stripTrailingSlash=FL,t.\u0275fac=function(n){return new(n||t)(Bt(Pp))},t.\u0275prov=Gt({token:t,factory:function(){return function y8(){return new iR(Bt(Pp))}()},providedIn:"root"}),t})();function BL(t){return t.replace(/\/index.html$/,"")}class iW{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let QL=(()=>{class t{constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new iW(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===s?void 0:s);else if(null!==s){const d=r.get(s);r.move(d,c),YL(d,i)}});for(let i=0,s=r.length;i<s;i++){const d=r.get(i).context;d.index=i,d.count=s,d.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{YL(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(Pt(hu),Pt(Jc),Pt(db))},t.\u0275dir=xt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function YL(t,e){t.context.$implicit=e.item}class hW{createSubscription(e,n){return e.subscribe({next:n,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class pW{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const gW=new pW,mW=new hW;let eV=(()=>{class t{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(Pm(n))return gW;if(td(n))return mW;throw function ac(t,e){return new gt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return t.\u0275fac=function(n){return new(n||t)(Pt(YN,16))},t.\u0275pipe=Kr({name:"async",type:t,pure:!1,standalone:!0}),t})(),PW=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=vs({type:t}),t.\u0275inj=Rr({}),t})();let LW=(()=>{class t{}return t.\u0275prov=Gt({token:t,providedIn:"root",factory:()=>new VW(Bt(Ho),window)}),t})();class VW{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function BW(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const c=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=rV(this.window.history)||rV(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function rV(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class vR extends class UW extends class f8{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function d8(t){fb||(fb=t)}(new vR)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function $W(){return jD=jD||document.querySelector("base"),jD?jD.getAttribute("href"):null}();return null==n?null:function HW(t){Eb=Eb||document.createElement("a"),Eb.setAttribute("href",t);const e=Eb.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){jD=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function tW(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Eb,jD=null;const iV=new nn("TRANSITION_ID"),GW=[{provide:Ap,useFactory:function WW(t,e,n){return()=>{n.get(Mp).donePromise.then(()=>{const r=Rf(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[iV,Ho,Vo],multi:!0}];let qW=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Gt({token:t,factory:t.\u0275fac}),t})();const Ib=new nn("EventManagerPlugins");let Cb=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const c=i[s];if(c.supports(n))return this._eventNameToPlugin.set(n,c),c}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(Bt(Ib),Bt(u))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac}),t})();class sV{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=Rf().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let oV=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Gt({token:t,factory:t.\u0275fac}),t})(),UD=(()=>{class t extends oV{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,i.push(r.appendChild(c))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(aV),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(aV))}}return t.\u0275fac=function(n){return new(n||t)(Bt(Ho))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac}),t})();function aV(t){Rf().remove(t)}const _R={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},DR=/%COMP%/g;function bb(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?bb(t,i,n):(i=i.replace(DR,t),n.push(i))}return n}function lV(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let wR=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ER(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case ui.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new XW(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case ui.ShadowDom:return new eG(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=bb(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(Bt(Cb),Bt(UD),Bt(xp))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac}),t})();class ER{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(_R[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){(fV(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(fV(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=_R[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=_R[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(zs.DashCase|zs.Important)?e.style.setProperty(n,r,i&zs.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&zs.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,lV(r)):this.eventManager.addEventListener(e,n,lV(r))}}function fV(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class XW extends ER{constructor(e,n,r,i){super(e),this.component=r;const s=bb(i+"-"+r.id,r.styles,[]);n.addStyles(s),this.contentAttr=function QW(t){return"_ngcontent-%COMP%".replace(DR,t)}(i+"-"+r.id),this.hostAttr=function YW(t){return"_nghost-%COMP%".replace(DR,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class eG extends ER{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=bb(i.id,i.styles,[]);for(let c=0;c<s.length;c++){const d=document.createElement("style");d.textContent=s[c],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let tG=(()=>{class t extends sV{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(Bt(Ho))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac}),t})();const hV=["alt","control","meta","shift"],rG={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pV={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},iG={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let sG=(()=>{class t extends sV{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),c=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Rf().onAndCancel(n,s.domEventName,c))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let c="";if(hV.forEach(h=>{const m=r.indexOf(h);m>-1&&(r.splice(m,1),c+=h+".")}),c+=s,0!=r.length||0===s.length)return null;const d={};return d.domEventName=i,d.fullKey=c,d}static getEventFullKey(n){let r="",i=function oG(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&pV.hasOwnProperty(e)&&(e=pV[e]))}return rG[e]||e}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),hV.forEach(s=>{s!=i&&(0,iG[s])(n)&&(r+=s+".")}),r+=i,r}static eventCallback(n,r,i){return s=>{t.getEventFullKey(s)===n&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(Bt(Ho))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac}),t})();const gV=[{provide:PD,useValue:"browser"},{provide:qN,useValue:function aG(){vR.makeCurrent()},multi:!0},{provide:Ho,useFactory:function cG(){return function WS(t){M0=t}(document),document},deps:[]}],lG=hy(u8,"browser",gV),mV=new nn(""),yV=[{provide:K,useClass:class zW{addToWindow(e){_n.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},_n.getAllAngularTestabilities=()=>e.getAllTestabilities(),_n.getAllAngularRootElements=()=>e.getAllRootElements(),_n.frameworkStabilizers||(_n.frameworkStabilizers=[]),_n.frameworkStabilizers.push(r=>{const i=_n.getAllAngularTestabilities();let s=i.length,c=!1;const d=function(h){c=c||h,s--,0==s&&r(c)};i.forEach(function(h){h.whenStable(d)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Rf().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:L,useClass:se,deps:[u,be,K]},{provide:se,useClass:se,deps:[u,be,K]}],vV=[{provide:$h,useValue:"root"},{provide:Xd,useFactory:function uG(){return new Xd},deps:[]},{provide:Ib,useClass:tG,multi:!0,deps:[Ho,u,PD]},{provide:Ib,useClass:sG,multi:!0,deps:[Ho]},{provide:wR,useClass:wR,deps:[Cb,UD,xp]},{provide:eE,useExisting:wR},{provide:oV,useExisting:UD},{provide:UD,useClass:UD,deps:[Ho]},{provide:Cb,useClass:Cb,deps:[Ib,u]},{provide:class jW{},useClass:qW,deps:[]},[]];let dG=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:xp,useValue:n.appId},{provide:iV,useExisting:xp},GW]}}}return t.\u0275fac=function(n){return new(n||t)(Bt(mV,12))},t.\u0275mod=vs({type:t}),t.\u0275inj=Rr({providers:[...vV,...yV],imports:[PW,c8]}),t})(),_V=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return t.\u0275fac=function(n){return new(n||t)(Bt(Ho))},t.\u0275prov=Gt({token:t,factory:function(n){let r=null;return r=n?new n:function hG(){return new _V(Bt(Ho))}(),r},providedIn:"root"}),t})();function qt(...t){return wt(t,Wt(t))}typeof window<"u"&&window;class uc extends hn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Tb=U(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:wG}=Array,{getPrototypeOf:EG,prototype:IG,keys:CG}=Object;const{isArray:SG}=Array;function EV(...t){const e=Wt(t),n=function Qo(t){return N(Js(t))?t.pop():void 0}(t),{args:r,keys:i}=function bG(t){if(1===t.length){const e=t[0];if(wG(e))return{args:e,keys:null};if(function TG(t){return t&&"object"==typeof t&&EG(t)===IG}(e)){const n=CG(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return wt([],e);const s=new Ne(function NG(t,e,n=we){return r=>{IV(e,()=>{const{length:i}=t,s=new Array(i);let c=i,d=i;for(let h=0;h<i;h++)IV(e,()=>{const m=wt(t[h],e);let _=!1;m.subscribe(Rt(r,I=>{s[h]=I,_||(_=!0,d--),d||r.next(n(s.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>function xG(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}(i,c):we));return n?s.pipe(function MG(t){return Zt(e=>function AG(t,e){return SG(e)?t(...e):t(e)}(t,e))}(n)):s}function IV(t,e,n){t?Ee(n,t,e):e()}function bR(...t){return function RG(){return tn(1)}()(wt(t,Wt(t)))}function CV(t){return new Ne(e=>{cn(t()).subscribe(e)})}function $D(t,e){const n=N(t)?t:()=>t,r=i=>i.error(n());return new Ne(e?i=>e.schedule(r,0,i):r)}function TR(){return Ht((t,e)=>{let n=null;t._refCount++;const r=Rt(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class bV extends Ne{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Bn(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ae;const n=this.getSubject();e.add(this.source.subscribe(Rt(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ae.EMPTY)}return e}refCount(){return TR()(this)}}function il(t,e){return Ht((n,r)=>{let i=null,s=0,c=!1;const d=()=>c&&!i&&r.complete();n.subscribe(Rt(r,h=>{i?.unsubscribe();let m=0;const _=s++;cn(t(h,_)).subscribe(i=Rt(r,I=>r.next(e?e(h,I,_,m++):I),()=>{i=null,d()}))},()=>{c=!0,d()}))})}function HD(t){return t<=0?()=>Gn:Ht((e,n)=>{let r=0;e.subscribe(Rt(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Of(t,e){return Ht((n,r)=>{let i=0;n.subscribe(Rt(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Sb(t){return Ht((e,n)=>{let r=!1;e.subscribe(Rt(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function TV(t=OG){return Ht((e,n)=>{let r=!1;e.subscribe(Rt(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function OG(){return new Tb}function kf(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Of((i,s)=>t(i,s,r)):we,HD(1),n?Sb(e):TV(()=>new Tb))}function Op(t,e){return N(e)?pt(t,e,1):pt(t,1)}function qs(t,e,n){const r=N(t)||e||n?{next:t,error:e,complete:n}:t;return r?Ht((i,s)=>{var c;null===(c=r.subscribe)||void 0===c||c.call(r);let d=!0;i.subscribe(Rt(s,h=>{var m;null===(m=r.next)||void 0===m||m.call(r,h),s.next(h)},()=>{var h;d=!1,null===(h=r.complete)||void 0===h||h.call(r),s.complete()},h=>{var m;d=!1,null===(m=r.error)||void 0===m||m.call(r,h),s.error(h)},()=>{var h,m;d&&(null===(h=r.unsubscribe)||void 0===h||h.call(r)),null===(m=r.finalize)||void 0===m||m.call(r)}))}):we}function Ff(t){return Ht((e,n)=>{let s,r=null,i=!1;r=e.subscribe(Rt(n,void 0,void 0,c=>{s=cn(t(c,Ff(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function kG(t,e,n,r,i){return(s,c)=>{let d=n,h=e,m=0;s.subscribe(Rt(c,_=>{const I=m++;h=d?t(h,_,I):(d=!0,_),r&&c.next(h)},i&&(()=>{d&&c.next(h),c.complete()})))}}function SV(t,e){return Ht(kG(t,e,arguments.length>=2,!0))}function SR(t){return t<=0?()=>Gn:Ht((e,n)=>{let r=[];e.subscribe(Rt(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function AV(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Of((i,s)=>t(i,s,r)):we,SR(1),n?Sb(e):TV(()=>new Tb))}function AR(t){return Ht((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const Tn="primary";class VG{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function my(t){return new VG(t)}function BG(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const c=r[s],d=t[s];if(c.startsWith(":"))i[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function sl(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!MV(t[i],e[i]))return!1;return!0}function MV(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function xV(t){return Array.prototype.concat.apply([],t)}function NV(t){return t.length>0?t[t.length-1]:null}function xs(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function ld(t){return UM(t)?t:Pm(t)?wt(Promise.resolve(t)):qt(t)}const $G={exact:function OV(t,e,n){if(!Fp(t.segments,e.segments)||!Ab(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!OV(t.children[r],e.children[r],n))return!1;return!0},subset:kV},RV={exact:function HG(t,e){return sl(t,e)},subset:function WG(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>MV(t[n],e[n]))},ignored:()=>!0};function PV(t,e,n){return $G[n.paths](t.root,e.root,n.matrixParams)&&RV[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function kV(t,e,n){return FV(t,e,e.segments,n)}function FV(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Fp(i,n)||e.hasChildren()||!Ab(i,n,r))}if(t.segments.length===n.length){if(!Fp(t.segments,n)||!Ab(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!kV(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(Fp(t.segments,i)&&Ab(t.segments,i,r)&&t.children[Tn])&&FV(t.children[Tn],e,s,r)}}function Ab(t,e,n){return e.every((r,i)=>RV[n](t[i].parameters,r.parameters))}class kp{constructor(e,n,r){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=my(this.queryParams)),this._queryParamMap}toString(){return qG.serialize(this)}}class Pn{constructor(e,n){this.segments=e,this.children=n,this.parent=null,xs(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mb(this)}}class WD{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=my(this.parameters)),this._parameterMap}toString(){return jV(this)}}function Fp(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let LV=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Gt({token:t,factory:function(){return new xR},providedIn:"root"}),t})();class xR{parse(e){const n=new n4(e);return new kp(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${GD(e.root,!0)}`,r=function QG(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${xb(n)}=${xb(i)}`).join("&"):`${xb(n)}=${xb(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function KG(t){return encodeURI(t)}(e.fragment)}`:""}`}}const qG=new xR;function Mb(t){return t.segments.map(e=>jV(e)).join("/")}function GD(t,e){if(!t.hasChildren())return Mb(t);if(e){const n=t.children[Tn]?GD(t.children[Tn],!1):"",r=[];return xs(t.children,(i,s)=>{s!==Tn&&r.push(`${s}:${GD(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function zG(t,e){let n=[];return xs(t.children,(r,i)=>{i===Tn&&(n=n.concat(e(r,i)))}),xs(t.children,(r,i)=>{i!==Tn&&(n=n.concat(e(r,i)))}),n}(t,(r,i)=>i===Tn?[GD(t.children[Tn],!1)]:[`${i}:${GD(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Tn]?`${Mb(t)}/${n[0]}`:`${Mb(t)}/(${n.join("//")})`}}function VV(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xb(t){return VV(t).replace(/%3B/gi,";")}function NR(t){return VV(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nb(t){return decodeURIComponent(t)}function BV(t){return Nb(t.replace(/\+/g,"%20"))}function jV(t){return`${NR(t.path)}${function ZG(t){return Object.keys(t).map(e=>`;${NR(e)}=${NR(t[e])}`).join("")}(t.parameters)}`}const YG=/^[^\/()?;=#]+/;function Rb(t){const e=t.match(YG);return e?e[0]:""}const JG=/^[^=?&#]+/,e4=/^[^&#]+/;class n4{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pn([],{}):new Pn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Tn]=new Pn(e,n)),r}parseSegment(){const e=Rb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new gt(4009,!1);return this.capture(e),new WD(Nb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=Rb(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Rb(this.remaining);i&&(r=i,this.capture(r))}e[Nb(n)]=Nb(r)}parseQueryParam(e){const n=function XG(t){const e=t.match(JG);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const c=function t4(t){const e=t.match(e4);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=BV(n),s=BV(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Rb(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new gt(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Tn);const c=this.parseChildren();n[s]=1===Object.keys(c).length?c[Tn]:new Pn([],c),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new gt(4011,!1)}}function RR(t){return t.segments.length>0?new Pn([],{[Tn]:t}):t}function Pb(t){const e={};for(const r of Object.keys(t.children)){const s=Pb(t.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function r4(t){if(1===t.numberOfChildren&&t.children[Tn]){const e=t.children[Tn];return new Pn(t.segments.concat(e.segments),e.children)}return t}(new Pn(t.segments,e))}function Lp(t){return t instanceof kp}function o4(t,e,n,r,i){if(0===n.length)return yy(e.root,e.root,e.root,r,i);const s=function HV(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new $V(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return xs(s.outlets,(h,m)=>{d[m]="string"==typeof h?h.split("/"):h}),[...i,{outlets:d}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===c?(s.split("/").forEach((d,h)=>{0==h&&"."===d||(0==h&&""===d?n=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,s]},[]);return new $V(n,e,r)}(n);return s.toRoot()?yy(e.root,e.root,new Pn([],{}),r,i):function c(h){const m=function u4(t,e,n,r){if(t.isAbsolute)return new vy(e.root,!0,0);if(-1===r)return new vy(n,n===e.root,0);return function WV(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new gt(4005,!1);i=r.segments.length}return new vy(r,!1,i-s)}(n,r+(zD(t.commands[0])?0:1),t.numberOfDoubleDots)}(s,e,t.snapshot?._urlSegment,h),_=m.processChildren?KD(m.segmentGroup,m.index,s.commands):OR(m.segmentGroup,m.index,s.commands);return yy(e.root,m.segmentGroup,_,r,i)}(t.snapshot?._lastPathIndex)}function zD(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function qD(t){return"object"==typeof t&&null!=t&&t.outlets}function yy(t,e,n,r,i){let c,s={};r&&xs(r,(h,m)=>{s[m]=Array.isArray(h)?h.map(_=>`${_}`):`${h}`}),c=t===e?n:UV(t,e,n);const d=RR(Pb(c));return new kp(d,s,i)}function UV(t,e,n){const r={};return xs(t.children,(i,s)=>{r[s]=i===e?n:UV(i,e,n)}),new Pn(t.segments,r)}class $V{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&zD(r[0]))throw new gt(4003,!1);const i=r.find(qD);if(i&&i!==NV(r))throw new gt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vy{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function OR(t,e,n){if(t||(t=new Pn([],{})),0===t.segments.length&&t.hasChildren())return KD(t,e,n);const r=function l4(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const c=t.segments[i],d=n[r];if(qD(d))break;const h=`${d}`,m=r<n.length-1?n[r+1]:null;if(i>0&&void 0===h)break;if(h&&m&&"object"==typeof m&&void 0===m.outlets){if(!zV(h,m,c))return s;r+=2}else{if(!zV(h,{},c))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Pn(t.segments.slice(0,r.pathIndex),{});return s.children[Tn]=new Pn(t.segments.slice(r.pathIndex),t.children),KD(s,0,i)}return r.match&&0===i.length?new Pn(t.segments,{}):r.match&&!t.hasChildren()?kR(t,e,n):r.match?KD(t,0,i):kR(t,e,n)}function KD(t,e,n){if(0===n.length)return new Pn(t.segments,{});{const r=function c4(t){return qD(t[0])?t[0].outlets:{[Tn]:t}}(n),i={};return xs(r,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[c]=OR(t.children[c],e,s))}),xs(t.children,(s,c)=>{void 0===r[c]&&(i[c]=s)}),new Pn(t.segments,i)}}function kR(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(qD(s)){const h=d4(s.outlets);return new Pn(r,h)}if(0===i&&zD(n[0])){r.push(new WD(t.segments[e].path,GV(n[0]))),i++;continue}const c=qD(s)?s.outlets[Tn]:`${s}`,d=i<n.length-1?n[i+1]:null;c&&d&&zD(d)?(r.push(new WD(c,GV(d))),i+=2):(r.push(new WD(c,{})),i++)}return new Pn(r,{})}function d4(t){const e={};return xs(t,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[r]=kR(new Pn([],{}),0,n))}),e}function GV(t){const e={};return xs(t,(n,r)=>e[r]=`${n}`),e}function zV(t,e,n){return t==n.path&&sl(e,n.parameters)}class dd{constructor(e,n){this.id=e,this.url=n}}class FR extends dd{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Vp extends dd{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ob extends dd{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qV extends dd{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class f4 extends dd{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class h4 extends dd{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class p4 extends dd{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class g4 extends dd{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class m4 extends dd{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y4{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class v4{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class _4{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class D4{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w4{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class E4{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KV{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ZV{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=LR(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=LR(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=VR(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return VR(e,this._root).map(n=>n.value)}}function LR(t,e){if(t===e.value)return e;for(const n of e.children){const r=LR(t,n);if(r)return r}return null}function VR(t,e){if(t===e.value)return[e];for(const n of e.children){const r=VR(t,n);if(r.length)return r.unshift(e),r}return[]}class fd{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function _y(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class QV extends ZV{constructor(e,n){super(e),this.snapshot=n,BR(this,e)}toString(){return this.snapshot.toString()}}function YV(t,e){const n=function C4(t,e){const c=new kb([],{},{},"",{},Tn,e,null,t.root,-1,{});return new XV("",new fd(c,[]))}(t,e),r=new uc([new WD("",{})]),i=new uc({}),s=new uc({}),c=new uc({}),d=new uc(""),h=new Dy(r,i,c,d,s,Tn,e,n.root);return h.snapshot=n.root,new QV(new fd(h,[]),n)}class Dy{constructor(e,n,r,i,s,c,d,h){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=d,this._futureSnapshot=h}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Zt(e=>my(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Zt(e=>my(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function JV(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function b4(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class kb{constructor(e,n,r,i,s,c,d,h,m,_,I,A){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=c,this.component=d,this.routeConfig=h,this._urlSegment=m,this._lastPathIndex=_,this._correctedLastPathIndex=A??_,this._resolve=I}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=my(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=my(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class XV extends ZV{constructor(e,n){super(n),this.url=e,BR(this,n)}toString(){return e2(this._root)}}function BR(t,e){e.value._routerState=t,e.children.forEach(n=>BR(t,n))}function e2(t){const e=t.children.length>0?` { ${t.children.map(e2).join(", ")} } `:"";return`${t.value}${e}`}function jR(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,sl(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),sl(e.params,n.params)||t.params.next(n.params),function jG(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!sl(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),sl(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function UR(t,e){const n=sl(t.params,e.params)&&function GG(t,e){return Fp(t,e)&&t.every((n,r)=>sl(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||UR(t.parent,e.parent))}function ZD(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function S4(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ZD(t,r,i);return ZD(t,r)})}(t,e,n);return new fd(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(d=>ZD(t,d)),c}}const r=function A4(t){return new Dy(new uc(t.url),new uc(t.params),new uc(t.queryParams),new uc(t.fragment),new uc(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>ZD(t,s));return new fd(r,i)}}const $R="ngNavigationCancelingError";function t2(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=Lp(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=n2(!1,0,e);return i.url=n,i.navigationBehaviorOptions=r,i}function n2(t,e,n){const r=new Error("NavigationCancelingError: "+(t||""));return r[$R]=!0,r.cancellationCode=e,n&&(r.url=n),r}function r2(t){return i2(t)&&Lp(t.url)}function i2(t){return t&&t[$R]}class M4{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new QD,this.attachRef=null}}let QD=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new M4,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Fb=!1;let s2=(()=>{class t{constructor(n,r,i,s,c){this.parentContexts=n,this.location=r,this.changeDetector=s,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ms,this.deactivateEvents=new Ms,this.attachEvents=new Ms,this.detachEvents=new Ms,this.name=i||Tn,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new gt(4012,Fb);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new gt(4012,Fb);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new gt(4012,Fb);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new gt(4013,Fb);this._activatedRoute=n;const i=this.location,c=n._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,h=new x4(n,d,i.injector);if(r&&function N4(t){return!!t.resolveComponentFactory}(r)){const m=r.resolveComponentFactory(c);this.activated=i.createComponent(m,i.length,h)}else this.activated=i.createComponent(c,{index:i.length,injector:h,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)(Pt(QD),Pt(hu),function Fc(t){return function Eg(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(x(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(kr(),t)}("name"),Pt(YN),Pt(ru))},t.\u0275dir=xt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class x4{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Dy?this.route:e===QD?this.childContexts:this.parent.get(e,n)}}let o2=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=js({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&tc(0,"router-outlet")},dependencies:[s2],encapsulation:2}),t})();function a2(t,e){return t.providers&&!t._injector&&(t._injector=gD(t.providers,e,`Route: ${t.path}`)),t._injector??e}function WR(t){const e=t.children&&t.children.map(WR),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Tn&&(n.component=o2),n}function yu(t){return t.outlet||Tn}function u2(t,e){const n=t.filter(r=>yu(r)===e);return n.push(...t.filter(r=>yu(r)!==e)),n}function c2(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class F4{constructor(e,n,r,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),jR(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=_y(n);e.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,i[c],r),delete i[c]}),xs(i,(s,c)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,n,c.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=_y(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);if(r&&r.outlet){const c=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:d})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=_y(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,n,r){const i=_y(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new E4(s.value.snapshot))}),e.children.length&&this.forwardEvent(new D4(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(jR(i),i===s)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,c.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),jR(d.route.value),this.activateChildRoutes(e,null,c.children)}else{const d=c2(i.snapshot),h=d?.get(va)??null;c.attachRef=null,c.route=i,c.resolver=h,c.injector=d,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class l2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Lb{constructor(e,n){this.component=e,this.route=n}}function L4(t,e,n){const r=t._root;return YD(r,e?e._root:null,n,[r.value])}function Vb(t,e,n){return(c2(e)??n).get(t)}function YD(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=_y(e);return t.children.forEach(c=>{(function B4(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,c=e?e.value:null,d=n?n.getContext(t.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const h=function j4(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Fp(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Fp(t.url,e.url)||!sl(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!UR(t,e)||!sl(t.queryParams,e.queryParams);default:return!UR(t,e)}}(c,s,s.routeConfig.runGuardsAndResolvers);h?i.canActivateChecks.push(new l2(r)):(s.data=c.data,s._resolvedData=c._resolvedData),YD(t,e,s.component?d?d.children:null:n,r,i),h&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new Lb(d.outlet.component,c))}else c&&JD(e,d,i),i.canActivateChecks.push(new l2(r)),YD(t,null,s.component?d?d.children:null:n,r,i)})(c,s[c.value.outlet],n,r.concat([c.value]),i),delete s[c.value.outlet]}),xs(s,(c,d)=>JD(c,n.getContext(d),i)),i}function JD(t,e,n){const r=_y(t),i=t.value;xs(r,(s,c)=>{JD(s,i.component?e?e.children.getContext(c):null:e,n)}),n.canDeactivateChecks.push(new Lb(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function XD(t){return"function"==typeof t}function GR(t){return t instanceof Tb||"EmptyError"===t?.name}const Bb=Symbol("INITIAL_VALUE");function wy(){return il(t=>EV(t.map(e=>e.pipe(HD(1),function PG(...t){const e=Wt(t);return Ht((n,r)=>{(e?bR(t,n,e):bR(t,n)).subscribe(r)})}(Bb)))).pipe(Zt(e=>{for(const n of e)if(!0!==n){if(n===Bb)return Bb;if(!1===n||n instanceof kp)return n}return!0}),Of(e=>e!==Bb),HD(1)))}function d2(t){return function ke(...t){return He(t)}(qs(e=>{if(Lp(e))throw t2(0,e)}),Zt(e=>!0===e))}const zR={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function f2(t,e,n,r,i){const s=qR(t,e,n);return s.matched?function rz(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?qt(i.map(c=>{const d=t.get(c),h=function z4(t){return t&&XD(t.canMatch)}(d)?d.canMatch(e,n):d(e,n);return ld(h)})).pipe(wy(),d2()):qt(!0)}(r=a2(e,r),e,n).pipe(Zt(c=>!0===c?s:{...zR})):qt(s)}function qR(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...zR}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||BG)(n,t,e);if(!i)return{...zR};const s={};xs(i.posParams,(d,h)=>{s[h]=d.path});const c=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function jb(t,e,n,r,i="corrected"){if(n.length>0&&function oz(t,e,n){return n.some(r=>Ub(t,e,r)&&yu(r)!==Tn)}(t,n,r)){const c=new Pn(e,function sz(t,e,n,r){const i={};i[Tn]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&yu(s)!==Tn){const c=new Pn([],{});c._sourceSegment=t,c._segmentIndexShift=e.length,i[yu(s)]=c}return i}(t,e,r,new Pn(n,t.children)));return c._sourceSegment=t,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===n.length&&function az(t,e,n){return n.some(r=>Ub(t,e,r))}(t,n,r)){const c=new Pn(t.segments,function iz(t,e,n,r,i,s){const c={};for(const d of r)if(Ub(t,n,d)&&!i[yu(d)]){const h=new Pn([],{});h._sourceSegment=t,h._segmentIndexShift="legacy"===s?t.segments.length:e.length,c[yu(d)]=h}return{...i,...c}}(t,e,n,r,t.children,i));return c._sourceSegment=t,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:n}}const s=new Pn(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function Ub(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function h2(t,e,n,r){return!!(yu(t)===r||r!==Tn&&Ub(e,n,t))&&("**"===t.path||qR(e,t,n).matched)}function p2(t,e,n){return 0===e.length&&!t.children[n]}const $b=!1;class Hb{constructor(e){this.segmentGroup=e||null}}class g2{constructor(e){this.urlTree=e}}function ew(t){return $D(new Hb(t))}function m2(t){return $D(new g2(t))}class dz{constructor(e,n,r,i,s){this.injector=e,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=jb(this.urlTree.root,[],[],this.config).segmentGroup,n=new Pn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,n,Tn).pipe(Zt(s=>this.createUrlTree(Pb(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ff(s=>{if(s instanceof g2)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Hb?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Tn).pipe(Zt(i=>this.createUrlTree(Pb(i),e.queryParams,e.fragment))).pipe(Ff(i=>{throw i instanceof Hb?this.noMatchError(i):i}))}noMatchError(e){return new gt(4002,$b)}createUrlTree(e,n,r){const i=RR(e);return new kp(i,n,r)}expandSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,n,r).pipe(Zt(s=>new Pn([],s))):this.expandSegment(e,r,n,r.segments,i,!0)}expandChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return wt(i).pipe(Op(s=>{const c=r.children[s],d=u2(n,s);return this.expandSegmentGroup(e,d,c,s).pipe(Zt(h=>({segment:h,outlet:s})))}),SV((s,c)=>(s[c.outlet]=c.segment,s),{}),AV())}expandSegment(e,n,r,i,s,c){return wt(r).pipe(Op(d=>this.expandSegmentAgainstRoute(e,n,r,d,i,s,c).pipe(Ff(m=>{if(m instanceof Hb)return qt(null);throw m}))),kf(d=>!!d),Ff((d,h)=>{if(GR(d))return p2(n,i,s)?qt(new Pn([],{})):ew(n);throw d}))}expandSegmentAgainstRoute(e,n,r,i,s,c,d){return h2(i,n,s,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,n,i,s,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,c):ew(n):ew(n)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?m2(s):this.lineralizeSegments(r,s).pipe(pt(c=>{const d=new Pn(c,{});return this.expandSegment(e,d,n,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,c){const{matched:d,consumedSegments:h,remainingSegments:m,positionalParamSegments:_}=qR(n,i,s);if(!d)return ew(n);const I=this.applyRedirectCommands(h,i.redirectTo,_);return i.redirectTo.startsWith("/")?m2(I):this.lineralizeSegments(i,I).pipe(pt(A=>this.expandSegment(e,n,r,A.concat(m),c,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){return"**"===r.path?(e=a2(r,e),r.loadChildren?(r._loadedRoutes?qt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(Zt(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new Pn(i,{})))):qt(new Pn(i,{}))):f2(n,r,i,e).pipe(il(({matched:c,consumedSegments:d,remainingSegments:h})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe(pt(_=>{const I=_.injector??e,A=_.routes,{segmentGroup:R,slicedSegments:F}=jb(n,d,h,A),Y=new Pn(R.segments,R.children);if(0===F.length&&Y.hasChildren())return this.expandChildren(I,A,Y).pipe(Zt(fe=>new Pn(d,fe)));if(0===A.length&&0===F.length)return qt(new Pn(d,{}));const ne=yu(r)===s;return this.expandSegment(I,Y,A,F,ne?Tn:s,!0).pipe(Zt(je=>new Pn(d.concat(je.segments),je.children)))})):ew(n)))}getChildConfig(e,n,r){return n.children?qt({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?qt({routes:n._loadedRoutes,injector:n._loadedInjector}):function nz(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?qt(!0):qt(i.map(c=>{const d=t.get(c),h=function $4(t){return t&&XD(t.canLoad)}(d)?d.canLoad(e,n):d(e,n);return ld(h)})).pipe(wy(),d2())}(e,n,r).pipe(pt(i=>i?this.configLoader.loadChildren(e,n).pipe(qs(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function cz(t){return $D(n2($b,3))}())):qt({routes:[],injector:e})}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return qt(r);if(i.numberOfChildren>1||!i.children[Tn])return $D(new gt(4e3,$b));i=i.children[Tn]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new kp(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return xs(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[s]=n[d]}else r[s]=i}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let c={};return xs(n.children,(d,h)=>{c[h]=this.createSegmentGroup(e,d,r,i)}),new Pn(s,c)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new gt(4001,$b);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}class hz{}class mz{constructor(e,n,r,i,s,c,d,h){this.injector=e,this.rootComponentType=n,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=d,this.urlSerializer=h}recognize(){const e=jb(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Tn).pipe(Zt(n=>{if(null===n)return null;const r=new kb([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Tn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new fd(r,n),s=new XV(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const n=e.value,r=JV(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i)}processChildren(e,n,r){return wt(Object.keys(r.children)).pipe(Op(i=>{const s=r.children[i],c=u2(n,i);return this.processSegmentGroup(e,c,s,i)}),SV((i,s)=>i&&s?(i.push(...s),i):null),function FG(t,e=!1){return Ht((n,r)=>{let i=0;n.subscribe(Rt(r,s=>{const c=t(s,i++);(c||e)&&r.next(s),!c&&r.complete()}))})}(i=>null!==i),Sb(null),AV(),Zt(i=>{if(null===i)return null;const s=y2(i);return function yz(t){t.sort((e,n)=>e.value.outlet===Tn?-1:n.value.outlet===Tn?1:e.value.outlet.localeCompare(n.value.outlet))}(s),s}))}processSegment(e,n,r,i,s){return wt(n).pipe(Op(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,s)),kf(c=>!!c),Ff(c=>{if(GR(c))return p2(r,i,s)?qt([]):qt(null);throw c}))}processSegmentAgainstRoute(e,n,r,i,s){if(n.redirectTo||!h2(n,r,i,s))return qt(null);let c;if("**"===n.path){const d=i.length>0?NV(i).parameters:{},h=_2(r)+i.length;c=qt({snapshot:new kb(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,w2(n),yu(n),n.component??n._loadedComponent??null,n,v2(r),h,E2(n),h),consumedSegments:[],remainingSegments:[]})}else c=f2(r,n,i,e).pipe(Zt(({matched:d,consumedSegments:h,remainingSegments:m,parameters:_})=>{if(!d)return null;const I=_2(r)+h.length;return{snapshot:new kb(h,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,w2(n),yu(n),n.component??n._loadedComponent??null,n,v2(r),I,E2(n),I),consumedSegments:h,remainingSegments:m}}));return c.pipe(il(d=>{if(null===d)return qt(null);const{snapshot:h,consumedSegments:m,remainingSegments:_}=d;e=n._injector??e;const I=n._loadedInjector??e,A=function vz(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(n),{segmentGroup:R,slicedSegments:F}=jb(r,m,_,A.filter(ne=>void 0===ne.redirectTo),this.relativeLinkResolution);if(0===F.length&&R.hasChildren())return this.processChildren(I,A,R).pipe(Zt(ne=>null===ne?null:[new fd(h,ne)]));if(0===A.length&&0===F.length)return qt([new fd(h,[])]);const Y=yu(n)===s;return this.processSegment(I,A,R,F,Y?Tn:s).pipe(Zt(ne=>null===ne?null:[new fd(h,ne)]))}))}}function _z(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function y2(t){const e=[],n=new Set;for(const r of t){if(!_z(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=y2(r.children);e.push(new fd(r.value,i))}return e.filter(r=>!n.has(r))}function v2(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function _2(t){let e=t,n=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift??0;return n-1}function w2(t){return t.data||{}}function E2(t){return t.resolve||{}}const KR=Symbol("RouteTitle");function I2(t){return"string"==typeof t.title||null===t.title}function ZR(t){return il(e=>{const n=t(e);return n?wt(n).pipe(Zt(()=>e)):qt(e)})}let C2=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Tn);return r}getResolvedTitleForRoute(n){return n.data[KR]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Gt({token:t,factory:function(){return Br(b2)},providedIn:"root"}),t})(),b2=(()=>{class t extends C2{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return t.\u0275fac=function(n){return new(n||t)(Bt(_V))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Sz{}class Mz extends class Az{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}{}const QR=new nn("",{providedIn:"root",factory:()=>({})}),YR=new nn("ROUTES");let JR=(()=>{class t{constructor(n,r){this.injector=n,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return qt(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=ld(n.loadComponent()).pipe(qs(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),AR(()=>{this.componentLoaders.delete(n)})),i=new bV(r,()=>new hn).pipe(TR());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return qt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Zt(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let h,m,_=!1;Array.isArray(d)?m=d:(h=d.create(n).injector,m=xV(h.get(YR,[],vt.Self|vt.Optional)));return{routes:m.map(WR),injector:h}}),AR(()=>{this.childrenLoaders.delete(r)})),c=new bV(s,()=>new hn).pipe(TR());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(n){return ld(n()).pipe(pt(r=>r instanceof CC||Array.isArray(r)?qt(r):wt(this.compiler.compileModuleAsync(r))))}}return t.\u0275fac=function(n){return new(n||t)(Bt(Vo),Bt(ib))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Nz{}class Rz{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}function Pz(t){throw t}function Oz(t,e,n){return e.parse("/")}const kz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function S2(){const t=Br(LV),e=Br(QD),n=Br(iR),r=Br(Vo),i=Br(ib),s=Br(YR,{optional:!0})??[],c=Br(QR,{optional:!0})??{},d=Br(b2),h=Br(C2,{optional:!0}),m=Br(Nz,{optional:!0}),_=Br(Sz,{optional:!0}),I=new yo(null,t,e,n,r,i,xV(s));return m&&(I.urlHandlingStrategy=m),_&&(I.routeReuseStrategy=_),I.titleStrategy=h??d,function Lz(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(e.canceledNavigationResolution=t.canceledNavigationResolution)}(c,I),I}let yo=(()=>{class t{constructor(n,r,i,s,c,d,h){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=h,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new hn,this.errorHandler=Pz,this.malformedUriErrorHandler=Oz,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>qt(void 0),this.urlHandlingStrategy=new Rz,this.routeReuseStrategy=new Mz,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(JR),this.configLoader.onLoadEndListener=A=>this.triggerEvent(new v4(A)),this.configLoader.onLoadStartListener=A=>this.triggerEvent(new y4(A)),this.ngModule=c.get(Ca),this.console=c.get(lL);const I=c.get(u);this.isNgZoneEnabled=I instanceof u&&u.isInAngularZone(),this.resetConfig(h),this.currentUrlTree=function UG(){return new kp(new Pn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=YV(this.currentUrlTree,this.rootComponentType),this.transitions=new uc({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(Of(i=>0!==i.id),Zt(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),il(i=>{let s=!1,c=!1;return qt(i).pipe(qs(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),il(d=>{const h=this.browserUrlTree.toString(),m=!this.navigated||d.extractedUrl.toString()!==h||h!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||m)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return A2(d.source)&&(this.browserUrlTree=d.extractedUrl),qt(d).pipe(il(I=>{const A=this.transitions.getValue();return r.next(new FR(I.id,this.serializeUrl(I.extractedUrl),I.source,I.restoredState)),A!==this.transitions.getValue()?Gn:Promise.resolve(I)}),function fz(t,e,n,r){return il(i=>function lz(t,e,n,r,i){return new dz(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(Zt(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),qs(I=>{this.currentNavigation={...this.currentNavigation,finalUrl:I.urlAfterRedirects},i.urlAfterRedirects=I.urlAfterRedirects}),function wz(t,e,n,r,i,s){return pt(c=>function gz(t,e,n,r,i,s,c="emptyOnly",d="legacy"){return new mz(t,e,n,r,i,c,d,s).recognize().pipe(il(h=>null===h?function pz(t){return new Ne(e=>e.error(t))}(new hz):qt(h)))}(t,e,n,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,s).pipe(Zt(d=>({...c,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),qs(I=>{if(i.targetSnapshot=I.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!I.extras.skipLocationChange){const R=this.urlHandlingStrategy.merge(I.urlAfterRedirects,I.rawUrl);this.setBrowserUrl(R,I)}this.browserUrlTree=I.urlAfterRedirects}const A=new f4(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(I.urlAfterRedirects),I.targetSnapshot);r.next(A)}));if(m&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:A,extractedUrl:R,source:F,restoredState:Y,extras:ne}=d,_e=new FR(A,this.serializeUrl(R),F,Y);r.next(_e);const je=YV(R,this.rootComponentType).snapshot;return qt(i={...d,targetSnapshot:je,urlAfterRedirects:R,extras:{...ne,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),Gn}),qs(d=>{const h=new h4(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(h)}),Zt(d=>i={...d,guards:L4(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function K4(t,e){return pt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:c}}=n;return 0===c.length&&0===s.length?qt({...n,guardsResult:!0}):function Z4(t,e,n,r){return wt(t).pipe(pt(i=>function tz(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?qt(s.map(d=>{const h=Vb(d,e,i);return ld(function G4(t){return t&&XD(t.canDeactivate)}(h)?h.canDeactivate(t,e,n,r):h(t,e,n,r)).pipe(kf())})).pipe(wy()):qt(!0)}(i.component,i.route,n,e,r)),kf(i=>!0!==i,!0))}(c,r,i,t).pipe(pt(d=>d&&function U4(t){return"boolean"==typeof t}(d)?function Q4(t,e,n,r){return wt(e).pipe(Op(i=>bR(function J4(t,e){return null!==t&&e&&e(new _4(t)),qt(!0)}(i.route.parent,r),function Y4(t,e){return null!==t&&e&&e(new w4(t)),qt(!0)}(i.route,r),function ez(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(c=>function V4(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(c)).filter(c=>null!==c).map(c=>CV(()=>qt(c.guards.map(h=>{const m=Vb(h,c.node,n);return ld(function W4(t){return t&&XD(t.canActivateChild)}(m)?m.canActivateChild(r,t):m(r,t)).pipe(kf())})).pipe(wy())));return qt(s).pipe(wy())}(t,i.path,n),function X4(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return qt(!0);const i=r.map(s=>CV(()=>{const c=Vb(s,e,n);return ld(function H4(t){return t&&XD(t.canActivate)}(c)?c.canActivate(e,t):c(e,t)).pipe(kf())}));return qt(i).pipe(wy())}(t,i.route,n))),kf(i=>!0!==i,!0))}(r,s,t,e):qt(d)),Zt(d=>({...n,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),qs(d=>{if(i.guardsResult=d.guardsResult,Lp(d.guardsResult))throw t2(0,d.guardsResult);const h=new p4(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(h)}),Of(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),ZR(d=>{if(d.guards.canActivateChecks.length)return qt(d).pipe(qs(h=>{const m=new g4(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),il(h=>{let m=!1;return qt(h).pipe(function Ez(t,e){return pt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return qt(n);let s=0;return wt(i).pipe(Op(c=>function Iz(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!I2(i)&&(s[KR]=i.title),function Cz(t,e,n,r){const i=function bz(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return qt({});const s={};return wt(i).pipe(pt(c=>function Tz(t,e,n,r){const i=Vb(t,e,r);return ld(i.resolve?i.resolve(e,n):i(e,n))}(t[c],e,n,r).pipe(kf(),qs(d=>{s[c]=d}))),SR(1),function LG(t){return Zt(()=>t)}(s),Ff(c=>GR(c)?Gn:$D(c)))}(s,t,e,r).pipe(Zt(c=>(t._resolvedData=c,t.data=JV(t,n).resolve,i&&I2(i)&&(t.data[KR]=i.title),null)))}(c.route,r,t,e)),qs(()=>s++),SR(1),pt(c=>s===i.length?qt(n):Gn))})}(this.paramsInheritanceStrategy,this.ngModule.injector),qs({next:()=>m=!0,complete:()=>{m||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),qs(h=>{const m=new m4(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}))}),ZR(d=>{const h=m=>{const _=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(m.routeConfig).pipe(qs(I=>{m.component=I}),Zt(()=>{})));for(const I of m.children)_.push(...h(I));return _};return EV(h(d.targetSnapshot.root)).pipe(Sb(),HD(1))}),ZR(()=>this.afterPreactivation()),Zt(d=>{const h=function T4(t,e,n){const r=ZD(t,e._root,n?n._root:void 0);return new QV(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:h}}),qs(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((t,e,n)=>Zt(r=>(new F4(e,r.targetRouterState,r.currentRouterState,n).activate(t),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),qs({next(){s=!0},complete(){s=!0}}),AR(()=>{s||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ff(d=>{if(c=!0,i2(d)){r2(d)||(this.navigated=!0,this.restoreHistory(i,!0));const h=new Ob(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(h),r2(d)){const m=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),_={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||A2(i.source)};this.scheduleNavigation(m,"imperative",null,_,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const h=new qV(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(h);try{i.resolve(this.errorHandler(d))}catch(m){i.reject(m)}}return Gn}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next({...this.transitions.value,...n})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=n.state?.navigationId?n.state:null;if(s){const d={...s};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const c=this.parseUrl(n.url);this.scheduleNavigation(c,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){this.config=n.map(WR),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:c,queryParamsHandling:d,preserveFragment:h}=r,m=i||this.routerState.root,_=h?this.currentUrlTree.fragment:c;let I=null;switch(d){case"merge":I={...this.currentUrlTree.queryParams,...s};break;case"preserve":I=this.currentUrlTree.queryParams;break;default:I=s||null}return null!==I&&(I=this.removeEmptyProps(I)),o4(m,this.currentUrlTree,n,I,_??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Lp(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function Vz(t){for(let e=0;e<t.length;e++){if(null==t[e])throw new gt(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...kz}:!1===r?{...Fz}:r,Lp(n))return PV(this.currentUrlTree,n,i);const s=this.parseUrl(n);return PV(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new Vp(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,s,c){if(this.disposed)return Promise.resolve(!1);let d,h,m;c?(d=c.resolve,h=c.reject,m=c.promise):m=new Promise((A,R)=>{d=A,h=R});const _=++this.navigationId;let I;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),I=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):I=0,this.setTransition({id:_,targetPageId:I,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:s,resolve:d,reject:h,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(A=>Promise.reject(A))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r,i){const s=new Ob(n.id,this.serializeUrl(n.extractedUrl),r,i);this.triggerEvent(s),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){lf()},t.\u0275prov=Gt({token:t,factory:function(){return S2()},providedIn:"root"}),t})();function A2(t){return"imperative"!==t}class M2{}let x2=(()=>{class t{constructor(n,r,i,s,c){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Of(n=>n instanceof Vp),Op(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=gD(s.providers,n,`Route: ${s.path}`));const c=s._injector??n,d=s._loadedInjector??c;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(c,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(d,s.children??s._loadedRoutes))}return wt(i).pipe(tn())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):qt(null);const s=i.pipe(pt(c=>null===c?qt(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??n,c.routes))));return r.loadComponent&&!r._loadedComponent?wt([s,this.loader.loadComponent(r)]).pipe(tn()):s})}}return t.\u0275fac=function(n){return new(n||t)(Bt(yo),Bt(ib),Bt(ru),Bt(M2),Bt(JR))},t.\u0275prov=Gt({token:t,factory:t.\u0275fac}),t})();const N2=new nn("");let Uz=(()=>{class t{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof FR?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Vp&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof KV&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new KV(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(n){lf()},t.\u0275prov=Gt({token:t,factory:t.\u0275fac}),t})();const R2=new nn("ROUTER_FORROOT_GUARD"),P2=new nn(""),$z=[iR,{provide:LV,useClass:xR},{provide:yo,useFactory:S2},QD,{provide:Dy,useFactory:function Hz(t){return t.routerState.root},deps:[yo]},JR];function Wz(){return new dy("Router",yo)}let O2=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[$z,[],k2(n),{provide:R2,useFactory:Kz,deps:[[yo,new Oh,new zd]]},{provide:QR,useValue:r||{}},r?.useHash?{provide:Pp,useClass:m8}:{provide:Pp,useClass:VL},{provide:N2,useFactory:()=>{const t=Br(yo),e=Br(LW),n=Br(QR);return n.scrollOffset&&e.setOffset(n.scrollOffset),new Uz(t,e,n)}},r?.preloadingStrategy?t6(r.preloadingStrategy):[],{provide:dy,multi:!0,useFactory:Wz},r?.initialNavigation?Qz(r):[],[{provide:F2,useFactory:Zz},{provide:ly,multi:!0,useExisting:F2}]]}}static forChild(n){return{ngModule:t,providers:[k2(n)]}}}return t.\u0275fac=function(n){return new(n||t)(Bt(R2,8))},t.\u0275mod=vs({type:t}),t.\u0275inj=Rr({}),t})();function Kz(t){return"guarded"}function k2(t){return[{provide:YR,multi:!0,useValue:t}]}function Zz(){const t=Br(Vo);return e=>{const n=t.get(ab);if(e!==n.components[0])return;const r=t.get(yo),i=t.get(L2);1===t.get(t1)&&r.initialNavigation(),t.get(P2,null,vt.Optional)?.setUpPreloading(),t.get(N2,null,vt.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.next(),i.complete()}}const F2=new nn("");function Qz(t){return["disabled"===t.initialNavigation?[{provide:Ap,multi:!0,useFactory:()=>{const t=Br(yo);return()=>{t.setUpLocationChangeListener()}}},{provide:t1,useValue:2}]:[],"enabledBlocking"===t.initialNavigation?[{provide:t1,useValue:0},{provide:Ap,multi:!0,deps:[Vo],useFactory:t=>{const e=t.get(p8,Promise.resolve(null));let n=!1;return()=>e.then(()=>new Promise(i=>{const s=t.get(yo),c=t.get(L2);(function r(i){t.get(yo).events.pipe(Of(c=>c instanceof Vp||c instanceof Ob||c instanceof qV),Zt(c=>c instanceof Vp||c instanceof Ob&&(0===c.code||1===c.code)&&null),Of(c=>null!==c),HD(1)).subscribe(()=>{i()})})(()=>{i(!0),n=!0}),s.afterPreactivation=()=>(i(!0),n||c.closed?qt(void 0):c),s.initialNavigation()}))}}]:[]]}const L2=new nn("",{factory:()=>new hn}),t1=new nn("",{providedIn:"root",factory:()=>1});function t6(t){return[x2,{provide:P2,useExisting:x2},{provide:M2,useExisting:t}]}const n6=[];let r6=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=vs({type:t}),t.\u0275inj=Rr({imports:[O2.forRoot(n6),O2]}),t})();var cc=V(2462),Q=V(250),i6=V(7020),n1=V(7979),Vf=V(6397),r1=V(8174);function Ey(...t){const e=(0,r1.yG)(t);return(0,Vf.D)(t,e)}var ur=V(7005),s6=V(2435);function V2(...t){return function o6(){return(0,s6.J)(1)}()((0,Vf.D)(t,(0,r1.yG)(t)))}var hd=V(2820);function i1(...t){const e=(0,r1.yG)(t);return(0,hd.e)((n,r)=>{(e?V2(t,n,e):V2(t,n)).subscribe(r)})}var pd=V(6350);function s1(){return(0,hd.e)((t,e)=>{let n,r=!1;t.subscribe((0,pd.x)(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}var ba=V(2480);function a6(t,e,n,r,i){return(s,c)=>{let d=n,h=e,m=0;s.subscribe((0,pd.x)(c,_=>{const I=m++;h=d?t(h,_,I):(d=!0,_),r&&c.next(h)},i&&(()=>{d&&c.next(h),c.complete()})))}}function o1(t,e){return(0,hd.e)(a6(t,e,arguments.length>=2,!0))}var B2=V(5637);function c6(t,e){return t===e}function zb(t,e){return(0,hd.e)((n,r)=>{let i=0;n.subscribe((0,pd.x)(r,s=>t.call(e,s,i++)&&r.next(s)))})}function tB(t){return"server"===t}V(4824);var Dt,Pq=V(8201),Te=V(5861),md=V(4567),rT=V(9903),Bf=V(9794),On=V(9835),Oq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yd={},D1=D1||{},an=Oq||self;function iT(){}function w1(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function rw(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var E1="closure_uid_"+(1e9*Math.random()>>>0),Fq=0;function Lq(t,e,n){return t.call.apply(t.bind,arguments)}function Vq(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ns(t,e,n){return(Ns=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Lq:Vq).apply(null,arguments)}function sT(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Rs(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(r,i,s){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return e.prototype[i].apply(r,c)}}function jf(){this.s=this.s,this.o=this.o}var jq={};jf.prototype.s=!1,jf.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function kq(t){return Object.prototype.hasOwnProperty.call(t,E1)&&t[E1]||(t[E1]=++Fq)}(this);delete jq[t]}},jf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rB=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},iB=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){const r=t.length,i="string"==typeof t?t.split(""):t;for(let s=0;s<r;s++)s in i&&e.call(n,i[s],s,t)};function sB(t){return Array.prototype.concat.apply([],arguments)}function I1(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function oT(t){return/^[\s\xa0]*$/.test(t)}var _o,oB=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function vo(t,e){return-1!=t.indexOf(e)}function C1(t,e){return t<e?-1:t>e?1:0}e:{var aB=an.navigator;if(aB){var uB=aB.userAgent;if(uB){_o=uB;break e}}_o=""}function b1(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function cB(t){const e={};for(const n in t)e[n]=t[n];return e}var lB="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dB(t,e){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)t[n]=r[n];for(let s=0;s<lB.length;s++)n=lB[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function T1(t){return T1[" "](t),t}T1[" "]=iT;var aT,t,Hq=vo(_o,"Opera"),Iy=vo(_o,"Trident")||vo(_o,"MSIE"),fB=vo(_o,"Edge"),S1=fB||Iy,hB=vo(_o,"Gecko")&&!(vo(_o.toLowerCase(),"webkit")&&!vo(_o,"Edge"))&&!(vo(_o,"Trident")||vo(_o,"MSIE"))&&!vo(_o,"Edge"),Wq=vo(_o.toLowerCase(),"webkit")&&!vo(_o,"Edge");function pB(){var t=an.document;return t?t.documentMode:void 0}e:{var A1="",M1=(t=_o,hB?/rv:([^\);]+)(\)|;)/.exec(t):fB?/Edge\/([\d\.]+)/.exec(t):Iy?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Wq?/WebKit\/(\S+)/.exec(t):Hq?/(?:Version)[ \/]?(\S+)/.exec(t):void 0);if(M1&&(A1=M1?M1[1]:""),Iy){var x1=pB();if(null!=x1&&x1>parseFloat(A1)){aT=String(x1);break e}}aT=A1}var Gq={};var qq=an.document&&Iy&&(pB()||parseInt(aT,10))||void 0,Kq=function(){if(!an.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{an.addEventListener("test",iT,e),an.removeEventListener("test",iT,e)}catch{}return t}();function Ks(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function iw(t,e){if(Ks.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(hB){e:{try{T1(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Zq[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&iw.Z.h.call(this)}}Ks.prototype.h=function(){this.defaultPrevented=!0},Rs(iw,Ks);var Zq={2:"touch",3:"pen",4:"mouse"};iw.prototype.h=function(){iw.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var sw="closure_listenable_"+(1e6*Math.random()|0),Qq=0;function Yq(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Qq,this.ca=this.fa=!1}function uT(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function cT(t){this.src=t,this.g={},this.h=0}function R1(t,e){var n=e.type;if(n in t.g){var s,r=t.g[n],i=rB(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(uT(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function P1(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ca&&s.listener==e&&s.capture==!!n&&s.ia==r)return i}return-1}cT.prototype.add=function(t,e,n,r,i){var s=t.toString();(t=this.g[s])||(t=this.g[s]=[],this.h++);var c=P1(t,e,r,i);return-1<c?(e=t[c],n||(e.fa=!1)):((e=new Yq(e,this.src,s,!!r,i)).fa=n,t.push(e)),e};var O1="closure_lm_"+(1e6*Math.random()|0),k1={};function mB(t,e,n,r,i){if(r&&r.once)return vB(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)mB(t,e[s],n,r,i);return null}return n=B1(n),t&&t[sw]?t.N(e,n,rw(r)?!!r.capture:!!r,i):yB(t,e,n,!1,r,i)}function yB(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var c=rw(i)?!!i.capture:!!i,d=L1(t);if(d||(t[O1]=d=new cT(t)),(n=d.add(e,n,r,c,s)).proxy)return n;if(r=function Jq(){var e=Xq;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Kq||(i=c),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(DB(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function vB(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)vB(t,e[s],n,r,i);return null}return n=B1(n),t&&t[sw]?t.O(e,n,rw(r)?!!r.capture:!!r,i):yB(t,e,n,!0,r,i)}function _B(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)_B(t,e[s],n,r,i);else r=rw(r)?!!r.capture:!!r,n=B1(n),t&&t[sw]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=P1(s=t.g[e],n,r,i))&&(uT(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--))):t&&(t=L1(t))&&(e=t.g[e.toString()],t=-1,e&&(t=P1(e,n,r,i)),(n=-1<t?e[t]:null)&&F1(n))}function F1(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[sw])R1(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(DB(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=L1(e))?(R1(n,t),0==n.h&&(n.src=null,e[O1]=null)):uT(t)}}}function DB(t){return t in k1?k1[t]:k1[t]="on"+t}function Xq(t,e){if(t.ca)t=!0;else{e=new iw(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&F1(t),t=n.call(r,e)}return t}function L1(t){return(t=t[O1])instanceof cT?t:null}var V1="__closure_events_fn_"+(1e9*Math.random()>>>0);function B1(t){return"function"==typeof t?t:(t[V1]||(t[V1]=function(e){return t.handleEvent(e)}),t[V1])}function as(){jf.call(this),this.i=new cT(this),this.P=this,this.I=null}function Ps(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Ks(e,t);else if(e instanceof Ks)e.target=e.target||t;else{var i=e;dB(e=new Ks(r,t),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var c=e.g=n[s];i=lT(c,r,!0,e)&&i}if(i=lT(c=e.g=t,r,!0,e)&&i,i=lT(c,r,!1,e)&&i,n)for(s=0;s<n.length;s++)i=lT(c=e.g=n[s],r,!1,e)&&i}function lT(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var c=e[s];if(c&&!c.ca&&c.capture==n){var d=c.listener,h=c.ia||c.src;c.fa&&R1(t.i,c),i=!1!==d.call(h,r)&&i}}return i&&!r.defaultPrevented}Rs(as,jf),as.prototype[sw]=!0,as.prototype.removeEventListener=function(t,e,n,r){_B(this,t,e,n,r)},as.prototype.M=function(){if(as.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)uT(n[r]);delete t.g[e],t.h--}}this.I=null},as.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},as.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var j1=an.JSON.stringify;function e5(){var t=EB;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var $1,wB=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new n5,t=>t.reset());class n5{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function r5(t){an.setTimeout(()=>{throw t},0)}function U1(t,e){$1||function i5(){var t=an.Promise.resolve(void 0);$1=function(){t.then(s5)}}(),H1||($1(),H1=!0),EB.add(t,e)}var H1=!1,EB=new class t5{constructor(){this.h=this.g=null}add(e,n){const r=wB.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}};function s5(){for(var t;t=e5();){try{t.h.call(t.g)}catch(n){r5(n)}var e=wB;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}H1=!1}function dT(t,e){as.call(this),this.h=t||1,this.g=e||an,this.j=Ns(this.kb,this),this.l=Date.now()}function W1(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function G1(t,e,n){if("function"==typeof t)n&&(t=Ns(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ns(t.handleEvent,t)}return 2147483647<Number(e)?-1:an.setTimeout(t,e||0)}function IB(t){t.g=G1(()=>{t.g=null,t.i&&(t.i=!1,IB(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}Rs(dT,as),(Dt=dT.prototype).da=!1,Dt.S=null,Dt.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ps(this,"tick"),this.da&&(W1(this),this.start()))}},Dt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Dt.M=function(){dT.Z.M.call(this),W1(this),delete this.g};class o5 extends jf{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:IB(this)}M(){super.M(),this.g&&(an.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ow(t){jf.call(this),this.h=t,this.g={}}Rs(ow,jf);var CB=[];function bB(t,e,n,r){Array.isArray(n)||(n&&(CB[0]=n.toString()),n=CB);for(var i=0;i<n.length;i++){var s=mB(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function TB(t){b1(t.g,function(e,n){this.g.hasOwnProperty(n)&&F1(e)},t),t.g={}}function fT(){this.g=!0}function Cy(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function l5(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<i.length;c++)i[c]=""}}}return j1(n)}catch{return e}}(t,n)+(r?" "+r:"")})}ow.prototype.M=function(){ow.Z.M.call(this),TB(this)},ow.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fT.prototype.Aa=function(){this.g=!1},fT.prototype.info=function(){};var Bp={},SB=null;function hT(){return SB=SB||new as}function AB(t){Ks.call(this,Bp.Ma,t)}function aw(t){const e=hT();Ps(e,new AB(e,t))}function MB(t,e){Ks.call(this,Bp.STAT_EVENT,t),this.stat=e}function Do(t){const e=hT();Ps(e,new MB(e,t))}function xB(t,e){Ks.call(this,Bp.Na,t),this.size=e}function uw(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return an.setTimeout(function(){t()},e)}Bp.Ma="serverreachability",Rs(AB,Ks),Bp.STAT_EVENT="statevent",Rs(MB,Ks),Bp.Na="timingevent",Rs(xB,Ks);var pT={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},NB={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function z1(){}function PB(){}z1.prototype.h=null;var Z1,cw={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function q1(){Ks.call(this,"d")}function K1(){Ks.call(this,"c")}function gT(){}function lw(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new ow(this),this.P=d5,this.W=new dT(t=S1?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new OB}function OB(){this.i=null,this.g="",this.h=!1}Rs(q1,Ks),Rs(K1,Ks),Rs(gT,z1),gT.prototype.g=function(){return new XMLHttpRequest},gT.prototype.i=function(){return{}},Z1=new gT;var d5=45e3,Q1={},mT={};function Y1(t,e,n){t.K=1,t.v=wT(vd(e)),t.s=n,t.U=!0,kB(t,null)}function kB(t,e){t.F=Date.now(),dw(t),t.A=vd(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),WB(n.h,"t",r),t.C=0,n=t.l.H,t.h=new OB,t.g=hj(t.l,n?e:null,!t.s),0<t.O&&(t.L=new o5(Ns(t.Ia,t,t.g),t.O)),bB(t.V,t.g,"readystatechange",t.gb),e=t.H?cB(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),aw(1),function a5(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var c="",d=s.split("&"),h=0;h<d.length;h++){var m=d[h].split("=");if(1<m.length){var _=m[0];m=m[1];var I=_.split("_");c=2<=I.length&&"type"==I[1]?c+(_+"=")+m+"&":c+(_+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+c})}(t.j,t.u,t.A,t.m,t.X,t.s)}function FB(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function LB(t,e,n){let i,r=!0;for(;!t.I&&t.C<n.length;){if(i=f5(t,n),i==mT){4==e&&(t.o=4,Do(14),r=!1),Cy(t.j,t.m,null,"[Incomplete Response]");break}if(i==Q1){t.o=4,Do(15),Cy(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}Cy(t.j,t.m,i,null),J1(t,i)}FB(t)&&i!=mT&&i!=Q1&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Do(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),cP(e),e.L=!0,Do(11))):(Cy(t.j,t.m,n,"[Invalid Chunked Response]"),jp(t),fw(t))}function f5(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?mT:(n=Number(e.substring(n,r)),isNaN(n)?Q1:(r+=1)+n>e.length?mT:(e=e.substr(r,n),t.C=r+n,e))}function dw(t){t.Y=Date.now()+t.P,VB(t,t.P)}function VB(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=uw(Ns(t.eb,t),e)}function yT(t){t.B&&(an.clearTimeout(t.B),t.B=null)}function fw(t){0==t.l.G||t.I||cj(t.l,t)}function jp(t){yT(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,W1(t.W),TB(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function J1(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||tP(n.i,t)))if(n.I=t.N,!t.J&&tP(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break e;ST(n),bT(n)}uP(n),Do(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=uw(Ns(n.ab,n),6e3));if(1>=qB(n.i)&&n.ka){try{n.ka()}catch{}n.ka=void 0}}else Hp(n,11)}else if((t.J||n.g==t)&&ST(n),!oT(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){let m=i[e];if(n.U=m[0],m=m[1],2==n.G)if("c"==m[0]){n.J=m[1],n.la=m[2];const _=m[3];null!=_&&(n.ma=_,n.h.info("VER="+n.ma));const I=m[4];null!=I&&(n.za=I,n.h.info("SVER="+n.za));const A=m[5];null!=A&&"number"==typeof A&&0<A&&(n.K=r=1.5*A,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const R=t.g;if(R){const F=R.g?R.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(F){var s=r.i;!s.g&&(vo(F,"spdy")||vo(F,"quic")||vo(F,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(nP(s,s.h),s.h=null))}if(r.D){const Y=R.g?R.g.getResponseHeader("X-HTTP-Session-Id"):null;Y&&(r.sa=Y,$r(r.F,r.D,Y))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var c=t;if((r=n).oa=fj(r,r.H?r.la:null,r.W),c.J){KB(r.i,c);var d=c,h=r.K;h&&d.setTimeout(h),d.B&&(yT(d),dw(d)),r.g=c}else aj(r);0<n.l.length&&TT(n)}else"stop"!=m[0]&&"close"!=m[0]||Hp(n,7);else 3==n.G&&("stop"==m[0]||"close"==m[0]?"stop"==m[0]?Hp(n,7):oP(n):"noop"!=m[0]&&n.j&&n.j.wa(m),n.A=0)}aw(4)}catch{}}function X1(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(w1(t)||"string"==typeof t)iB(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(w1(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function h5(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(w1(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}}function by(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof by)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function eP(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Up(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Up(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Up(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Dt=lw.prototype).setTimeout=function(t){this.P=t},Dt.gb=function(t){t=t.target;const e=this.L;e&&3==_d(t)?e.l():this.Ia(t)},Dt.Ia=function(t){try{if(t==this.g)e:{const _=_d(this.g);var e=this.g.Da();const I=this.g.ba();if(!(3>_)&&(3!=_||S1||this.g&&(this.h.h||this.g.ga()||nj(this.g)))){this.I||4!=_||7==e||aw(8==e||0>=I?3:2),yT(this);var n=this.g.ba();this.N=n;t:if(FB(this)){var r=nj(this.g);t="";var i=r.length,s=4==_d(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){jp(this),fw(this);var c="";break t}this.h.i=new an.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==n,function u5(t,e,n,r,i,s,c){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.X,_,n),this.i){if(this.$&&!this.J){t:{if(this.g){var d,h=this.g;if((d=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oT(d)){var m=d;break t}}m=null}if(!(n=m)){this.i=!1,this.o=3,Do(12),jp(this),fw(this);break e}Cy(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,J1(this,n)}this.U?(LB(this,_,c),S1&&this.i&&3==_&&(bB(this.V,this.W,"tick",this.fb),this.W.start())):(Cy(this.j,this.m,c,null),J1(this,c)),4==_&&jp(this),this.i&&!this.I&&(4==_?cj(this.l,this):(this.i=!1,dw(this)))}else 400==n&&0<c.indexOf("Unknown SID")?(this.o=3,Do(12)):(this.o=0,Do(13)),jp(this),fw(this)}}}catch{}},Dt.fb=function(){if(this.g){var t=_d(this.g),e=this.g.ga();this.C<e.length&&(yT(this),LB(this,t,e),this.i&&4!=t&&dw(this))}},Dt.cancel=function(){this.I=!0,jp(this)},Dt.eb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(function c5(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(aw(3),Do(17)),jp(this),this.o=2,fw(this)):VB(this,this.Y-t)},(Dt=by.prototype).R=function(){eP(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Dt.T=function(){return eP(this),this.g.concat()},Dt.get=function(t,e){return Up(this.h,t)?this.h[t]:e},Dt.set=function(t,e){Up(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Dt.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);t.call(e,s,i,this)}};var BB=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $p(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof $p){this.g=void 0!==e?e:t.g,vT(this,t.j),this.s=t.s,_T(this,t.i),DT(this,t.m),this.l=t.l,e=t.h;var n=new gw;n.i=e.i,e.g&&(n.g=new by(e.g),n.h=e.h),jB(this,n),this.o=t.o}else t&&(n=String(t).match(BB))?(this.g=!!e,vT(this,n[1]||"",!0),this.s=hw(n[2]||""),_T(this,n[3]||"",!0),DT(this,n[4]),this.l=hw(n[5]||"",!0),jB(this,n[6]||"",!0),this.o=hw(n[7]||"")):(this.g=!!e,this.h=new gw(null,this.g))}function vd(t){return new $p(t)}function vT(t,e,n){t.j=n?hw(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function _T(t,e,n){t.i=n?hw(e,!0):e}function DT(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function jB(t,e,n){e instanceof gw?(t.h=e,function E5(t,e){e&&!t.j&&(Uf(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&($B(this,r),WB(this,i,n))},t)),t.j=e}(t.h,t.g)):(n||(e=pw(e,D5)),t.h=new gw(e,t.g))}function $r(t,e,n){t.h.set(e,n)}function wT(t){return $r(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function hw(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function pw(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,y5),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function y5(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}$p.prototype.toString=function(){var t=[],e=this.j;e&&t.push(pw(e,UB,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(pw(e,UB,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(pw(n,"/"==n.charAt(0)?_5:v5,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",pw(n,w5)),t.join("")};var UB=/[#\/\?@]/g,v5=/[#\?:]/g,_5=/[#\?]/g,D5=/[#\?@]/g,w5=/#/g;function gw(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Uf(t){t.g||(t.g=new by,t.h=0,t.i&&function p5(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function $B(t,e){Uf(t),e=Ty(t,e),Up(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Up((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&eP(t)))}function HB(t,e){return Uf(t),e=Ty(t,e),Up(t.g.h,e)}function WB(t,e,n){$B(t,e),0<n.length&&(t.i=null,t.g.set(Ty(t,e),I1(n)),t.h+=n.length)}function Ty(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function GB(t){this.l=t||C5,t=an.PerformanceNavigationTiming?0<(t=an.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(an.g&&an.g.Ea&&an.g.Ea()&&an.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Dt=gw.prototype).add=function(t,e){Uf(this),this.i=null,t=Ty(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Dt.forEach=function(t,e){Uf(this),this.g.forEach(function(n,r){iB(n,function(i){t.call(e,i,r,this)},this)},this)},Dt.T=function(){Uf(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],s=0;s<i.length;s++)n.push(e[r]);return n},Dt.R=function(t){Uf(this);var e=[];if("string"==typeof t)HB(this,t)&&(e=sB(e,this.g.get(Ty(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=sB(e,t[n])}return e},Dt.set=function(t,e){return Uf(this),this.i=null,HB(this,t=Ty(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Dt.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var c=i;""!==r[s]&&(c+="="+encodeURIComponent(String(r[s]))),t.push(c)}}return this.i=t.join("&")};var C5=10;function zB(t){return!!t.h||!!t.g&&t.g.size>=t.j}function qB(t){return t.h?1:t.g?t.g.size:0}function tP(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function nP(t,e){t.g?t.g.add(e):t.h=e}function KB(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ZB(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return I1(t.i)}function rP(){}function b5(){this.g=new rP}function T5(t,e,n){const r=n||"";try{X1(t,function(i,s){let c=i;rw(i)&&(c=j1(i)),e.push(r+s+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ET(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function mw(t){this.l=t.$b||null,this.j=t.ib||!1}function IT(t,e){as.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=iP,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}GB.prototype.cancel=function(){if(this.i=ZB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}},rP.prototype.stringify=function(t){return an.JSON.stringify(t,void 0)},rP.prototype.parse=function(t){return an.JSON.parse(t,void 0)},Rs(mw,z1),mw.prototype.g=function(){return new IT(this.l,this.j)},mw.prototype.i=function(t){return function(){return t}}({}),Rs(IT,as);var iP=0;function QB(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function yw(t){t.readyState=4,t.l=null,t.j=null,t.A=null,vw(t)}function vw(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Dt=IT.prototype).open=function(t,e){if(this.readyState!=iP)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,vw(this)},Dt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||an).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yw(this)),this.readyState=iP},Dt.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,vw(this)),this.g&&(this.readyState=3,vw(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof an.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;QB(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Dt.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?yw(this):vw(this),3==this.readyState&&QB(this)}},Dt.Ua=function(t){this.g&&(this.response=this.responseText=t,yw(this))},Dt.Ta=function(t){this.g&&(this.response=t,yw(this))},Dt.ha=function(){this.g&&yw(this)},Dt.setRequestHeader=function(t,e){this.v.append(t,e)},Dt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Dt.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(IT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var A5=an.JSON.parse;function xi(t){as.call(this),this.headers=new by,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=YB,this.K=this.L=!1}Rs(xi,as);var YB="",M5=/^https?$/i,x5=["POST","PUT"];function R5(t){return"content-type"==t.toLowerCase()}function JB(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,XB(t),CT(t)}function XB(t){t.D||(t.D=!0,Ps(t,"complete"),Ps(t,"error"))}function ej(t){if(t.h&&typeof D1<"u"&&(!t.C[1]||4!=_d(t)||2!=t.ba()))if(t.v&&4==_d(t))G1(t.Fa,0,t);else if(Ps(t,"readystatechange"),4==_d(t)){t.h=!1;try{const d=t.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=0===d){var i=String(t.H).match(BB)[1]||null;if(!i&&an.self&&an.self.location){var s=an.self.location.protocol;i=s.substr(0,s.length-1)}r=!M5.test(i?i.toLowerCase():"")}n=r}if(n)Ps(t,"complete"),Ps(t,"success");else{t.m=6;try{var c=2<_d(t)?t.g.statusText:""}catch{c=""}t.j=c+" ["+t.ba()+"]",XB(t)}}finally{CT(t)}}}function CT(t,e){if(t.g){tj(t);const n=t.g,r=t.C[0]?iT:null;t.g=null,t.C=null,e||Ps(t,"ready");try{n.onreadystatechange=r}catch{}}}function tj(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(an.clearTimeout(t.A),t.A=null)}function _d(t){return t.g?t.g.readyState:0}function nj(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case YB:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function sP(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function P5(t){let e="";return b1(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):$r(t,e,n))}function _w(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function rj(t){this.za=0,this.l=[],this.h=new fT,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=_w("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=_w("baseRetryDelayMs",5e3,t),this.$a=_w("retryDelaySeedMs",1e4,t),this.Ya=_w("forwardChannelMaxRetries",2,t),this.ra=_w("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new GB(t&&t.concurrentRequestLimit),this.Ca=new b5,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function oP(t){if(ij(t),3==t.G){var e=t.V++,n=vd(t.F);$r(n,"SID",t.J),$r(n,"RID",e),$r(n,"TYPE","terminate"),Dw(t,n),(e=new lw(t,t.h,e,void 0)).K=2,e.v=wT(vd(n)),n=!1,an.navigator&&an.navigator.sendBeacon&&(n=an.navigator.sendBeacon(e.v.toString(),"")),!n&&an.Image&&((new Image).src=e.v,n=!0),n||(e.g=hj(e.l,null),e.g.ea(e.v)),e.F=Date.now(),dw(e)}dj(t)}function bT(t){t.g&&(cP(t),t.g.cancel(),t.g=null)}function ij(t){bT(t),t.u&&(an.clearTimeout(t.u),t.u=null),ST(t),t.i.cancel(),t.m&&("number"==typeof t.m&&an.clearTimeout(t.m),t.m=null)}function aP(t,e){t.l.push(new class{constructor(t,e){this.h=t,this.g=e}}(t.Za++,e)),3==t.G&&TT(t)}function TT(t){zB(t.i)||t.m||(t.m=!0,U1(t.Ha,t),t.C=0)}function sj(t,e){var n;n=e?e.m:t.V++;const r=vd(t.F);$r(r,"SID",t.J),$r(r,"RID",n),$r(r,"AID",t.U),Dw(t,r),t.o&&t.s&&sP(r,t.o,t.s),n=new lw(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=oj(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),nP(t.i,n),Y1(n,r,e)}function Dw(t,e){t.j&&X1({},function(n,r){$r(e,r,n)})}function oj(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Ns(t.j.Oa,t.j,t):null;e:{var i=t.l;let s=-1;for(;;){const c=["count="+n];-1==s?0<n?(s=i[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let d=!0;for(let h=0;h<n;h++){let m=i[h].h;const _=i[h].g;if(m-=s,0>m)s=Math.max(0,i[h].h-100),d=!1;else try{T5(_,c,"req"+m+"_")}catch{r&&r(_)}}if(d){r=c.join("&");break e}}}return t=t.l.splice(0,n),e.D=t,r}function aj(t){t.g||t.u||(t.Y=1,U1(t.Ga,t),t.A=0)}function uP(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=uw(Ns(t.Ga,t),lj(t,t.A)),t.A++,0))}function cP(t){null!=t.B&&(an.clearTimeout(t.B),t.B=null)}function uj(t){t.g=new lw(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=vd(t.oa);$r(e,"RID","rpc"),$r(e,"SID",t.J),$r(e,"CI",t.N?"0":"1"),$r(e,"AID",t.U),Dw(t,e),$r(e,"TYPE","xmlhttp"),t.o&&t.s&&sP(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=wT(vd(e)),n.s=null,n.U=!0,kB(n,t)}function ST(t){null!=t.v&&(an.clearTimeout(t.v),t.v=null)}function cj(t,e){var n=null;if(t.g==e){ST(t),cP(t),t.g=null;var r=2}else{if(!tP(t.i,e))return;n=e.D,KB(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Ps(r=hT(),new xB(r,n,e,i)),TT(t)}else aj(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function O5(t,e){return!(qB(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=uw(Ns(t.Ha,t,e),lj(t,t.C)),t.C++,0)))}(t,e)||2==r&&uP(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Hp(t,5);break;case 4:Hp(t,10);break;case 3:Hp(t,6);break;default:Hp(t,2)}}function lj(t,e){let n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Hp(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Ns(t.jb,t);n||(n=new $p("//www.google.com/images/cleardot.gif"),an.location&&"http"==an.location.protocol||vT(n,"https"),wT(n)),function S5(t,e){const n=new fT;if(an.Image){const r=new Image;r.onload=sT(ET,n,r,"TestLoadImage: loaded",!0,e),r.onerror=sT(ET,n,r,"TestLoadImage: error",!1,e),r.onabort=sT(ET,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=sT(ET,n,r,"TestLoadImage: timeout",!1,e),an.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Do(2);t.G=0,t.j&&t.j.va(e),dj(t),ij(t)}function dj(t){t.G=0,t.I=-1,t.j&&((0!=ZB(t.i).length||0!=t.l.length)&&(t.i.i.length=0,I1(t.l),t.l.length=0),t.j.ua())}function fj(t,e,n){let r=function g5(t){return t instanceof $p?vd(t):new $p(t,void 0)}(n);if(""!=r.i)e&&_T(r,e+"."+r.i),DT(r,r.m);else{const i=an.location;r=function m5(t,e,n,r){var i=new $p(null,void 0);return t&&vT(i,t),e&&_T(i,e),n&&DT(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&b1(t.aa,function(i,s){$r(r,s,i)}),n=t.sa,(e=t.D)&&n&&$r(r,e,n),$r(r,"VER",t.ma),Dw(t,r),r}function hj(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new xi(n&&t.Ba&&!t.qa?new mw({ib:!0}):t.qa)).L=t.H,e}function pj(){}function AT(){if(Iy&&!(10<=Number(qq)))throw Error("Environmental error: no available transport.")}function Ta(t,e){as.call(this),this.g=new rj(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!oT(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!oT(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Sy(this)}function gj(t){q1.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function mj(){K1.call(this),this.status=1}function Sy(t){this.g=t}(Dt=xi.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Z1.g(),this.C=function RB(t){return t.h||(t.h=t.i())}(this.u?this.u:Z1),this.g.onreadystatechange=Ns(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){return void JB(this,s)}t=n||"";const i=new by(this.headers);r&&X1(r,function(s,c){i.set(c,s)}),r=function Uq(t){e:{var e=R5;const n=t.length,r="string"==typeof t?t.split(""):t;for(let i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break e}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=an.FormData&&t instanceof an.FormData,!(0<=rB(x5,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,c){this.g.setRequestHeader(c,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{tj(this),0<this.B&&((this.K=function N5(t){return Iy&&function zq(){return function $q(t){var e=Gq;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}(function(){let t=0;const e=oB(String(aT)).split("."),n=oB("9").split("."),r=Math.max(e.length,n.length);for(let c=0;0==t&&c<r;c++){var i=e[c]||"",s=n[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;t=C1(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||C1(0==i[2].length,0==s[2].length)||C1(i[2],s[2]),i=i[3],s=s[3]}while(0==t)}return 0<=t})}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ns(this.pa,this)):this.A=G1(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){JB(this,s)}},Dt.pa=function(){typeof D1<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ps(this,"timeout"),this.abort(8))},Dt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ps(this,"complete"),Ps(this,"abort"),CT(this))},Dt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),CT(this,!0)),xi.Z.M.call(this)},Dt.Fa=function(){this.s||(this.F||this.v||this.l?ej(this):this.cb())},Dt.cb=function(){ej(this)},Dt.ba=function(){try{return 2<_d(this)?this.g.status:-1}catch{return-1}},Dt.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Dt.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),A5(e)}},Dt.Da=function(){return this.m},Dt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Dt=rj.prototype).ma=8,Dt.G=1,Dt.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch{}},Dt.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;const i=new lw(this,this.h,t,void 0);let s=this.s;if(this.P&&(s?(s=cB(s),dB(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=n;break e}if(4096===e||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=oj(this,i,e),$r(n=vd(this.F),"RID",t),$r(n,"CVER",22),this.D&&$r(n,"X-HTTP-Session-Id",this.D),Dw(this,n),this.o&&s&&sP(n,this.o,s),nP(this.i,i),this.Ra&&$r(n,"TYPE","init"),this.ja?($r(n,"$req",e),$r(n,"SID","null"),i.$=!0,Y1(i,n,null)):Y1(i,n,e),this.G=2}}else 3==this.G&&(t?sj(this,t):0==this.l.length||zB(this.i)||sj(this))},Dt.Ga=function(){if(this.u=null,uj(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=uw(Ns(this.bb,this),t)}},Dt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Do(10),bT(this),uj(this))},Dt.ab=function(){null!=this.v&&(this.v=null,bT(this),uP(this),Do(19))},Dt.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Do(2)):(this.h.info("Failed to ping google.com"),Do(1))},(Dt=pj.prototype).xa=function(){},Dt.wa=function(){},Dt.va=function(){},Dt.ua=function(){},Dt.Oa=function(){},AT.prototype.g=function(t,e){return new Ta(t,e)},Rs(Ta,as),Ta.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),U1(Ns(t.hb,t,e))),Do(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=fj(t,null,t.W),TT(t)},Ta.prototype.close=function(){oP(this.g)},Ta.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,aP(this.g,e)}else this.v?((e={}).__data__=j1(t),aP(this.g,e)):aP(this.g,t)},Ta.prototype.M=function(){this.g.j=null,delete this.j,oP(this.g),delete this.g,Ta.Z.M.call(this)},Rs(gj,q1),Rs(mj,K1),Rs(Sy,pj),Sy.prototype.xa=function(){Ps(this.g,"a")},Sy.prototype.wa=function(t){Ps(this.g,new gj(t))},Sy.prototype.va=function(t){Ps(this.g,new mj(t))},Sy.prototype.ua=function(){Ps(this.g,"b")},AT.prototype.createWebChannel=AT.prototype.g,Ta.prototype.send=Ta.prototype.u,Ta.prototype.open=Ta.prototype.m,Ta.prototype.close=Ta.prototype.close,pT.NO_ERROR=0,pT.TIMEOUT=8,pT.HTTP_ERROR=6,NB.COMPLETE="complete",PB.EventType=cw,cw.OPEN="a",cw.CLOSE="b",cw.ERROR="c",cw.MESSAGE="d",as.prototype.listen=as.prototype.N,xi.prototype.listenOnce=xi.prototype.O,xi.prototype.getLastError=xi.prototype.La,xi.prototype.getLastErrorCode=xi.prototype.Da,xi.prototype.getStatus=xi.prototype.ba,xi.prototype.getResponseJson=xi.prototype.Qa,xi.prototype.getResponseText=xi.prototype.ga,xi.prototype.send=xi.prototype.ea;var k5=yd.createWebChannelTransport=function(){return new AT},F5=yd.getStatEventTarget=function(){return hT()},lP=yd.ErrorCode=pT,L5=yd.EventType=NB,V5=yd.Event=Bp,yj=yd.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},B5=yd.FetchXmlHttpFactory=mw,MT=yd.WebChannel=PB,j5=yd.XhrIo=xi;const vj="@firebase/firestore";class us{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}us.UNAUTHENTICATED=new us(null),us.GOOGLE_CREDENTIALS=new us("google-credentials-uid"),us.FIRST_PARTY=new us("first-party-uid"),us.MOCK_USER=new us("mock-user");let Ay="9.9.2";const $f=new Bf.Yd("@firebase/firestore");function dP(){return $f.logLevel}function qe(t,...e){if($f.logLevel<=Bf.in.DEBUG){const n=e.map(fP);$f.debug(`Firestore (${Ay}): ${t}`,...n)}}function Ei(t,...e){if($f.logLevel<=Bf.in.ERROR){const n=e.map(fP);$f.error(`Firestore (${Ay}): ${t}`,...n)}}function Wp(t,...e){if($f.logLevel<=Bf.in.WARN){const n=e.map(fP);$f.warn(`Firestore (${Ay}): ${t}`,...n)}}function fP(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function It(t="Unexpected state"){const e=`FIRESTORE (${Ay}) INTERNAL ASSERTION FAILED: `+t;throw Ei(e),new Error(e)}function en(t,e){t||It()}function ft(t,e){return t}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class We extends On.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class cs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class _j{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class H5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(us.UNAUTHENTICATED))}shutdown(){}}class W5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class G5{constructor(e){this.t=e,this.currentUser=us.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=m=>this.i!==i?(i=this.i,n(m)):Promise.resolve();let c=new cs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new cs,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const m=c;e.enqueueRetryable((0,Te.Z)(function*(){yield m.promise,yield s(r.currentUser)}))},h=m=>{qe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(m=>h(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(qe("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new cs)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(qe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(en("string"==typeof r.accessToken),new _j(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return en(null===e||"string"==typeof e),new us(e)}}class z5{constructor(e,n,r){this.type="FirstParty",this.user=us.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class q5{constructor(e,n,r){this.h=e,this.l=n,this.m=r}getToken(){return Promise.resolve(new z5(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(us.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K5{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const r=s=>{null!=s.error&&qe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.p;return this.p=s.token,qe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{qe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):qe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(en("string"==typeof n.token),this.p=n.token,new Dj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Z5(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class wj{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Z5(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function un(t,e){return t<e?-1:t>e?1:0}function My(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function Ej(t){return t+"\0"}class Hr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new We(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new We(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new We(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new We(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hr.fromMillis(Date.now())}static fromDate(e){return Hr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Hr(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?un(this.nanoseconds,e.nanoseconds):un(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xt(e)}static min(){return new Xt(new Hr(0,0))}static max(){return new Xt(new Hr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ww{constructor(e,n,r){void 0===n?n=0:n>e.length&&It(),void 0===r?r=e.length-n:r>e.length-n&&It(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===ww.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ww?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),c=n.get(i);if(s<c)return-1;if(s>c)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Hn extends ww{construct(e,n,r){return new Hn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new We(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Hn(n)}static emptyPath(){return new Hn([])}}const Q5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pi extends ww{construct(e,n,r){return new pi(e,n,r)}static isValidIdentifier(e){return Q5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pi(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new We(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let c=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new We(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if("\\"!==h&&"."!==h&&"`"!==h)throw new We(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else"`"===d?(c=!c,i++):"."!==d||c?(r+=d,i++):(s(),i++)}if(s(),c)throw new We(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pi(n)}static emptyPath(){return new pi([])}}class ut{constructor(e){this.path=e}static fromPath(e){return new ut(Hn.fromString(e))}static fromName(e){return new ut(Hn.fromString(e).popFirst(5))}static empty(){return new ut(Hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Hn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Hn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new Hn(e.slice()))}}class xT{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function hP(t){return t.fields.find(e=>2===e.kind)}function Gp(t){return t.fields.filter(e=>2!==e.kind)}xT.UNKNOWN_ID=-1;class NT{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ew{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ew(0,Sa.min())}}function Ij(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Xt.fromTimestamp(1e9===r?new Hr(n+1,0):new Hr(n,r));return new Sa(i,ut.empty(),e)}function Cj(t){return new Sa(t.readTime,t.key,-1)}class Sa{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Sa(Xt.min(),ut.empty(),-1)}static max(){return new Sa(Xt.max(),ut.empty(),-1)}}function pP(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=ut.comparator(t.documentKey,e.documentKey),0!==n?n:un(t.largestBatchId,e.largestBatchId))}const bj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Hf(t){return gP.apply(this,arguments)}function gP(){return gP=(0,Te.Z)(function*(t){if(t.code!==me.FAILED_PRECONDITION||t.message!==bj)throw t;qe("LocalStore","Unexpectedly lost primary lease")}),gP.apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&It(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):de.reject(n)}static resolve(e){return new de((n,r)=>{n(e)})}static reject(e){return new de((n,r)=>{r(e)})}static waitFor(e){return new de((n,r)=>{let i=0,s=0,c=!1;e.forEach(d=>{++i,d.next(()=>{++s,c&&s===i&&n()},h=>r(h))}),c=!0,s===i&&n()})}static or(e){let n=de.resolve(!1);for(const r of e)n=n.next(i=>i?de.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new de((r,i)=>{const s=e.length,c=new Array(s);let d=0;for(let h=0;h<s;h++){const m=h;n(e[m]).next(_=>{c[m]=_,++d,d===s&&r(c)},_=>i(_))}})}static doWhile(e,n){return new de((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class RT{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.T=new cs,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{n.error?this.T.reject(new Iw(e,n.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=mP(r.target.error);this.T.reject(new Iw(e,i))}}static open(e,n,r,i){try{return new RT(n,e.transaction(i,r))}catch(s){throw new Iw(n,s)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(qe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new e7(n)}}class fc{constructor(e,n,r){this.name=e,this.version=n,this.P=r,12.2===fc.v((0,On.z$)())&&Ei("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return qe("SimpleDb","Removing database:",e),zp(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,On.hl)())return!1;if(fc.S())return!0;const e=(0,On.z$)(),n=fc.v(e),r=0<n&&n<10,i=fc.D(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,n){return e.store(n)}static v(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var n=this;return(0,Te.Z)(function*(){return n.db||(qe("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=c=>{r(c.target.result)},s.onblocked=()=>{i(new Iw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const d=c.target.error;i("VersionError"===d.name?new We(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new We(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new Iw(e,d))},s.onupgradeneeded=c=>{qe("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',c.oldVersion),n.P.M(c.target.result,s.transaction,c.oldVersion,n.version).next(()=>{qe("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.O&&(n.db.onversionchange=r=>n.O(r)),n.db})()}F(e){this.O=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,Te.Z)(function*(){const c="readonly"===n;let d=0;for(;;){++d;try{s.db=yield s.k(e);const h=RT.open(s.db,e,c?"readonly":"readwrite",r),m=i(h).next(_=>(h.R(),_)).catch(_=>(h.abort(_),de.reject(_))).toPromise();return m.catch(()=>{}),yield h.A,m}catch(h){const m=h,_="FirebaseError"!==m.name&&d<3;if(qe("SimpleDb","Transaction failed with error:",m.message,"Retrying:",_),s.close(),!_)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class X5{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return zp(this.$.delete())}}class Iw extends We{constructor(e,n){super(me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Wf(t){return"IndexedDbTransactionError"===t.name}class e7{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(qe("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(qe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),zp(r)}add(e){return qe("SimpleDb","ADD",this.store.name,e,e),zp(this.store.add(e))}get(e){return zp(this.store.get(e)).next(n=>(void 0===n&&(n=null),qe("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return qe("SimpleDb","DELETE",this.store.name,e),zp(this.store.delete(e))}count(){return qe("SimpleDb","COUNT",this.store.name),zp(this.store.count())}K(e,n){const r=this.options(e,n);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.G(i,(c,d)=>{s.push(d)}).next(()=>s)}{const i=this.store.getAll(r.range);return new de((s,c)=>{i.onerror=d=>{c(d.target.error)},i.onsuccess=d=>{s(d.target.result)}})}}j(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new de((i,s)=>{r.onerror=c=>{s(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}W(e,n){qe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.G(i,(s,c,d)=>d.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Y(e){const n=this.cursor({});return new de((r,i)=>{n.onerror=s=>{const c=mP(s.target.error);i(c)},n.onsuccess=s=>{const c=s.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():r()}):r()}})}G(e,n){const r=[];return new de((i,s)=>{e.onerror=c=>{s(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void i();const h=new X5(d),m=n(d.primaryKey,d.value,h);if(m instanceof de){const _=m.catch(I=>(h.done(),de.reject(I)));r.push(_)}h.isDone?i():null===h.U?d.continue():d.continue(h.U)}}).next(()=>de.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function zp(t){return new de((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=mP(r.target.error);n(i)}})}let Sj=!1;function mP(t){const e=fc.v((0,On.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new We("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Sj||(Sj=!0,setTimeout(()=>{throw r},0)),r}}return t}class t7{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.Z(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var n=this;qe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Te.Z)(function*(){n.task=null;try{qe("IndexBackiller",`Documents written: ${yield n.X.tt()}`)}catch(r){Wf(r)?qe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Hf(r)}yield n.Z(1)}))}}class n7{constructor(e,n){this.localStore=e,this.persistence=n}tt(e=50){var n=this;return(0,Te.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.et(r,e))})()}et(e,n){const r=new Set;let i=n,s=!0;return de.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return qe("IndexBackiller",`Processing collection: ${c}`),this.nt(e,c,i).next(d=>{i-=d,r.add(c)});s=!1})).next(()=>n-i)}nt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.st(i,s)).next(d=>(qe("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,n,d))).next(()=>c.size)}))}st(e,n){let r=e;return n.changes.forEach((i,s)=>{const c=Cj(s);pP(c,r)>0&&(r=c)}),new Sa(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class zo{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.it(r),this.rt=r=>n.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Aj(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qp(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Mj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}zo.ot=-1;class gi{constructor(e,n){this.comparator=e,this.root=n||Os.EMPTY}insert(e,n){return new gi(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Os.BLACK,null,null))}remove(e){return new gi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Os.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new PT(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new PT(this.root,e,this.comparator,!1)}getReverseIterator(){return new PT(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new PT(this.root,e,this.comparator,!0)}}class PT{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Os{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Os.RED,this.left=i??Os.EMPTY,this.right=s??Os.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Os(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Os.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return Os.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Os.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Os.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw It();const e=this.left.check();if(e!==this.right.check())throw It();return e+(this.isRed()?0:1)}}Os.EMPTY=null,Os.RED=!0,Os.BLACK=!1,Os.EMPTY=new class{constructor(){this.size=0}get key(){throw It()}get value(){throw It()}get color(){throw It()}get left(){throw It()}get right(){throw It()}copy(t,e,n,r,i){return this}insert(t,e,n){return new Os(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class cr{constructor(e){this.comparator=e,this.data=new gi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new xj(this.data.getIterator())}getIteratorFrom(e){return new xj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof cr)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new cr(this.comparator);return n.data=e,n}}class xj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xy(t){return t.hasNext()?t.getNext():void 0}class Aa{constructor(e){this.fields=e,e.sort(pi.comparator)}static empty(){return new Aa([])}unionWith(e){let n=new cr(pi.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Aa(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return My(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class Gi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Gi(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Gi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return un(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gi.EMPTY_BYTE_STRING=new Gi("");const i7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gf(t){if(en(!!t),"string"==typeof t){let e=0;const n=i7.exec(t);if(en(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mi(t.seconds),nanos:mi(t.nanos)}}function mi(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Kp(t){return"string"==typeof t?Gi.fromBase64String(t):Gi.fromUint8Array(t)}function yP(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Nj(t){const e=t.mapValue.fields.__previous_value__;return yP(e)?Nj(e):e}function Cw(t){const e=Gf(t.mapValue.fields.__local_write_time__.timestampValue);return new Hr(e.seconds,e.nanos)}class s7{constructor(e,n,r,i,s,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=h}}class Dd{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Dd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Dd&&e.projectId===this.projectId&&e.database===this.database}}function bw(t){return null==t}function Tw(t){return 0===t&&1/t==-1/0}function Rj(t){return"number"==typeof t&&Number.isInteger(t)&&!Tw(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}const zf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},OT={nullValue:"NULL_VALUE"};function Zp(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?yP(t)?4:Fj(t)?9007199254740991:10:It()}function ol(t,e){if(t===e)return!0;const n=Zp(t);if(n!==Zp(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cw(t).isEqual(Cw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Gf(r.timestampValue),c=Gf(i.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return i=e,Kp(t.bytesValue).isEqual(Kp(i.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return mi(r.geoPointValue.latitude)===mi(i.geoPointValue.latitude)&&mi(r.geoPointValue.longitude)===mi(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return mi(r.integerValue)===mi(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=mi(r.doubleValue),c=mi(i.doubleValue);return s===c?Tw(s)===Tw(c):isNaN(s)&&isNaN(c)}return!1}(t,e);case 9:return My(t.arrayValue.values||[],e.arrayValue.values||[],ol);case 10:return function(r,i){const s=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Aj(s)!==Aj(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===c[d]||!ol(s[d],c[d])))return!1;return!0}(t,e);default:return It()}var i}function Sw(t,e){return void 0!==(t.values||[]).find(n=>ol(n,e))}function qf(t,e){if(t===e)return 0;const n=Zp(t),r=Zp(e);if(n!==r)return un(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return un(t.booleanValue,e.booleanValue);case 2:return function(i,s){const c=mi(i.integerValue||i.doubleValue),d=mi(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(t,e);case 3:return Pj(t.timestampValue,e.timestampValue);case 4:return Pj(Cw(t),Cw(e));case 5:return un(t.stringValue,e.stringValue);case 6:return function(i,s){const c=Kp(i),d=Kp(s);return c.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const c=i.split("/"),d=s.split("/");for(let h=0;h<c.length&&h<d.length;h++){const m=un(c[h],d[h]);if(0!==m)return m}return un(c.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const c=un(mi(i.latitude),mi(s.latitude));return 0!==c?c:un(mi(i.longitude),mi(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const c=i.values||[],d=s.values||[];for(let h=0;h<c.length&&h<d.length;++h){const m=qf(c[h],d[h]);if(m)return m}return un(c.length,d.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===zf.mapValue&&s===zf.mapValue)return 0;if(i===zf.mapValue)return 1;if(s===zf.mapValue)return-1;const c=i.fields||{},d=Object.keys(c),h=s.fields||{},m=Object.keys(h);d.sort(),m.sort();for(let _=0;_<d.length&&_<m.length;++_){const I=un(d[_],m[_]);if(0!==I)return I;const A=qf(c[d[_]],h[m[_]]);if(0!==A)return A}return un(d.length,m.length)}(t.mapValue,e.mapValue);default:throw It()}}function Pj(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return un(t,e);const n=Gf(t),r=Gf(e),i=un(n.seconds,r.seconds);return 0!==i?i:un(n.nanos,r.nanos)}function Ny(t){return vP(t)}function vP(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Gf(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Kp(t.bytesValue).toBase64():"referenceValue"in t?ut.fromName(t.referenceValue).toString():"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const c of r.values||[])s?s=!1:i+=",",i+=vP(c);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",c=!0;for(const d of i)c?c=!1:s+=",",s+=`${d}:${vP(r.fields[d])}`;return s+"}"}(t.mapValue):It();var e}function Qp(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _P(t){return!!t&&"integerValue"in t}function Aw(t){return!!t&&"arrayValue"in t}function Oj(t){return!!t&&"nullValue"in t}function kj(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kT(t){return!!t&&"mapValue"in t}function Mw(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return qp(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Mw(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Mw(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Fj(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function o7(t){return"nullValue"in t?OT:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Qp(Dd.empty(),ut.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:It()}function a7(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Qp(Dd.empty(),ut.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?zf:It()}function Lj(t,e){const n=qf(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Vj(t,e){const n=qf(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class ks{constructor(e){this.value=e}static empty(){return new ks({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!kT(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mw(n)}setAll(e){let n=pi.emptyPath(),r={},i=[];e.forEach((c,d)=>{if(!n.isImmediateParentOf(d)){const h=this.getFieldsMap(n);this.applyChanges(h,r,i),r={},i=[],n=d.popLast()}c?r[d.lastSegment()]=Mw(c):i.push(d.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());kT(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ol(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];kT(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){qp(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ks(Mw(this.value))}}function Bj(t){const e=[];return qp(t.fields,(n,r)=>{const i=new pi([n]);if(kT(r)){const s=Bj(r.mapValue).fields;if(0===s.length)e.push(i);else for(const c of s)e.push(i.child(c))}else e.push(i)}),new Aa(e)}class Er{constructor(e,n,r,i,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.data=s,this.documentState=c}static newInvalidDocument(e){return new Er(e,0,Xt.min(),Xt.min(),ks.empty(),0)}static newFoundDocument(e,n,r){return new Er(e,1,n,Xt.min(),r,0)}static newNoDocument(e,n){return new Er(e,2,n,Xt.min(),ks.empty(),0)}static newUnknownDocument(e,n){return new Er(e,3,n,Xt.min(),ks.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ks.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ks.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Er&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Er(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class u7{constructor(e,n=null,r=[],i=[],s=null,c=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=c,this.endAt=d,this.ut=null}}function jj(t,e=null,n=[],r=[],i=null,s=null,c=null){return new u7(t,e,n,r,i,s,c)}function Yp(t){const e=ft(t);if(null===e.ut){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Ny(i.value);var i}).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),bw(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ny(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ny(r)).join(",")),e.ut=n}return e.ut}function xw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<t.orderBy.length;i++)if(!y7(t.orderBy[i],e.orderBy[i]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let i=0;i<t.filters.length;i++)if((n=t.filters[i]).op!==(r=e.filters[i]).op||!n.field.isEqual(r.field)||!ol(n.value,r.value))return!1;var n,r;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Gj(t.startAt,e.startAt)&&Gj(t.endAt,e.endAt)}function FT(t){return ut.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function LT(t,e){return t.filters.filter(n=>n instanceof Fs&&n.field.isEqual(e))}function Uj(t,e,n){let r=OT,i=!0;for(const s of LT(t,e)){let c=OT,d=!0;switch(s.op){case"<":case"<=":c=o7(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,d=!1;break;case"!=":case"not-in":c=OT}Lj({value:r,inclusive:i},{value:c,inclusive:d})<0&&(r=c,i=d)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const c=n.position[s];Lj({value:r,inclusive:i},{value:c,inclusive:n.inclusive})<0&&(r=c,i=n.inclusive);break}return{value:r,inclusive:i}}function $j(t,e,n){let r=zf,i=!0;for(const s of LT(t,e)){let c=zf,d=!0;switch(s.op){case">=":case">":c=a7(s.value),d=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,d=!1;break;case"!=":case"not-in":c=zf}Vj({value:r,inclusive:i},{value:c,inclusive:d})>0&&(r=c,i=d)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const c=n.position[s];Vj({value:r,inclusive:i},{value:c,inclusive:n.inclusive})>0&&(r=c,i=n.inclusive);break}return{value:r,inclusive:i}}class Fs extends class{}{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.ct(e,n,r):new l7(e,n,r):"array-contains"===n?new h7(e,r):"in"===n?new p7(e,r):"not-in"===n?new g7(e,r):"array-contains-any"===n?new m7(e,r):new Fs(e,n,r)}static ct(e,n,r){return"in"===n?new d7(e,r):new f7(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.at(qf(n,this.value)):null!==n&&Zp(this.value)===Zp(n)&&this.at(qf(n,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return It()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class l7 extends Fs{constructor(e,n,r){super(e,n,r),this.key=ut.fromName(r.referenceValue)}matches(e){const n=ut.comparator(e.key,this.key);return this.at(n)}}class d7 extends Fs{constructor(e,n){super(e,"in",n),this.keys=Hj(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class f7 extends Fs{constructor(e,n){super(e,"not-in",n),this.keys=Hj(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Hj(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>ut.fromName(r.referenceValue))}class h7 extends Fs{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Aw(n)&&Sw(n.arrayValue,this.value)}}class p7 extends Fs{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Sw(this.value.arrayValue,n)}}class g7 extends Fs{constructor(e,n){super(e,"not-in",n)}matches(e){if(Sw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Sw(this.value.arrayValue,n)}}class m7 extends Fs{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Aw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Sw(this.value.arrayValue,r))}}class Kf{constructor(e,n){this.position=e,this.inclusive=n}}class Ry{constructor(e,n="asc"){this.field=e,this.dir=n}}function y7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Wj(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],c=t.position[i];if(r=s.field.isKeyField()?ut.comparator(ut.fromName(c.referenceValue),n.key):qf(c,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Gj(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ol(t.position[n],e.position[n]))return!1;return!0}class wd{constructor(e,n=null,r=[],i=[],s=null,c="F",d=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=h,this.lt=null,this.ft=null}}function zj(t,e,n,r,i,s,c,d){return new wd(t,e,n,r,i,s,c,d)}function Py(t){return new wd(t)}function qj(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function DP(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function wP(t){for(const e of t.filters)if(e.ht())return e.field;return null}function EP(t){return null!==t.collectionGroup}function Oy(t){const e=ft(t);if(null===e.lt){e.lt=[];const n=wP(e),r=DP(e);if(null!==n&&null===r)n.isKeyField()||e.lt.push(new Ry(n)),e.lt.push(new Ry(pi.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.lt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Ry(pi.keyField(),s))}}}return e.lt}function qo(t){const e=ft(t);if(!e.ft)if("F"===e.limitType)e.ft=jj(e.path,e.collectionGroup,Oy(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Oy(e))n.push(new Ry(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Kf(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Kf(e.startAt.position,e.startAt.inclusive):null;e.ft=jj(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.ft}function VT(t,e,n){return new wd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Nw(t,e){return xw(qo(t),qo(e))&&t.limitType===e.limitType}function Kj(t){return`${Yp(qo(t))}|lt:${t.limitType}`}function IP(t){return`Query(target=${function c7(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(n=>{return`${(r=n).field.canonicalString()} ${r.op} ${Ny(r.value)}`;var r}).join(", ")}]`),bw(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(n=>{return`${(r=n).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Ny(n)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Ny(n)).join(",")),`Target(${e})`}(qo(t))}; limitType=${t.limitType})`}function CP(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):ut.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of n.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(i,s,c){const d=Wj(i,s,c);return i.inclusive?d<=0:d<0}(n.startAt,Oy(n),r)||n.endAt&&!function(i,s,c){const d=Wj(i,s,c);return i.inclusive?d>=0:d>0}(n.endAt,Oy(n),r)));var n,r}function Zj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Qj(t){return(e,n)=>{let r=!1;for(const i of Oy(t)){const s=v7(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function v7(t,e,n){const r=t.field.isKeyField()?ut.comparator(e.key,n.key):function(i,s,c){const d=s.data.field(i),h=c.data.field(i);return null!==d&&null!==h?qf(d,h):It()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return It()}}function Yj(t,e){if(t.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tw(e)?"-0":e}}function Jj(t){return{integerValue:""+t}}function Xj(t,e){return Rj(e)?Jj(e):Yj(t,e)}class BT{constructor(){this._=void 0}}function _7(t,e,n){return t instanceof ky?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof Jp?tU(t,e):t instanceof Xp?nU(t,e):function(r,i){const s=eU(r,i),c=rU(s)+rU(r._t);return _P(s)&&_P(r._t)?Jj(c):Yj(r.wt,c)}(t,e)}function D7(t,e,n){return t instanceof Jp?tU(t,e):t instanceof Xp?nU(t,e):n}function eU(t,e){return t instanceof Fy?_P(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null;var r,n}class ky extends BT{}class Jp extends BT{constructor(e){super(),this.elements=e}}function tU(t,e){const n=iU(e);for(const r of t.elements)n.some(i=>ol(i,r))||n.push(r);return{arrayValue:{values:n}}}class Xp extends BT{constructor(e){super(),this.elements=e}}function nU(t,e){let n=iU(e);for(const r of t.elements)n=n.filter(i=>!ol(i,r));return{arrayValue:{values:n}}}class Fy extends BT{constructor(e,n){super(),this.wt=e,this._t=n}}function rU(t){return mi(t.integerValue||t.doubleValue)}function iU(t){return Aw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Rw{constructor(e,n){this.field=e,this.transform=n}}class E7{constructor(e,n){this.version=e,this.transformResults=n}}class ri{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ri}static exists(e){return new ri(void 0,e)}static updateTime(e){return new ri(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jT(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class UT{}function sU(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new Vy(t.key,ri.none()):new Ly(t.key,t.data,ri.none());{const n=t.data,r=ks.empty();let i=new cr(pi.comparator);for(let s of e.fields)if(!i.has(s)){let c=n.field(s);null===c&&s.length>1&&(s=s.popLast(),c=n.field(s)),null===c?r.delete(s):r.set(s,c),i=i.add(s)}return new Ed(t.key,r,new Aa(i.toArray()),ri.none())}}function I7(t,e,n){t instanceof Ly?function(r,i,s){const c=r.value.clone(),d=uU(r.fieldTransforms,i,s.transformResults);c.setAll(d),i.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Ed?function(r,i,s){if(!jT(r.precondition,i))return void i.convertToUnknownDocument(s.version);const c=uU(r.fieldTransforms,i,s.transformResults),d=i.data;d.setAll(aU(r)),d.setAll(c),i.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Pw(t,e,n,r){return t instanceof Ly?function(i,s,c,d){if(!jT(i.precondition,s))return c;const h=i.value.clone(),m=cU(i.fieldTransforms,d,s);return h.setAll(m),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ed?function(i,s,c,d){if(!jT(i.precondition,s))return c;const h=cU(i.fieldTransforms,d,s),m=s.data;return m.setAll(aU(i)),m.setAll(h),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(_=>_.field))}(t,e,n,r):(c=n,jT(t.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function C7(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=eU(r.transform,i||null);null!=s&&(null===n&&(n=ks.empty()),n.set(r.field,s))}return n||null}function oU(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(n=t.fieldTransforms)&&void 0===r||n&&r&&My(n,r,(i,s)=>function w7(t,e){return t.field.isEqual(e.field)&&(r=e.transform,(n=t.transform)instanceof Jp&&r instanceof Jp||n instanceof Xp&&r instanceof Xp?My(n.elements,r.elements,ol):n instanceof Fy&&r instanceof Fy?ol(n._t,r._t):n instanceof ky&&r instanceof ky);var n,r}(i,s))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}class Ly extends UT{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ed extends UT{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function aU(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function uU(t,e,n){const r=new Map;en(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],c=s.transform,d=e.data.field(s.field);r.set(s.field,D7(c,d,n[i]))}return r}function cU(t,e,n){const r=new Map;for(const i of t){const s=i.transform,c=n.data.field(i.field);r.set(i.field,_7(s,c,e))}return r}class Vy extends UT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bP extends UT{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class b7{constructor(e){this.count=e}}var Ni,Wn;function lU(t){switch(t){default:return It();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function dU(t){if(void 0===t)return Ei("GRPC error has no .code"),me.UNKNOWN;switch(t){case Ni.OK:return me.OK;case Ni.CANCELLED:return me.CANCELLED;case Ni.UNKNOWN:return me.UNKNOWN;case Ni.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case Ni.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case Ni.INTERNAL:return me.INTERNAL;case Ni.UNAVAILABLE:return me.UNAVAILABLE;case Ni.UNAUTHENTICATED:return me.UNAUTHENTICATED;case Ni.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case Ni.NOT_FOUND:return me.NOT_FOUND;case Ni.ALREADY_EXISTS:return me.ALREADY_EXISTS;case Ni.PERMISSION_DENIED:return me.PERMISSION_DENIED;case Ni.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case Ni.ABORTED:return me.ABORTED;case Ni.OUT_OF_RANGE:return me.OUT_OF_RANGE;case Ni.UNIMPLEMENTED:return me.UNIMPLEMENTED;case Ni.DATA_LOSS:return me.DATA_LOSS;default:return It()}}(Wn=Ni||(Ni={}))[Wn.OK=0]="OK",Wn[Wn.CANCELLED=1]="CANCELLED",Wn[Wn.UNKNOWN=2]="UNKNOWN",Wn[Wn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wn[Wn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wn[Wn.NOT_FOUND=5]="NOT_FOUND",Wn[Wn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wn[Wn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wn[Wn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wn[Wn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wn[Wn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wn[Wn.ABORTED=10]="ABORTED",Wn[Wn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wn[Wn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wn[Wn.INTERNAL=13]="INTERNAL",Wn[Wn.UNAVAILABLE=14]="UNAVAILABLE",Wn[Wn.DATA_LOSS=15]="DATA_LOSS";class Zf{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){qp(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Mj(this.inner)}size(){return this.innerSize}}const T7=new gi(ut.comparator);function Ko(){return T7}const fU=new gi(ut.comparator);function Ow(...t){let e=fU;for(const n of t)e=e.insert(n.key,n);return e}function hU(t){let e=fU;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function al(){return kw()}function pU(){return kw()}function kw(){return new Zf(t=>t.toString(),(t,e)=>t.isEqual(e))}const S7=new gi(ut.comparator),A7=new cr(ut.comparator);function gn(...t){let e=A7;for(const n of t)e=e.add(n);return e}const M7=new cr(un);function $T(){return M7}class Fw{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n){const r=new Map;return r.set(e,Lw.createSynthesizedTargetChangeForCurrentChange(e,n)),new Fw(Xt.min(),r,$T(),Ko(),gn())}}class Lw{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Lw(Gi.EMPTY_BYTE_STRING,n,gn(),gn(),gn())}}class HT{constructor(e,n,r,i){this.gt=e,this.removedTargetIds=n,this.key=r,this.yt=i}}class gU{constructor(e,n){this.targetId=e,this.It=n}}class mU{constructor(e,n,r=Gi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class yU{constructor(){this.Tt=0,this.Et=_U(),this.At=Gi.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=gn(),n=gn(),r=gn();return this.Et.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:It()}}),new Lw(this.At,this.Rt,e,n,r)}Dt(){this.bt=!1,this.Et=_U()}Ct(e,n){this.bt=!0,this.Et=this.Et.insert(e,n)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Mt(){this.bt=!0,this.Rt=!0}}class x7{constructor(e){this.Ot=e,this.Ft=new Map,this.$t=Ko(),this.Bt=vU(),this.Lt=new cr(un)}Ut(e){for(const n of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(n,e.yt):this.Kt(n,e.key,e.yt);for(const n of e.removedTargetIds)this.Kt(n,e.key,e.yt)}Gt(e){this.forEachTarget(e,n=>{const r=this.Qt(n);switch(e.state){case 0:this.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(n);break;case 3:this.jt(n)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:this.jt(n)&&(this.Wt(n),r.Vt(e.resumeToken));break;default:It()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ft.forEach((r,i)=>{this.jt(i)&&n(i)})}zt(e){const n=e.targetId,r=e.It.count,i=this.Ht(n);if(i){const s=i.target;if(FT(s))if(0===r){const c=new ut(s.path);this.Kt(n,c,Er.newNoDocument(c,Xt.min()))}else en(1===r);else this.Jt(n)!==r&&(this.Wt(n),this.Lt=this.Lt.add(n))}}Yt(e){const n=new Map;this.Ft.forEach((s,c)=>{const d=this.Ht(c);if(d){if(s.current&&FT(d.target)){const h=new ut(d.target.path);null!==this.$t.get(h)||this.Xt(c,h)||this.Kt(c,h,Er.newNoDocument(h,e))}s.vt&&(n.set(c,s.St()),s.Dt())}});let r=gn();this.Bt.forEach((s,c)=>{let d=!0;c.forEachWhile(h=>{const m=this.Ht(h);return!m||2===m.purpose||(d=!1,!1)}),d&&(r=r.add(s))}),this.$t.forEach((s,c)=>c.setReadTime(e));const i=new Fw(e,n,this.Lt,this.$t,r);return this.$t=Ko(),this.Bt=vU(),this.Lt=new cr(un),i}qt(e,n){if(!this.jt(e))return;const r=this.Xt(e,n.key)?2:0;this.Qt(e).Ct(n.key,r),this.$t=this.$t.insert(n.key,n),this.Bt=this.Bt.insert(n.key,this.Zt(n.key).add(e))}Kt(e,n,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,n)?i.Ct(n,1):i.xt(n),this.Bt=this.Bt.insert(n,this.Zt(n).delete(e)),r&&(this.$t=this.$t.insert(n,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const n=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let n=this.Ft.get(e);return n||(n=new yU,this.Ft.set(e,n)),n}Zt(e){let n=this.Bt.get(e);return n||(n=new cr(un),this.Bt=this.Bt.insert(e,n)),n}jt(e){const n=null!==this.Ht(e);return n||qe("WatchChangeAggregator","Detected inactive target",e),n}Ht(e){const n=this.Ft.get(e);return n&&n.Pt?null:this.Ot.te(e)}Wt(e){this.Ft.set(e,new yU),this.Ot.getRemoteKeysForTarget(e).forEach(n=>{this.Kt(e,n,null)})}Xt(e,n){return this.Ot.getRemoteKeysForTarget(e).has(n)}}function vU(){return new gi(ut.comparator)}function _U(){return new gi(ut.comparator)}const N7={asc:"ASCENDING",desc:"DESCENDING"},R7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class P7{constructor(e,n){this.databaseId=e,this.dt=n}}function Vw(t,e){return t.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DU(t,e){return t.dt?e.toBase64():e.toUint8Array()}function O7(t,e){return Vw(t,e.toTimestamp())}function ls(t){return en(!!t),Xt.fromTimestamp(function(e){const n=Gf(e);return new Hr(n.seconds,n.nanos)}(t))}function TP(t,e){return(n=t,new Hn(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function wU(t){const e=Hn.fromString(t);return en(xU(e)),e}function Bw(t,e){return TP(t.databaseId,e.path)}function ul(t,e){const n=wU(e);if(n.get(1)!==t.databaseId.projectId)throw new We(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new We(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ut(IU(n))}function SP(t,e){return TP(t.databaseId,e)}function EU(t){const e=wU(t);return 4===e.length?Hn.emptyPath():IU(e)}function jw(t){return new Hn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function IU(t){return en(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function CU(t,e,n){return{name:Bw(t,e),fields:n.value.mapValue.fields}}function bU(t,e,n){const r=ul(t,e.name),i=ls(e.updateTime),s=new ks({mapValue:{fields:e.fields}}),c=Er.newFoundDocument(r,i,s);return n&&c.setHasCommittedMutations(),n?c.setHasCommittedMutations():c}function Uw(t,e){let n;if(e instanceof Ly)n={update:CU(t,e.key,e.value)};else if(e instanceof Vy)n={delete:Bw(t,e.key)};else if(e instanceof Ed)n={update:CU(t,e.key,e.data),updateMask:H7(e.fieldMask)};else{if(!(e instanceof bP))return It();n={verify:Bw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const c=s.transform;if(c instanceof ky)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Jp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Fy)return{fieldPath:s.field.canonicalString(),increment:c._t};throw It()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:O7(t,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:It()),n;var i}function AP(t,e){const n=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ri.updateTime(ls(i.updateTime)):void 0!==i.exists?ri.exists(i.exists):ri.none():ri.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,c){let d=null;"setToServerValue"in c?(en("REQUEST_TIME"===c.setToServerValue),d=new ky):"appendMissingElements"in c?d=new Jp(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new Xp(c.removeAllFromArray.values||[]):"increment"in c?d=new Fy(s,c.increment):It();const h=pi.fromServerFormat(c.fieldPath);return new Rw(h,d)}(t,i)):[];var i;if(e.update){const i=ul(t,e.update.name),s=new ks({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Aa((e.updateMask.fieldPaths||[]).map(m=>pi.fromServerFormat(m)));return new Ed(i,s,c,n,r)}return new Ly(i,s,n,r)}if(e.delete){const i=ul(t,e.delete);return new Vy(i,n)}if(e.verify){const i=ul(t,e.verify);return new bP(i,n)}return It()}function TU(t,e){return{documents:[SP(t,e.path)]}}function SU(t,e){const n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=SP(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=SP(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(h){if(0===h.length)return;const m=h.map(_=>function(I){if("=="===I.op){if(kj(I.value))return{unaryFilter:{field:By(I.field),op:"IS_NAN"}};if(Oj(I.value))return{unaryFilter:{field:By(I.field),op:"IS_NULL"}}}else if("!="===I.op){if(kj(I.value))return{unaryFilter:{field:By(I.field),op:"IS_NOT_NAN"}};if(Oj(I.value))return{unaryFilter:{field:By(I.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:By(I.field),op:j7(I.op),value:I.value}}}(_));return 1===m.length?m[0]:{compositeFilter:{op:"AND",filters:m}}}(e.filters);i&&(n.structuredQuery.where=i);const s=function(h){if(0!==h.length)return h.map(m=>{return{field:By((_=m).field),direction:B7(_.dir)};var _})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const c=(m=e.limit,t.dt||bw(m)?m:{value:m});var m,d,h;return null!==c&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(n.structuredQuery.endAt={before:!(h=e.endAt).inclusive,values:h.position}),n}function AU(t){let e=EU(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){en(1===r);const _=n.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let s=[];n.where&&(s=MU(n.where));let c=[];n.orderBy&&(c=n.orderBy.map(_=>{return new Ry(jy((I=_).field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction));var I}));let d=null;n.limit&&(d=function(_){let I;return I="object"==typeof _?_.value:_,bw(I)?null:I}(n.limit));let h=null;var _;n.startAt&&(h=new Kf((_=n.startAt).values||[],!!_.before));let m=null;return n.endAt&&(m=function(_){return new Kf(_.values||[],!_.before)}(n.endAt)),zj(e,i,c,s,d,"F",h,m)}function MU(t){return t?void 0!==t.unaryFilter?[$7(t)]:void 0!==t.fieldFilter?[U7(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(e=>MU(e)).reduce((e,n)=>e.concat(n)):It():[]}function B7(t){return N7[t]}function j7(t){return R7[t]}function By(t){return{fieldPath:t.canonicalString()}}function jy(t){return pi.fromServerFormat(t.fieldPath)}function U7(t){return Fs.create(jy(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return It()}}(t.fieldFilter.op),t.fieldFilter.value)}function $7(t){switch(t.unaryFilter.op){case"IS_NAN":const e=jy(t.unaryFilter.field);return Fs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=jy(t.unaryFilter.field);return Fs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=jy(t.unaryFilter.field);return Fs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=jy(t.unaryFilter.field);return Fs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return It()}}function H7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xU(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function wo(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=NU(e)),e=W7(t.get(n),e);return NU(e)}function W7(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function NU(t){return t+"\x01\x01"}function cl(t){const e=t.length;if(en(e>=2),2===e)return en("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Hn.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const c=t.indexOf("\x01",s);switch((c<0||c>n)&&It(),t.charAt(c+1)){case"\x01":const d=t.substring(s,c);let h;0===i.length?h=d:(i+=d,h=i,i=""),r.push(h);break;case"\x10":i+=t.substring(s,c),i+="\0";break;case"\x11":i+=t.substring(s,c+1);break;default:It()}s=c+2}return new Hn(r)}const RU=["userId","batchId"];function WT(t,e){return[t,wo(e)]}function PU(t,e,n){return[t,wo(e),n]}const G7={},z7=["prefixPath","collectionGroup","readTime","documentId"],q7=["prefixPath","collectionGroup","documentId"],K7=["collectionGroup","readTime","prefixPath","documentId"],Z7=["canonicalId","targetId"],Q7=["targetId","path"],Y7=["path","targetId"],J7=["collectionId","parent"],X7=["indexId","uid"],eK=["uid","sequenceNumber"],tK=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nK=["indexId","uid","orderedDocumentKey"],rK=["userId","collectionPath","documentId"],iK=["userId","collectionPath","largestBatchId"],sK=["userId","collectionGroup","largestBatchId"],OU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],oK=[...OU,"documentOverlays"],kU=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],FU=kU,aK=[...FU,"indexConfiguration","indexState","indexEntries"];class MP extends Tj{constructor(e,n){super(),this.ee=e,this.currentSequenceNumber=n}}function ds(t,e){const n=ft(t);return fc.N(n.ee,e)}class xP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&I7(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Pw(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Pw(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pU();return this.mutations.forEach(i=>{const s=e.get(i.key),c=s.overlayedDocument;let d=this.applyToLocalView(c,s.mutatedFields);d=n.has(i.key)?null:d;const h=sU(c,d);null!==h&&r.set(i.key,h),c.isValidDocument()||c.convertToNoDocument(Xt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),gn())}isEqual(e){return this.batchId===e.batchId&&My(this.mutations,e.mutations,(n,r)=>oU(n,r))&&My(this.baseMutations,e.baseMutations,(n,r)=>oU(n,r))}}class NP{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){en(e.mutations.length===r.length);let i=S7;const s=e.mutations;for(let c=0;c<s.length;c++)i=i.insert(s[c].key,r[c].version);return new NP(e,n,r,i)}}class RP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Qf{constructor(e,n,r,i,s=Xt.min(),c=Xt.min(),d=Gi.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(e){return new Qf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Qf(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Qf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class LU{constructor(e){this.ne=e}}function VU(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:GT(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Bw(i=t.ne,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Vw(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:eg(e.version)};else{if(!e.isUnknownDocument())return It();r.unknownDocument={path:n.path.toArray(),version:eg(e.version)}}var i,s;return r}function GT(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function eg(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function tg(t){const e=new Hr(t.seconds,t.nanoseconds);return Xt.fromTimestamp(e)}function ng(t,e){const n=(e.baseMutations||[]).map(s=>AP(t.ne,s));for(let s=0;s<e.mutations.length-1;++s){const c=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(c.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>AP(t.ne,s)),i=Hr.fromMillis(e.localWriteTimeMs);return new xP(e.batchId,i,n,r)}function $w(t){const e=tg(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?tg(t.lastLimboFreeSnapshotVersion):Xt.min();let r;var i;return void 0!==t.query.documents?(en(1===(i=t.query).documents.length),r=qo(Py(EU(i.documents[0])))):r=qo(AU(t.query)),new Qf(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Gi.fromBase64String(t.resumeToken))}function BU(t,e){const n=eg(e.snapshotVersion),r=eg(e.lastLimboFreeSnapshotVersion);let i;i=FT(e.target)?TU(t.ne,e.target):SU(t.ne,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Yp(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function PP(t){const e=AU({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?VT(e,e.limit,"L"):e}function OP(t,e){return new RP(e.largestBatchId,AP(t.ne,e.overlayMutation))}function jU(t,e){const n=e.path.lastSegment();return[t,wo(e.path.popLast()),n]}function UU(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:eg(r.readTime),documentKey:wo(r.documentKey.path),largestBatchId:r.largestBatchId}}class cK{getBundleMetadata(e,n){return $U(e).get(n).next(r=>{if(r)return{id:(i=r).bundleId,createTime:tg(i.createTime),version:i.version};var i})}saveBundleMetadata(e,n){return $U(e).put({bundleId:(r=n).id,createTime:eg(ls(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return HU(e).get(n).next(r=>{if(r)return{name:(i=r).name,query:PP(i.bundledQuery),readTime:tg(i.readTime)};var i})}saveNamedQuery(e,n){return HU(e).put({name:(r=n).name,readTime:eg(ls(r.readTime)),bundledQuery:r.bundledQuery});var r}}function $U(t){return ds(t,"bundles")}function HU(t){return ds(t,"namedQueries")}class zT{constructor(e,n){this.wt=e,this.userId=n}static se(e,n){return new zT(e,n.uid||"")}getOverlay(e,n){return Hw(e).get(jU(this.userId,n)).next(r=>r?OP(this.wt,r):null)}getOverlays(e,n){const r=al();return de.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,c)=>{const d=new RP(n,c);i.push(this.ie(e,d))}),de.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(c=>i.add(wo(c.getCollectionPath())));const s=[];return i.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);s.push(Hw(e).W("collectionPathOverlayIndex",d))}),de.waitFor(s)}getOverlaysForCollection(e,n,r){const i=al(),s=wo(n),c=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Hw(e).K("collectionPathOverlayIndex",c).next(d=>{for(const h of d){const m=OP(this.wt,h);i.set(m.getKey(),m)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=al();let c;const d=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Hw(e).J({index:"collectionGroupOverlayIndex",range:d},(h,m,_)=>{const I=OP(this.wt,m);s.size()<i||I.largestBatchId===c?(s.set(I.getKey(),I),c=I.largestBatchId):_.done()}).next(()=>s)}ie(e,n){return Hw(e).put(function(r,i,s){const[c,d,h]=jU(i,s.mutation.key);return{userId:i,collectionPath:d,documentId:h,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Uw(r.ne,s.mutation)}}(this.wt,this.userId,n))}}function Hw(t){return ds(t,"documentOverlays")}class rg{constructor(){}re(e,n){this.oe(e,n),n.ue()}oe(e,n){if("nullValue"in e)this.ce(n,5);else if("booleanValue"in e)this.ce(n,10),n.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(n,15),n.ae(mi(e.integerValue));else if("doubleValue"in e){const r=mi(e.doubleValue);isNaN(r)?this.ce(n,13):(this.ce(n,15),Tw(r)?n.ae(0):n.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(n,20),"string"==typeof r?n.he(r):(n.he(`${r.seconds||""}`),n.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,n),this.fe(n);else if("bytesValue"in e)this.ce(n,30),n.de(Kp(e.bytesValue)),this.fe(n);else if("referenceValue"in e)this._e(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(n,45),n.ae(r.latitude||0),n.ae(r.longitude||0)}else"mapValue"in e?Fj(e)?this.ce(n,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,n),this.fe(n)):"arrayValue"in e?(this.me(e.arrayValue,n),this.fe(n)):It()}le(e,n){this.ce(n,25),this.ge(e,n)}ge(e,n){n.he(e)}we(e,n){const r=e.fields||{};this.ce(n,55);for(const i of Object.keys(r))this.le(i,n),this.oe(r[i],n)}me(e,n){const r=e.values||[];this.ce(n,50);for(const i of r)this.oe(i,n)}_e(e,n){this.ce(n,37),ut.fromName(e).path.forEach(r=>{this.ce(n,60),this.ge(r,n)})}ce(e,n){e.ae(n)}fe(e){e.ae(2)}}function lK(t){if(0===t)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function WU(t){const e=64-function(n){let r=0;for(let i=0;i<8;++i){const s=lK(255&n[i]);if(r+=s,8!==s)break}return r}(t);return Math.ceil(e/8)}rg.ye=new rg;class dK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ie(r.value),r=n.next();this.Te()}Ee(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ae(r.value),r=n.next();this.Re()}be(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=n.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=n.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const n=this.Ve(e),r=WU(n);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}De(e){const n=this.Ve(e),r=WU(n);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Me(){return this.buffer.slice(0,this.position)}Ve(e){const n=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ie(e){const n=255&e;0===n?(this.xe(0),this.xe(255)):255===n?(this.xe(255),this.xe(0)):this.xe(n)}Ae(e){const n=255&e;0===n?(this.ke(0),this.ke(255)):255===n?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class fK{constructor(e){this.Oe=e}de(e){this.Oe.pe(e)}he(e){this.Oe.be(e)}ae(e){this.Oe.ve(e)}ue(){this.Oe.Ce()}}class hK{constructor(e){this.Oe=e}de(e){this.Oe.Ee(e)}he(e){this.Oe.Pe(e)}ae(e){this.Oe.De(e)}ue(){this.Oe.Ne()}}class Ww{constructor(){this.Oe=new dK,this.Fe=new fK(this.Oe),this.$e=new hK(this.Oe)}seed(e){this.Oe.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Me(){return this.Oe.Me()}reset(){this.Oe.reset()}}class ig{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ig(this.indexId,this.documentKey,this.arrayValue,r)}}function sg(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=GU(t.arrayValue,e.arrayValue),0!==n?n:(n=GU(t.directionalValue,e.directionalValue),0!==n?n:ut.comparator(t.documentKey,e.documentKey)))}function GU(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class pK{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const n of e.filters){const r=n;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const n=hP(e);if(void 0!==n&&!this.Qe(n))return!1;const r=Gp(e);let i=0,s=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const c=r[i];if(!this.je(this.Ke,c)||!this.We(this.Ue[s++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(s>=this.Ue.length||!this.We(this.Ue[s++],c))return!1}return!0}Qe(e){for(const n of this.qe)if(this.je(n,e))return!0;return!1}je(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}class gK{constructor(){this.ze=new kP}addToCollectionParentIndex(e,n){return this.ze.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.ze.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(Sa.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(Sa.min())}updateCollectionGroup(e,n,r){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class kP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new cr(Hn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new cr(Hn.comparator)).toArray()}}const qT=new Uint8Array(0);class mK{constructor(e,n){this.user=e,this.databaseId=n,this.He=new kP,this.Je=new Zf(r=>Yp(r),(r,i)=>xw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.He.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.He.add(n)});const s={collectionId:r,parent:wo(i)};return zU(e).put(s)}return de.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[Ej(n),""],!1,!0);return zU(e).K(i).next(s=>{for(const c of s){if(c.collectionId!==n)break;r.push(cl(c.parent))}return r})}addFieldIndex(e,n){const r=KT(e),i={indexId:(c=n).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;delete i.indexId;const s=r.add(i);if(n.indexState){const c=zw(e);return s.next(d=>{c.put(UU(d,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=KT(e),i=zw(e),s=Gw(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=Gw(e);let i=!0;const s=new Map;return de.forEach(this.Ye(n),c=>this.Xe(e,c).next(d=>{i&&(i=!!d),s.set(c,d)})).next(()=>{if(i){let c=gn();const d=[];return de.forEach(s,(h,m)=>{var _;qe("IndexedDbIndexManager",`Using index ${_=h,`id=${_.indexId}|cg=${_.collectionGroup}|f=${_.fields.map(fe=>`${fe.fieldPath}:${fe.kind}`).join(",")}`} to execute ${Yp(n)}`);const I=function(fe,$e){const rt=hP($e);if(void 0===rt)return null;for(const bt of LT(fe,rt.fieldPath))switch(bt.op){case"array-contains-any":return bt.value.arrayValue.values||[];case"array-contains":return[bt.value]}return null}(m,h),A=function(fe,$e){const rt=new Map;for(const bt of Gp($e))for(const hr of LT(fe,bt.fieldPath))switch(hr.op){case"==":case"in":rt.set(bt.fieldPath.canonicalString(),hr.value);break;case"not-in":case"!=":return rt.set(bt.fieldPath.canonicalString(),hr.value),Array.from(rt.values())}return null}(m,h),R=function(fe,$e){const rt=[];let bt=!0;for(const hr of Gp($e)){const Td=0===hr.kind?Uj(fe,hr.fieldPath,fe.startAt):$j(fe,hr.fieldPath,fe.startAt);rt.push(Td.value),bt&&(bt=Td.inclusive)}return new Kf(rt,bt)}(m,h),F=function(fe,$e){const rt=[];let bt=!0;for(const hr of Gp($e)){const Td=0===hr.kind?$j(fe,hr.fieldPath,fe.endAt):Uj(fe,hr.fieldPath,fe.endAt);rt.push(Td.value),bt&&(bt=Td.inclusive)}return new Kf(rt,bt)}(m,h),Y=this.Ze(h,m,R),ne=this.Ze(h,m,F),_e=this.tn(h,m,A),je=this.en(h.indexId,I,Y,R.inclusive,ne,F.inclusive,_e);return de.forEach(je,fe=>r.j(fe,n.limit).next($e=>{$e.forEach(rt=>{const bt=ut.fromSegments(rt.documentKey);c.has(bt)||(c=c.add(bt),d.push(bt))})}))}).next(()=>d)}return de.resolve(null)})}Ye(e){let n=this.Je.get(e);return n||(n=[e],this.Je.set(e,n),n)}en(e,n,r,i,s,c,d){const h=(null!=n?n.length:1)*Math.max(r.length,s.length),m=h/(null!=n?n.length:1),_=[];for(let I=0;I<h;++I){const A=n?this.nn(n[I/m]):qT,R=this.sn(e,A,r[I%m],i),F=this.rn(e,A,s[I%m],c),Y=d.map(ne=>this.sn(e,A,ne,!0));_.push(...this.createRange(R,F,Y))}return _}sn(e,n,r,i){const s=new ig(e,ut.empty(),n,r);return i?s:s.Le()}rn(e,n,r,i){const s=new ig(e,ut.empty(),n,r);return i?s.Le():s}Xe(e,n){const r=new pK(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let c=null;for(const d of s)r.Ge(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,n){let r=2;return de.forEach(this.Ye(n),i=>this.Xe(e,i).next(s=>{s?0!==r&&s.fields.length<function(c){let d=new cr(pi.comparator),h=!1;for(const m of c.filters){const _=m;_.field.isKeyField()||("array-contains"===_.op||"array-contains-any"===_.op?h=!0:d=d.add(_.field))}for(const m of c.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(h?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,n){const r=new Ww;for(const i of Gp(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const c=r.Be(i.kind);rg.ye.re(s,c)}return r.Me()}nn(e){const n=new Ww;return rg.ye.re(e,n.Be(0)),n.Me()}un(e,n){const r=new Ww;return rg.ye.re(Qp(this.databaseId,n),r.Be(function(i){const s=Gp(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Me()}tn(e,n,r){if(null===r)return[];let i=[];i.push(new Ww);let s=0;for(const c of Gp(e)){const d=r[s++];for(const h of i)if(this.cn(n,c.fieldPath)&&Aw(d))i=this.an(i,c,d);else{const m=h.Be(c.kind);rg.ye.re(d,m)}}return this.hn(i)}Ze(e,n,r){return this.tn(e,n,r.position)}hn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Me();return n}an(e,n,r){const i=[...e],s=[];for(const c of r.arrayValue.values||[])for(const d of i){const h=new Ww;h.seed(d.Me()),rg.ye.re(c,h.Be(n.kind)),s.push(h)}return s}cn(e,n){return!!e.filters.find(r=>r instanceof Fs&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=KT(e),i=zw(e);return(n?r.K("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.K()).next(s=>{const c=[];return de.forEach(s,d=>i.get([d.indexId,this.uid]).next(h=>{c.push(function(m,_){const I=_?new Ew(_.sequenceNumber,new Sa(tg(_.readTime),new ut(cl(_.documentKey)),_.largestBatchId)):Ew.empty(),A=m.fields.map(([R,F])=>new NT(pi.fromServerFormat(R),F));return new xT(m.indexId,m.collectionGroup,A,I)}(d,h))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:un(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=KT(e),s=zw(e);return this.ln(e).next(c=>i.K("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(d=>de.forEach(d,h=>s.put(UU(h.indexId,this.user,c,r)))))}updateIndexEntries(e,n){const r=new Map;return de.forEach(n,(i,s)=>{const c=r.get(i.collectionGroup);return(c?de.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),de.forEach(d,h=>this.fn(e,i,h).next(m=>{const _=this.dn(s,h);return m.isEqual(_)?de.resolve():this._n(e,s,h,m,_)}))))})}wn(e,n,r,i){return Gw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,n.key),documentKey:n.key.path.toArray()})}mn(e,n,r,i){return Gw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,n.key),n.key.path.toArray()])}fn(e,n,r){const i=Gw(e);let s=new cr(sg);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,n)])},(c,d)=>{s=s.add(new ig(r.indexId,n,d.arrayValue,d.directionalValue))}).next(()=>s)}dn(e,n){let r=new cr(sg);const i=this.on(n,e);if(null==i)return r;const s=hP(n);if(null!=s){const c=e.data.field(s.fieldPath);if(Aw(c))for(const d of c.arrayValue.values||[])r=r.add(new ig(n.indexId,e.key,this.nn(d),i))}else r=r.add(new ig(n.indexId,e.key,qT,i));return r}_n(e,n,r,i,s){qe("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const c=[];return function(d,h,m,_,I){const A=d.getIterator(),R=h.getIterator();let F=xy(A),Y=xy(R);for(;F||Y;){let ne=!1,_e=!1;if(F&&Y){const je=m(F,Y);je<0?_e=!0:je>0&&(ne=!0)}else null!=F?_e=!0:ne=!0;ne?(_(Y),Y=xy(R)):_e?(I(F),F=xy(A)):(F=xy(A),Y=xy(R))}}(i,s,sg,d=>{c.push(this.wn(e,n,r,d))},d=>{c.push(this.mn(e,n,r,d))}),de.waitFor(c)}ln(e){let n=1;return zw(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((c,d)=>sg(c,d)).filter((c,d,h)=>!d||0!==sg(c,h[d-1]));const i=[];i.push(e);for(const c of r){const d=sg(c,e),h=sg(c,n);if(0===d)i[0]=e.Le();else if(d>0&&h<0)i.push(c),i.push(c.Le());else if(h>0)break}i.push(n);const s=[];for(let c=0;c<i.length;c+=2)s.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,qT,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,qT,[]]));return s}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(qU)}getMinOffset(e,n){return de.mapArray(this.Ye(n),r=>this.Xe(e,r).next(i=>i||It())).next(qU)}}function zU(t){return ds(t,"collectionParents")}function Gw(t){return ds(t,"indexEntries")}function KT(t){return ds(t,"indexConfiguration")}function zw(t){return ds(t,"indexState")}function qU(t){en(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;pP(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Sa(e.readTime,e.documentKey,n)}const KU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zo{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Zo(e,Zo.DEFAULT_COLLECTION_PERCENTILE,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ZU(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],c=IDBKeyRange.only(n.batchId);let d=0;const h=r.J({range:c},(_,I,A)=>(d++,A.delete()));s.push(h.next(()=>{en(1===d)}));const m=[];for(const _ of n.mutations){const I=PU(e,_.key.path,n.batchId);s.push(i.delete(I)),m.push(_.key)}return de.waitFor(s).next(()=>m)}function ZT(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw It();e=t.noDocument}return JSON.stringify(e).length}Zo.DEFAULT_COLLECTION_PERCENTILE=10,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zo.DEFAULT=new Zo(41943040,Zo.DEFAULT_COLLECTION_PERCENTILE,Zo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zo.DISABLED=new Zo(-1,0,0);class QT{constructor(e,n,r,i){this.userId=e,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,n,r,i){en(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new QT(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yf(e).J({index:"userMutationsIndex",range:r},(i,s,c)=>{n=!1,c.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Uy(e),c=Yf(e);return c.add({}).next(d=>{en("number"==typeof d);const h=new xP(d,n,r,i),m=function(A,R,F){const Y=F.baseMutations.map(_e=>Uw(A.ne,_e)),ne=F.mutations.map(_e=>Uw(A.ne,_e));return{userId:R,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:Y,mutations:ne}}(this.wt,this.userId,h),_=[];let I=new cr((A,R)=>un(A.canonicalString(),R.canonicalString()));for(const A of i){const R=PU(this.userId,A.key.path,d);I=I.add(A.key.path.popLast()),_.push(c.put(m)),_.push(s.put(R,G7))}return I.forEach(A=>{_.push(this.indexManager.addToCollectionParentIndex(e,A))}),e.addOnCommittedListener(()=>{this.gn[d]=h.keys()}),de.waitFor(_).next(()=>h)})}lookupMutationBatch(e,n){return Yf(e).get(n).next(r=>r?(en(r.userId===this.userId),ng(this.wt,r)):null)}yn(e,n){return this.gn[n]?de.resolve(this.gn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.gn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Yf(e).J({index:"userMutationsIndex",range:i},(c,d,h)=>{d.userId===this.userId&&(en(d.batchId>=r),s=ng(this.wt,d)),h.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Yf(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,c)=>{r=s.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yf(e).K("userMutationsIndex",n).next(r=>r.map(i=>ng(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=WT(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Uy(e).J({range:i},(c,d,h)=>{const[m,_,I]=c,A=cl(_);if(m===this.userId&&n.path.isEqual(A))return Yf(e).get(I).next(R=>{if(!R)throw It();en(R.userId===this.userId),s.push(ng(this.wt,R))});h.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new cr(un);const i=[];return n.forEach(s=>{const c=WT(this.userId,s.path),d=IDBKeyRange.lowerBound(c),h=Uy(e).J({range:d},(m,_,I)=>{const[A,R,F]=m,Y=cl(R);A===this.userId&&s.path.isEqual(Y)?r=r.add(F):I.done()});i.push(h)}),de.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=WT(this.userId,r),c=IDBKeyRange.lowerBound(s);let d=new cr(un);return Uy(e).J({range:c},(h,m,_)=>{const[I,A,R]=h,F=cl(A);I===this.userId&&r.isPrefixOf(F)?F.length===i&&(d=d.add(R)):_.done()}).next(()=>this.pn(e,d))}pn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Yf(e).get(s).next(c=>{if(null===c)throw It();en(c.userId===this.userId),r.push(ng(this.wt,c))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return ZU(e.ee,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.In(n.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Uy(e).J({range:r},(s,c,d)=>{if(s[0]===this.userId){const h=cl(s[1]);i.push(h)}else d.done()}).next(()=>{en(0===i.length)})})}containsKey(e,n){return QU(e,this.userId,n)}Tn(e){return YU(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function QU(t,e,n){const r=WT(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let c=!1;return Uy(t).J({range:s,H:!0},(d,h,m)=>{const[_,I,A]=d;_===e&&I===i&&(c=!0),m.done()}).next(()=>c)}function Yf(t){return ds(t,"mutations")}function Uy(t){return ds(t,"documentMutations")}function YU(t){return ds(t,"mutationQueues")}class og{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new og(0)}static Rn(){return new og(-1)}}class yK{constructor(e,n){this.referenceDelegate=e,this.wt=n}allocateTargetId(e){return this.bn(e).next(n=>{const r=new og(n.highestTargetId);return n.highestTargetId=r.next(),this.Pn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(n=>Xt.fromTimestamp(new Hr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Pn(e,i)))}addTargetData(e,n){return this.vn(e,n).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(n,r),this.Pn(e,r))))}updateTargetData(e,n){return this.vn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>$y(e).delete(n.targetId)).next(()=>this.bn(e)).next(r=>(en(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return $y(e).J((c,d)=>{const h=$w(d);h.sequenceNumber<=n&&null===r.get(h.targetId)&&(i++,s.push(this.removeTargetData(e,h)))}).next(()=>de.waitFor(s)).next(()=>i)}forEachTarget(e,n){return $y(e).J((r,i)=>{const s=$w(i);n(s)})}bn(e){return JU(e).get("targetGlobalKey").next(n=>(en(null!==n),n))}Pn(e,n){return JU(e).put("targetGlobalKey",n)}vn(e,n){return $y(e).put(BU(this.wt,n))}Vn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Yp(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return $y(e).J({range:i,index:"queryTargetsIndex"},(c,d,h)=>{const m=$w(d);xw(n,m.target)&&(s=m,h.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Jf(e);return n.forEach(c=>{const d=wo(c.path);i.push(s.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,c))}),de.waitFor(i)}removeMatchingKeys(e,n,r){const i=Jf(e);return de.forEach(n,s=>{const c=wo(s.path);return de.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Jf(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Jf(e);let s=gn();return i.J({range:r,H:!0},(c,d,h)=>{const m=cl(c[1]),_=new ut(m);s=s.add(_)}).next(()=>s)}containsKey(e,n){const r=wo(n.path),i=IDBKeyRange.bound([r],[Ej(r)],!1,!0);let s=0;return Jf(e).J({index:"documentTargetsIndex",H:!0,range:i},([c,d],h,m)=>{0!==c&&(s++,m.done())}).next(()=>s>0)}te(e,n){return $y(e).get(n).next(r=>r?$w(r):null)}}function $y(t){return ds(t,"targets")}function JU(t){return ds(t,"targetGlobal")}function Jf(t){return ds(t,"targetDocuments")}function XU([t,e],[n,r]){const i=un(t,n);return 0===i?un(e,r):i}class vK{constructor(e){this.Sn=e,this.buffer=new cr(XU),this.Dn=0}Cn(){return++this.Dn}xn(e){const n=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();XU(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class _K{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var n=this;qe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Te.Z)(function*(){n.Nn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Wf(r)?qe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Hf(r)}yield n.kn(3e5)}))}}class DK{constructor(e,n){this.Mn=e,this.params=n}calculateTargetCount(e,n){return this.Mn.On(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return de.resolve(zo.ot);const r=new vK(n);return this.Mn.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.Mn.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Mn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Mn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(KU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(qe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KU):this.$n(e,n))}getCacheSize(e){return this.Mn.getCacheSize(e)}$n(e,n){let r,i,s,c,d,h,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(I=>(I>this.params.maximumSequenceNumbersToCollect?(qe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${I}`),i=this.params.maximumSequenceNumbersToCollect):i=I,c=Date.now(),this.nthSequenceNumber(e,i))).next(I=>(r=I,d=Date.now(),this.removeTargets(e,r,n))).next(I=>(s=I,h=Date.now(),this.removeOrphanedDocuments(e,r))).next(I=>(m=Date.now(),dP()<=Bf.in.DEBUG&&qe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-_}ms\n\tDetermined least recently used ${i} in `+(d-c)+`ms\n\tRemoved ${s} targets in `+(h-d)+`ms\n\tRemoved ${I} documents in `+(m-h)+`ms\nTotal Duration: ${m-_}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:I})))}}class wK{constructor(e,n){this.db=e,this.garbageCollector=new DK(this,n)}On(e){const n=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Bn(e){let n=0;return this.Fn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Fn(e,n){return this.Ln(e,(r,i)=>n(i))}addReference(e,n,r){return YT(e,r)}removeReference(e,n,r){return YT(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return YT(e,n)}Un(e,n){return function(r,i){let s=!1;return YU(r).Y(c=>QU(r,c,i).next(d=>(d&&(s=!0),de.resolve(!d)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Ln(e,(c,d)=>{if(d<=n){const h=this.Un(e,c).next(m=>{if(!m)return s++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Xt.min()),Jf(e).delete([0,wo(c.path)])))});i.push(h)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return YT(e,n)}Ln(e,n){const r=Jf(e);let i,s=zo.ot;return r.J({index:"documentTargetsIndex"},([c,d],{path:h,sequenceNumber:m})=>{0===c?(s!==zo.ot&&n(new ut(cl(i)),s),s=m,i=h):s=zo.ot}).next(()=>{s!==zo.ot&&n(new ut(cl(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function YT(t,e){return Jf(t).put((r=t.currentSequenceNumber,{targetId:0,path:wo(e.path),sequenceNumber:r}));var r}class e${constructor(){this.changes=new Zf(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Er.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?de.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class EK{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ag(e).put(r)}removeEntry(e,n,r){return ag(e).delete(function(i,s){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],GT(s),c[c.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.qn(e,r)))}getEntry(e,n){let r=Er.newInvalidDocument(n);return ag(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(qw(n))},(i,s)=>{r=this.Kn(n,s)}).next(()=>r)}Gn(e,n){let r={size:0,document:Er.newInvalidDocument(n)};return ag(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(qw(n))},(i,s)=>{r={document:this.Kn(n,s),size:ZT(s)}}).next(()=>r)}getEntries(e,n){let r=Ko();return this.Qn(e,n,(i,s)=>{const c=this.Kn(i,s);r=r.insert(i,c)}).next(()=>r)}jn(e,n){let r=Ko(),i=new gi(ut.comparator);return this.Qn(e,n,(s,c)=>{const d=this.Kn(s,c);r=r.insert(s,d),i=i.insert(s,ZT(c))}).next(()=>({documents:r,Wn:i}))}Qn(e,n,r){if(n.isEmpty())return de.resolve();let i=new cr(i$);n.forEach(h=>i=i.add(h));const s=IDBKeyRange.bound(qw(i.first()),qw(i.last())),c=i.getIterator();let d=c.getNext();return ag(e).J({index:"documentKeyIndex",range:s},(h,m,_)=>{const I=ut.fromSegments([...m.prefixPath,m.collectionGroup,m.documentId]);for(;d&&i$(d,I)<0;)r(d,null),d=c.getNext();d&&d.isEqual(I)&&(r(d,m),d=c.hasNext()?c.getNext():null),d?_.q(qw(d)):_.done()}).next(()=>{for(;d;)r(d,null),d=c.hasNext()?c.getNext():null})}getAllFromCollection(e,n,r){const i=[n.popLast().toArray(),n.lastSegment(),GT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ag(e).K(IDBKeyRange.bound(i,s,!0)).next(c=>{let d=Ko();for(const h of c){const m=this.Kn(ut.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);d=d.insert(m.key,m)}return d})}getAllFromCollectionGroup(e,n,r,i){let s=Ko();const c=r$(n,r),d=r$(n,Sa.max());return ag(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(h,m,_)=>{const I=this.Kn(ut.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);s=s.insert(I.key,I),s.size===i&&_.done()}).next(()=>s)}newChangeBuffer(e){return new IK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return n$(e).get("remoteDocumentGlobalKey").next(n=>(en(!!n),n))}qn(e,n){return n$(e).put("remoteDocumentGlobalKey",n)}Kn(e,n){if(n){const r=function uK(t,e){let n;if(e.document)n=bU(t.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ut.fromSegments(e.noDocument.path),i=tg(e.noDocument.readTime);n=Er.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return It();{const r=ut.fromSegments(e.unknownDocument.path),i=tg(e.unknownDocument.version);n=Er.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(r){const i=new Hr(r[0],r[1]);return Xt.fromTimestamp(i)}(e.readTime)),n}(this.wt,n);if(!r.isNoDocument()||!r.version.isEqual(Xt.min()))return r}return Er.newInvalidDocument(e)}}function t$(t){return new EK(t)}class IK extends e${constructor(e,n){super(),this.zn=e,this.trackRemovals=n,this.Hn=new Zf(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new cr((s,c)=>un(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const d=this.Hn.get(s);if(n.push(this.zn.removeEntry(e,s,d.readTime)),c.isValidDocument()){const h=VU(this.zn.wt,c);i=i.add(s.path.popLast()),r+=ZT(h)-d.size,n.push(this.zn.addEntry(e,s,h))}else if(r-=d.size,this.trackRemovals){const h=VU(this.zn.wt,c.convertToNoDocument(Xt.min()));n.push(this.zn.addEntry(e,s,h))}}),i.forEach(s=>{n.push(this.zn.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.zn.updateMetadata(e,r)),de.waitFor(n)}getFromCache(e,n){return this.zn.Gn(e,n).next(r=>(this.Hn.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.zn.jn(e,n).next(({documents:r,Wn:i})=>(i.forEach((s,c)=>{this.Hn.set(s,{size:c,readTime:r.get(s).readTime})}),r))}}function n$(t){return ds(t,"remoteDocumentGlobal")}function ag(t){return ds(t,"remoteDocumentsV14")}function qw(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function r$(t,e){const n=e.documentKey.path.toArray();return[t,GT(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function i$(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=un(n[s],r[s]),i)return i;return i=un(n.length,r.length),i||(i=un(n[n.length-2],r[r.length-2]),i||un(n[n.length-1],r[r.length-1]))}class CK{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class s${constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.getBaseDocument(e,n,r))).next(i=>(null!==r&&Pw(r.mutation,i,Aa.empty(),Hr.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,gn()).next(()=>r))}getLocalViewOfDocuments(e,n,r=gn()){const i=al();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let c=Ow();return s.forEach((d,h)=>{c=c.insert(d,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,n){const r=al();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,gn()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((c,d)=>{n.set(c,d)})})}computeViews(e,n,r,i){let s=Ko();const c=kw(),d=kw();return n.forEach((h,m)=>{const _=r.get(m.key);i.has(m.key)&&(void 0===_||_.mutation instanceof Ed)?s=s.insert(m.key,m):void 0!==_&&(c.set(m.key,_.mutation.getFieldMask()),Pw(_.mutation,m,_.mutation.getFieldMask(),Hr.now()))}),this.recalculateAndSaveOverlays(e,s).next(h=>(h.forEach((m,_)=>c.set(m,_)),n.forEach((m,_)=>{var I;return d.set(m,new CK(_,null!==(I=c.get(m))&&void 0!==I?I:null))}),d))}recalculateAndSaveOverlays(e,n){const r=kw();let i=new gi((c,d)=>c-d),s=gn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(c=>{for(const d of c)d.keys().forEach(h=>{const m=n.get(h);if(null===m)return;let _=r.get(h)||Aa.empty();_=d.applyToLocalView(m,_),r.set(h,_);const I=(i.get(d.batchId)||gn()).add(h);i=i.insert(d.batchId,I)})}).next(()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const h=d.getNext(),m=h.key,_=h.value,I=pU();_.forEach(A=>{if(!s.has(A)){const R=sU(n.get(A),r.get(A));null!==R&&I.set(A,R),s=s.add(A)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,I))}return de.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return ut.isDocumentKey((i=n).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):EP(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r);var i}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const c=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):de.resolve(al());let d=-1,h=s;return c.next(m=>de.forEach(m,(_,I)=>(d<I.largestBatchId&&(d=I.largestBatchId),s.get(_)?de.resolve():this.getBaseDocument(e,_,I).next(A=>{h=h.insert(_,A)}))).next(()=>this.populateOverlays(e,m,s)).next(()=>this.computeViews(e,h,m,gn())).next(_=>({batchId:d,changes:hU(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ut(n)).next(r=>{let i=Ow();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=Ow();return this.indexManager.getCollectionParents(e,i).next(c=>de.forEach(c,d=>{const h=(m=n,_=d.child(i),new wd(_,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,_;return this.getDocumentsMatchingCollectionQuery(e,h,r).next(m=>{m.forEach((_,I)=>{s=s.insert(_,I)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(s=>{s.forEach((d,h)=>{const m=h.getKey();null===i.get(m)&&(i=i.insert(m,Er.newInvalidDocument(m)))});let c=Ow();return i.forEach((d,h)=>{const m=s.get(d);void 0!==m&&Pw(m.mutation,h,Aa.empty(),Hr.now()),CP(n,h)&&(c=c.insert(d,h))}),c})}getBaseDocument(e,n,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,n):de.resolve(Er.newInvalidDocument(n))}}class bK{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,n){return de.resolve(this.Jn.get(n))}saveBundleMetadata(e,n){var r;return this.Jn.set(n.id,{id:(r=n).id,version:r.version,createTime:ls(r.createTime)}),de.resolve()}getNamedQuery(e,n){return de.resolve(this.Yn.get(n))}saveNamedQuery(e,n){return this.Yn.set(n.name,{name:(r=n).name,query:PP(r.bundledQuery),readTime:ls(r.readTime)}),de.resolve();var r}}class TK{constructor(){this.overlays=new gi(ut.comparator),this.Xn=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const r=al();return de.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ie(e,n,s)}),de.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Xn.delete(r)),de.resolve()}getOverlaysForCollection(e,n,r){const i=al(),s=n.length+1,c=new ut(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const h=d.getNext().value,m=h.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===s&&h.largestBatchId>r&&i.set(h.getKey(),h)}return de.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new gi((m,_)=>m-_);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>r){let _=s.get(m.largestBatchId);null===_&&(_=al(),s=s.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const d=al(),h=s.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((m,_)=>d.set(m,_)),!(d.size()>=i)););return de.resolve(d)}ie(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new RP(n,r));let s=this.Xn.get(n);void 0===s&&(s=gn(),this.Xn.set(n,s)),this.Xn.set(n,s.add(r.key))}}class FP{constructor(){this.Zn=new cr(fs.ts),this.es=new cr(fs.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,n){const r=new fs(e,n);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.rs(new fs(e,n))}os(e,n){e.forEach(r=>this.removeReference(r,n))}us(e){const n=new ut(new Hn([])),r=new fs(n,e),i=new fs(n,e+1),s=[];return this.es.forEachInRange([r,i],c=>{this.rs(c),s.push(c.key)}),s}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const n=new ut(new Hn([])),r=new fs(n,e),i=new fs(n,e+1);let s=gn();return this.es.forEachInRange([r,i],c=>{s=s.add(c.key)}),s}containsKey(e){const n=new fs(e,0),r=this.Zn.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class fs{constructor(e,n){this.key=e,this.ls=n}static ts(e,n){return ut.comparator(e.key,n.key)||un(e.ls,n.ls)}static ns(e,n){return un(e.ls,n.ls)||ut.comparator(e.key,n.key)}}class SK{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new cr(fs.ts)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.fs;this.fs++;const c=new xP(s,n,r,i);this.mutationQueue.push(c);for(const d of i)this.ds=this.ds.add(new fs(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return de.resolve(c)}lookupMutationBatch(e,n){return de.resolve(this._s(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.ws(n+1),s=i<0?0:i;return de.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new fs(n,0),i=new fs(n,Number.POSITIVE_INFINITY),s=[];return this.ds.forEachInRange([r,i],c=>{const d=this._s(c.ls);s.push(d)}),de.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new cr(un);return n.forEach(i=>{const s=new fs(i,0),c=new fs(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([s,c],d=>{r=r.add(d.ls)})}),de.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ut.isDocumentKey(s)||(s=s.child(""));const c=new fs(new ut(s),0);let d=new cr(un);return this.ds.forEachWhile(h=>{const m=h.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(d=d.add(h.ls)),!0)},c),de.resolve(this.gs(d))}gs(e){const n=[];return e.forEach(r=>{const i=this._s(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){en(0===this.ys(n.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return de.forEach(n.mutations,i=>{const s=new fs(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,n){const r=new fs(n,0),i=this.ds.firstAfterOrEqual(r);return de.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}ys(e,n){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const n=this.ws(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class AK{constructor(e){this.ps=e,this.docs=new gi(ut.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,c=this.ps(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return de.resolve(r?r.document.mutableCopy():Er.newInvalidDocument(n))}getEntries(e,n){let r=Ko();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Er.newInvalidDocument(i))}),de.resolve(r)}getAllFromCollection(e,n,r){let i=Ko();const s=new ut(n.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!n.isPrefixOf(d.path))break;d.path.length>n.length+1||pP(Cj(h),r)<=0||(i=i.insert(h.key,h.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,n,r,i){It()}Is(e,n){return de.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new MK(this)}getSize(e){return de.resolve(this.size)}}class MK extends e${constructor(e){super(),this.zn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),de.waitFor(n)}getFromCache(e,n){return this.zn.getEntry(e,n)}getAllFromCache(e,n){return this.zn.getEntries(e,n)}}class xK{constructor(e){this.persistence=e,this.Ts=new Zf(n=>Yp(n),xw),this.lastRemoteSnapshotVersion=Xt.min(),this.highestTargetId=0,this.Es=0,this.As=new FP,this.targetCount=0,this.Rs=og.An()}forEachTarget(e,n){return this.Ts.forEach((r,i)=>n(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Es&&(this.Es=n),de.resolve()}vn(e){this.Ts.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Rs=new og(n),this.highestTargetId=n),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,n){return this.vn(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.vn(n),de.resolve()}removeTargetData(e,n){return this.Ts.delete(n.target),this.As.us(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Ts.forEach((c,d)=>{d.sequenceNumber<=n&&null===r.get(d.targetId)&&(this.Ts.delete(c),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),de.waitFor(s).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const r=this.Ts.get(n)||null;return de.resolve(r)}addMatchingKeys(e,n,r){return this.As.ss(n,r),de.resolve()}removeMatchingKeys(e,n,r){this.As.os(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(c=>{s.push(i.markPotentiallyOrphaned(e,c))}),de.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.As.us(n),de.resolve()}getMatchingKeysForTargetId(e,n){const r=this.As.hs(n);return de.resolve(r)}containsKey(e,n){return de.resolve(this.As.containsKey(n))}}class o${constructor(e,n){this.bs={},this.overlays={},this.Ps=new zo(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new xK(this),this.indexManager=new gK,this.remoteDocumentCache=new AK(r=>this.referenceDelegate.Ss(r)),this.wt=new LU(n),this.Ds=new bK(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TK,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.bs[e.toKey()];return r||(r=new SK(n,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,n,r){qe("MemoryPersistence","Starting transaction:",e);const i=new NK(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(s=>this.referenceDelegate.xs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ns(e,n){return de.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,n)))}}class NK extends Tj{constructor(e){super(),this.currentSequenceNumber=e}}class JT{constructor(e){this.persistence=e,this.ks=new FP,this.Ms=null}static Os(e){return new JT(e)}get Fs(){if(this.Ms)return this.Ms;throw It()}addReference(e,n,r){return this.ks.addReference(r,n),this.Fs.delete(r.toString()),de.resolve()}removeReference(e,n,r){return this.ks.removeReference(r,n),this.Fs.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.Fs.add(n.toString()),de.resolve()}removeTarget(e,n){this.ks.us(n.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Fs.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Cs(){this.Ms=new Set}xs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Fs,r=>{const i=ut.fromPath(r);return this.$s(e,i).next(s=>{s||n.removeEntry(i,Xt.min())})}).next(()=>(this.Ms=null,n.apply(e)))}updateLimboDocument(e,n){return this.$s(e,n).next(r=>{r?this.Fs.delete(n.toString()):this.Fs.add(n.toString())})}Ss(e){return 0}$s(e,n){return de.or([()=>de.resolve(this.ks.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ns(e,n)])}}class RK{constructor(e){this.wt=e}M(e,n,r,i){const s=new RT("createOrUpgrade",n);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RU,{unique:!0}),d.createObjectStore("documentMutations"),a$(e),function(d){d.createObjectStore("remoteDocuments")}(e));let c=de.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),a$(e)),c=c.next(()=>function(d){const h=d.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xt.min().toTimestamp(),targetCount:0};return h.put("targetGlobalKey",m)}(s))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(d,h){return h.store("mutations").K().next(m=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RU,{unique:!0});const _=h.store("mutations"),I=m.map(A=>_.put(A));return de.waitFor(I)})}(e,s))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Bs(s))),r<6&&i>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(s)))),r<7&&i>=7&&(c=c.next(()=>this.Us(s))),r<8&&i>=8&&(c=c.next(()=>this.qs(e,s))),r<9&&i>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Ks(s))),r<11&&i>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(d){const h=d.createObjectStore("documentOverlays",{keyPath:rK});h.createIndex("collectionPathOverlayIndex",iK,{unique:!1}),h.createIndex("collectionGroupOverlayIndex",sK,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(d){const h=d.createObjectStore("remoteDocumentsV14",{keyPath:z7});h.createIndex("documentKeyIndex",q7),h.createIndex("collectionGroupIndex",K7)}(e)).next(()=>this.Gs(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.Qs(e,s))),r<15&&i>=15&&(c=c.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:X7}).createIndex("sequenceNumberIndex",eK,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:tK}).createIndex("documentKeyIndex",nK,{unique:!1})}(e))),c}Ls(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=ZT(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next(i=>de.forEach(i,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",c).next(d=>de.forEach(d,h=>{en(h.userId===s.userId);const m=ng(this.wt,h);return ZU(e,s.userId,m).next(()=>{})}))}))}Us(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((c,d)=>{const h=new Hn(c),m=[0,wo(h)];s.push(n.get(m).next(_=>_?de.resolve():n.put({targetId:0,path:wo(h),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(s))})}qs(e,n){e.createObjectStore("collectionParents",{keyPath:J7});const r=n.store("collectionParents"),i=new kP,s=c=>{if(i.add(c)){const d=c.lastSegment(),h=c.popLast();return r.put({collectionId:d,parent:wo(h)})}};return n.store("remoteDocuments").J({H:!0},(c,d)=>{const h=new Hn(c);return s(h.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([c,d,h],m)=>{const _=cl(d);return s(_.popLast())}))}Ks(e){const n=e.store("targets");return n.J((r,i)=>{const s=$w(i),c=BU(this.wt,s);return n.put(c)})}Gs(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,c)=>{const d=n.store("remoteDocumentsV14"),h=(m=c,m.document?new ut(Hn.fromString(m.document.name).popFirst(5)):m.noDocument?ut.fromSegments(m.noDocument.path):m.unknownDocument?ut.fromSegments(m.unknownDocument.path):It()).path.toArray();var m;const _={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(d.put(_))}).next(()=>de.waitFor(i))}Qs(e,n){const r=n.store("mutations"),i=t$(this.wt),s=new o$(JT.Os,this.wt.ne);return r.K().next(c=>{const d=new Map;return c.forEach(h=>{var m;let _=null!==(m=d.get(h.userId))&&void 0!==m?m:gn();ng(this.wt,h).keys().forEach(I=>_=_.add(I)),d.set(h.userId,_)}),de.forEach(d,(h,m)=>{const _=new us(m),I=zT.se(this.wt,_),A=s.getIndexManager(_),R=QT.se(_,this.wt,A,s.referenceDelegate);return new s$(i,R,I,A).recalculateAndSaveOverlaysForDocumentKeys(new MP(n,zo.ot),h).next()})})}}function a$(t){t.createObjectStore("targetDocuments",{keyPath:Q7}).createIndex("documentTargetsIndex",Y7,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Z7,{unique:!0}),t.createObjectStore("targetGlobal")}const LP="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class VP{constructor(e,n,r,i,s,c,d,h,m,_,I=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.js=s,this.window=c,this.document=d,this.Ws=m,this.zs=_,this.Hs=I,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=A=>Promise.resolve(),!VP.V())throw new We(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new wK(this,i),this.ei=n+"main",this.wt=new LU(h),this.ni=new fc(this.ei,this.Hs,new RK(this.wt)),this.Vs=new yK(this.referenceDelegate,this.wt),this.remoteDocumentCache=t$(this.wt),this.Ds=new cK,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===_&&Ei("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new We(me.FAILED_PRECONDITION,LP);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new zo(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var n=this;return this.ti=function(){var r=(0,Te.Z)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var n=(0,Te.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Te.Z)(function*(){n.started&&(yield n.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>XT(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(n=>{n||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(n=>this.isPrimary&&!n?this.li(e).next(()=>!1):!!n&&this.fi(e).next(()=>!0))).catch(e=>{if(Wf(e))return qe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return qe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Kw(e).get("owner").next(n=>de.resolve(this.di(n)))}_i(e){return XT(e).delete(this.clientId)}wi(){var e=this;return(0,Te.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=ds(r,"clientMetadata");return i.K().next(s=>{const c=e.gi(s,18e5),d=s.filter(h=>-1===c.indexOf(h));return de.forEach(d,h=>i.delete(h.clientId)).next(()=>d)})}).catch(()=>[]);if(e.si)for(const r of n)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?de.resolve(!0):Kw(e).get("owner").next(n=>{if(null!==n&&this.mi(n.leaseTimestampMs,5e3)&&!this.pi(n.ownerId)){if(this.di(n)&&this.networkEnabled)return!0;if(!this.di(n)){if(!n.allowTabSynchronization)throw new We(me.FAILED_PRECONDITION,LP);return!1}}return!(!this.networkEnabled||!this.inForeground)||XT(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&d)return!0}return!1}))}).next(n=>(this.isPrimary!==n&&qe("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,Te.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new MP(n,zo.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,n){return e.filter(r=>this.mi(r.updateTimeMs,n)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>XT(e).K().next(n=>this.gi(n,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,n){return QT.se(e,this.wt,n,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mK(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return zT.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,n,r){qe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=15===(c=this.Hs)?aK:14===c?FU:13===c?kU:12===c?oK:11===c?OU:void It();var c;let d;return this.ni.runTransaction(e,i,s,h=>(d=new MP(h,this.Ps?this.Ps.next():zo.ot),"readwrite-primary"===n?this.ai(d).next(m=>!!m||this.hi(d)).next(m=>{if(!m)throw Ei(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new We(me.FAILED_PRECONDITION,bj);return r(d)}).next(m=>this.fi(d).next(()=>m)):this.bi(d).next(()=>r(d)))).then(h=>(d.raiseOnCommittedEvent(),h))}bi(e){return Kw(e).get("owner").next(n=>{if(null!==n&&this.mi(n.leaseTimestampMs,5e3)&&!this.pi(n.ownerId)&&!this.di(n)&&!(this.zs||this.allowTabSynchronization&&n.allowTabSynchronization))throw new We(me.FAILED_PRECONDITION,LP)})}fi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Kw(e).put("owner",n)}static V(){return fc.V()}li(e){const n=Kw(e);return n.get("owner").next(r=>this.di(r)?(qe("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):de.resolve())}mi(e,n){const r=Date.now();return!(e<r-n||e>r&&(Ei(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,On.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var n;try{const r=null!==(null===(n=this.si)||void 0===n?void 0:n.getItem(this.yi(e)));return qe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ei("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Ei("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Kw(t){return ds(t,"owner")}function XT(t){return ds(t,"clientMetadata")}function BP(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class jP{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Pi=r,this.vi=i}static Vi(e,n){let r=gn(),i=gn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new jP(e,n.fromCache,r,i)}}class u${constructor(){this.Si=!1}initialize(e,n){this.Di=e,this.indexManager=n,this.Si=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ci(e,n).next(s=>s||this.xi(e,n,i,r)).next(s=>s||this.Ni(e,n))}Ci(e,n){if(qj(n))return de.resolve(null);let r=qo(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=VT(n,null,"F"),r=qo(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const c=gn(...s);return this.Di.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,r).next(h=>{const m=this.ki(n,d);return this.Mi(n,m,c,h.readTime)?this.Ci(e,VT(n,null,"F")):this.Oi(e,m,n,h)}))})))}xi(e,n,r,i){return qj(n)||i.isEqual(Xt.min())?this.Ni(e,n):this.Di.getDocuments(e,r).next(s=>{const c=this.ki(n,s);return this.Mi(n,c,r,i)?this.Ni(e,n):(dP()<=Bf.in.DEBUG&&qe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),IP(n)),this.Oi(e,c,n,Ij(i,-1)))})}ki(e,n){let r=new cr(Qj(e));return n.forEach((i,s)=>{CP(e,s)&&(r=r.add(s))}),r}Mi(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ni(e,n){return dP()<=Bf.in.DEBUG&&qe("QueryEngine","Using full collection scan to execute query:",IP(n)),this.Di.getDocumentsMatchingQuery(e,n,Sa.min())}Oi(e,n,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(c=>{s=s.insert(c.key,c)}),s))}}class PK{constructor(e,n,r,i){this.persistence=e,this.Fi=n,this.wt=i,this.$i=new gi(un),this.Bi=new Zf(s=>Yp(s),xw),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new s$(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.$i))}}function c$(t,e,n,r){return new PK(t,e,n,r)}function l$(t,e){return UP.apply(this,arguments)}function UP(){return UP=(0,Te.Z)(function*(t,e){const n=ft(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.qi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const c=[],d=[];let h=gn();for(const m of i){c.push(m.batchId);for(const _ of m.mutations)h=h.add(_.key)}for(const m of s){d.push(m.batchId);for(const _ of m.mutations)h=h.add(_.key)}return n.localDocuments.getDocuments(r,h).next(m=>({Ki:m,removedBatchIds:c,addedBatchIds:d}))})})}),UP.apply(this,arguments)}function OK(t,e){const n=ft(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ui.newChangeBuffer({trackRemovals:!0});return function(c,d,h,m){const _=h.batch,I=_.keys();let A=de.resolve();return I.forEach(R=>{A=A.next(()=>m.getEntry(d,R)).next(F=>{const Y=h.docVersions.get(R);en(null!==Y),F.version.compareTo(Y)<0&&(_.applyToRemoteDocument(F,h),F.isValidDocument()&&(F.setReadTime(h.commitVersion),m.addEntry(F)))})}),A.next(()=>c.mutationQueue.removeMutationBatch(d,_))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let d=gn();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(d=d.add(c.batch.mutations[h].key));return d}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function d$(t){const e=ft(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Vs.getLastRemoteSnapshotVersion(n))}function kK(t,e){const n=ft(t),r=e.snapshotVersion;let i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;const d=[];e.targetChanges.forEach((_,I)=>{const A=i.get(I);if(!A)return;d.push(n.Vs.removeMatchingKeys(s,_.removedDocuments,I).next(()=>n.Vs.addMatchingKeys(s,_.addedDocuments,I)));let R=A.withSequenceNumber(s.currentSequenceNumber);var F,Y,ne;e.targetMismatches.has(I)?R=R.withResumeToken(Gi.EMPTY_BYTE_STRING,Xt.min()).withLastLimboFreeSnapshotVersion(Xt.min()):_.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(_.resumeToken,r)),i=i.insert(I,R),Y=R,ne=_,(0===(F=A).resumeToken.approximateByteSize()||Y.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8||ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0)&&d.push(n.Vs.updateTargetData(s,R))});let h=Ko(),m=gn();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(s,_))}),d.push(f$(s,c,e.documentUpdates).next(_=>{h=_.Gi,m=_.Qi})),!r.isEqual(Xt.min())){const _=n.Vs.getLastRemoteSnapshotVersion(s).next(I=>n.Vs.setTargetsMetadata(s,s.currentSequenceNumber,r));d.push(_)}return de.waitFor(d).next(()=>c.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,h,m)).next(()=>h)}).then(s=>(n.$i=i,s))}function f$(t,e,n){let r=gn(),i=gn();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let c=Ko();return n.forEach((d,h)=>{const m=s.get(d);h.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(d)),h.isNoDocument()&&h.version.isEqual(Xt.min())?(e.removeEntry(d,h.readTime),c=c.insert(d,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||0===h.version.compareTo(m.version)&&m.hasPendingWrites?(e.addEntry(h),c=c.insert(d,h)):qe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",h.version)}),{Gi:c,Qi:i}})}function FK(t,e){const n=ft(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Hy(t,e){const n=ft(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Vs.getTargetData(r,e).next(s=>s?(i=s,de.resolve(i)):n.Vs.allocateTargetId(r).next(c=>(i=new Qf(e,c,0,r.currentSequenceNumber),n.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.$i=n.$i.insert(r.targetId,r),n.Bi.set(e,r.targetId)),r})}function Wy(t,e,n){return $P.apply(this,arguments)}function $P(){return $P=(0,Te.Z)(function*(t,e,n){const r=ft(t),i=r.$i.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Wf(c))throw c;qe("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),$P.apply(this,arguments)}function eS(t,e,n){const r=ft(t);let i=Xt.min(),s=gn();return r.persistence.runTransaction("Execute query","readonly",c=>function(d,h,m){const _=ft(d),I=_.Bi.get(m);return void 0!==I?de.resolve(_.$i.get(I)):_.Vs.getTargetData(h,m)}(r,c,qo(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(c,d.targetId).next(h=>{s=h})}).next(()=>r.Fi.getDocumentsMatchingQuery(c,e,n?i:Xt.min(),n?s:gn())).next(d=>(g$(r,Zj(e),d),{documents:d,ji:s})))}function h$(t,e){const n=ft(t),r=ft(n.Vs),i=n.$i.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.te(s,e).next(c=>c?c.target:null))}function p$(t,e){const n=ft(t),r=n.Li.get(e)||Xt.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.Ui.getAllFromCollectionGroup(i,e,Ij(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(g$(n,e,i),i))}function g$(t,e,n){let r=Xt.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Li.set(e,r)}function HP(){return HP=(0,Te.Z)(function*(t,e,n,r){const i=ft(t);let s=gn(),c=Ko();for(const m of n){const _=e.Wi(m.metadata.name);m.document&&(s=s.add(_));const I=e.zi(m);I.setReadTime(e.Hi(m.metadata.readTime)),c=c.insert(_,I)}const d=i.Ui.newChangeBuffer({trackRemovals:!0}),h=yield Hy(i,(m=r,qo(Py(Hn.fromString(`__bundle__/docs/${m}`)))));var m;return i.persistence.runTransaction("Apply bundle documents","readwrite",m=>f$(m,d,c).next(_=>(d.apply(m),_)).next(_=>i.Vs.removeMatchingKeysForTargetId(m,h.targetId).next(()=>i.Vs.addMatchingKeys(m,s,h.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(m,_.Gi,_.Qi)).next(()=>_.Gi)))}),HP.apply(this,arguments)}function VK(t,e){return WP.apply(this,arguments)}function WP(){return WP=(0,Te.Z)(function*(t,e,n=gn()){const r=yield Hy(t,qo(PP(e.bundledQuery))),i=ft(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const c=ls(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ds.saveNamedQuery(s,e);const d=r.withResumeToken(Gi.EMPTY_BYTE_STRING,c);return i.$i=i.$i.insert(d.targetId,d),i.Vs.updateTargetData(s,d).next(()=>i.Vs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Vs.addMatchingKeys(s,n,r.targetId)).next(()=>i.Ds.saveNamedQuery(s,e))})}),WP.apply(this,arguments)}function m$(t,e){return`firestore_clients_${t}_${e}`}function y$(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function GP(t,e){return`firestore_targets_${t}_${e}`}class tS{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Ji(e,n,r){const i=JSON.parse(r);let s,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(s=new We(i.error.code,i.error.message))),c?new tS(e,n,i.state,s):(Ei("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zw{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Ji(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new We(r.error.code,r.error.message))),s?new Zw(e,r.state,i):(Ei("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nS{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ji(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=$T();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=Rj(r.activeTargetIds[c]),s=s.add(r.activeTargetIds[c]);return i?new nS(e,s):(Ei("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class zP{constructor(e,n){this.clientId=e,this.onlineState=n}static Ji(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new zP(n.clientId,n.onlineState):(Ei("SharedClientState",`Failed to parse online state: ${e}`),null)}}class qP{constructor(){this.activeTargetIds=$T()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KP{constructor(e,n,r,i,s){this.window=e,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new gi(un),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.rr=m$(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new qP),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Te.Z)(function*(){const n=yield e.syncEngine.Ri();for(const i of n){if(i===e.tr)continue;const s=e.getItem(m$(e.persistenceKey,i));if(s){const c=nS.Ji(i,s);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let n=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,n,r){this.yr(e,n,r),this.pr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(GP(this.persistenceKey,e));if(r){const i=Zw.Ji(e,r);i&&(n=i.state)}}return this.Ir.Xi(e),this._r(),n}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(GP(this.persistenceKey,e))}updateQueryState(e,n,r){this.Tr(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return qe("SharedClientState","READ",e,n),n}setItem(e,n){qe("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){qe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var n=this;const r=e;if(r.storageArea===this.storage){if(qe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Ei("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Te.Z)(function*(){if(n.started){if(null!==r.key)if(n.cr.test(r.key)){if(null==r.newValue){const i=n.Rr(r.key);return n.br(i,null)}{const i=n.Pr(r.key,r.newValue);if(i)return n.br(i.clientId,i)}}else if(n.ar.test(r.key)){if(null!==r.newValue){const i=n.vr(r.key,r.newValue);if(i)return n.Vr(i)}}else if(n.hr.test(r.key)){if(null!==r.newValue){const i=n.Sr(r.key,r.newValue);if(i)return n.Dr(i)}}else if(r.key===n.lr){if(null!==r.newValue){const i=n.wr(r.newValue);if(i)return n.mr(i)}}else if(r.key===n.ur){const i=function(s){let c=zo.ot;if(null!=s)try{const d=JSON.parse(s);en("number"==typeof d),c=d}catch(d){Ei("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(r.newValue);i!==zo.ot&&n.sequenceNumberHandler(i)}else if(r.key===n.dr){const i=n.Cr(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.Nr(s)))}}else n.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,n,r){const i=new tS(this.currentUser,e,n,r),s=y$(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Yi())}pr(e){const n=y$(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,n,r){const i=GP(this.persistenceKey,e),s=new Zw(e,n,r);this.setItem(i,s.Yi())}Ar(e){const n=JSON.stringify(Array.from(e));this.setItem(this.dr,n)}Rr(e){const n=this.cr.exec(e);return n?n[1]:null}Pr(e,n){const r=this.Rr(e);return nS.Ji(r,n)}vr(e,n){const r=this.ar.exec(e),i=Number(r[1]);return tS.Ji(new us(void 0!==r[2]?r[2]:null),i,n)}Sr(e,n){const r=this.hr.exec(e),i=Number(r[1]);return Zw.Ji(i,n)}wr(e){return zP.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var n=this;return(0,Te.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.kr(e.batchId,e.state,e.error);qe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,n){const r=n?this.sr.insert(e,n):this.sr.remove(e),i=this.gr(this.sr),s=this.gr(r),c=[],d=[];return s.forEach(h=>{i.has(h)||c.push(h)}),i.forEach(h=>{s.has(h)||d.push(h)}),this.syncEngine.Or(c,d).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let n=$T();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class v${constructor(){this.Fr=new qP,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,n,r){this.$r[e]=n}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new qP,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class BK{Br(e){}shutdown(){}}class _${constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){qe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){qe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const jK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class UK{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class $K extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,n,r,i,s){const c=this.oo(e,n);qe("RestConnection","Sending: ",c,r);const d={};return this.uo(d,i,s),this.co(e,c,d,r).then(h=>(qe("RestConnection","Received: ",h),h),h=>{throw Wp("RestConnection",`${e} failed with error: `,h,"url: ",c,"request:",r),h})}ao(e,n,r,i,s,c){return this.ro(e,n,r,i,s)}uo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ay,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}oo(e,n){return`${this.so}/v1/${n}:${jK[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,n,r,i){return new Promise((s,c)=>{const d=new j5;d.listenOnce(L5.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case lP.NO_ERROR:const m=d.getResponseJson();qe("Connection","XHR received:",JSON.stringify(m)),s(m);break;case lP.TIMEOUT:qe("Connection",'RPC "'+e+'" timed out'),c(new We(me.DEADLINE_EXCEEDED,"Request time out"));break;case lP.HTTP_ERROR:const _=d.getStatus();if(qe("Connection",'RPC "'+e+'" failed with status:',_,"response text:",d.getResponseText()),_>0){const I=d.getResponseJson().error;if(I&&I.status&&I.message){const A=function(R){const F=R.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(F)>=0?F:me.UNKNOWN}(I.status);c(new We(A,I.message))}else c(new We(me.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new We(me.UNAVAILABLE,"Connection failed."));break;default:It()}}finally{qe("Connection",'RPC "'+e+'" completed.')}});const h=JSON.stringify(i);d.send(n,"POST",h,r,15)})}ho(e,n,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=k5(),c=F5(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new B5({})),this.uo(d.initMessageHeaders,n,r),(0,On.uI)()||(0,On.b$)()||(0,On.d)()||(0,On.w1)()||(0,On.Mn)()||(0,On.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const h=i.join("");qe("Connection","Creating WebChannel: "+h,d);const m=s.createWebChannel(h,d);let _=!1,I=!1;const A=new UK({jr:F=>{I?qe("Connection","Not sending because WebChannel is closed:",F):(_||(qe("Connection","Opening WebChannel transport."),m.open(),_=!0),qe("Connection","WebChannel sending:",F),m.send(F))},Wr:()=>m.close()}),R=(F,Y,ne)=>{F.listen(Y,_e=>{try{ne(_e)}catch(je){setTimeout(()=>{throw je},0)}})};return R(m,MT.EventType.OPEN,()=>{I||qe("Connection","WebChannel transport opened.")}),R(m,MT.EventType.CLOSE,()=>{I||(I=!0,qe("Connection","WebChannel transport closed"),A.eo())}),R(m,MT.EventType.ERROR,F=>{I||(I=!0,Wp("Connection","WebChannel transport errored:",F),A.eo(new We(me.UNAVAILABLE,"The operation could not be completed")))}),R(m,MT.EventType.MESSAGE,F=>{var Y;if(!I){const ne=F.data[0];en(!!ne);const _e=ne,je=_e.error||(null===(Y=_e[0])||void 0===Y?void 0:Y.error);if(je){qe("Connection","WebChannel received error:",je);const fe=je.status;let $e=function(bt){const hr=Ni[bt];if(void 0!==hr)return dU(hr)}(fe),rt=je.message;void 0===$e&&($e=me.INTERNAL,rt="Unknown error status: "+fe+" with message "+je.message),I=!0,A.eo(new We($e,rt)),m.close()}else qe("Connection","WebChannel received:",ne),A.no(ne)}}),R(c,V5.STAT_EVENT,F=>{F.stat===yj.PROXY?qe("Connection","Detected buffering proxy"):F.stat===yj.NOPROXY&&qe("Connection","Detected no buffering proxy")}),setTimeout(()=>{A.Zr()},0),A}}function D$(){return typeof window<"u"?window:null}function rS(){return typeof document<"u"?document:null}function Qw(t){return new P7(t,!0)}class ZP{constructor(e,n,r=1e3,i=1.5,s=6e4){this.js=e,this.timerId=n,this.lo=r,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&qe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class w${constructor(e,n,r,i,s,c,d,h){this.js=e,this.Ao=r,this.Ro=i,this.bo=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=h,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new ZP(e,n)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Te.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,Te.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,n){var r=this;return(0,Te.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():n&&n.code===me.RESOURCE_EXHAUSTED?(Ei(n.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):n&&n.code===me.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(n)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===n&&this.Uo(r,i)},r=>{e(()=>{const i=new We(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,n){const r=this.Lo(this.Po);this.stream=this.Ko(e,n),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,Te.Z)(function*(){e.state=0,e.start()}))}qo(e){return qe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return n=>{this.js.enqueueAndForget(()=>this.Po===e?n():(qe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HK extends w${constructor(e,n,r,i,s,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,c),this.wt=s}Ko(e,n){return this.bo.ho("Listen",e,n)}onMessage(e){this.So.reset();const n=function F7(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(h=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===h?1:"REMOVE"===h?2:"CURRENT"===h?3:"RESET"===h?4:It(),i=e.targetChange.targetIds||[],s=function(h,m){return h.dt?(en(void 0===m||"string"==typeof m),Gi.fromBase64String(m||"")):(en(void 0===m||m instanceof Uint8Array),Gi.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(h){const m=void 0===h.code?me.UNKNOWN:dU(h.code);return new We(m,h.message||"")}(c);n=new mU(r,i,s,d||null)}else if("documentChange"in e){const r=e.documentChange,i=ul(t,r.document.name),s=ls(r.document.updateTime),c=new ks({mapValue:{fields:r.document.fields}}),d=Er.newFoundDocument(i,s,c);n=new HT(r.targetIds||[],r.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const r=e.documentDelete,i=ul(t,r.document),s=r.readTime?ls(r.readTime):Xt.min(),c=Er.newNoDocument(i,s);n=new HT([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=ul(t,r.document);n=new HT([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return It();{const r=e.filter,s=new b7(r.count||0);n=new gU(r.targetId,s)}}var h;return n}(this.wt,e),r=function(i){if(!("targetChange"in i))return Xt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Xt.min():s.readTime?ls(s.readTime):Xt.min()}(e);return this.listener.Go(n,r)}Qo(e){const n={};n.database=jw(this.wt),n.addTarget=function(i,s){let c;const d=s.target;return c=FT(d)?{documents:TU(i,d)}:{query:SU(i,d)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=DU(i,s.resumeToken):s.snapshotVersion.compareTo(Xt.min())>0&&(c.readTime=Vw(i,s.snapshotVersion.toTimestamp())),c}(this.wt,e);const r=function V7(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return It()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.Oo(n)}jo(e){const n={};n.database=jw(this.wt),n.removeTarget=e,this.Oo(n)}}class WK extends w${constructor(e,n,r,i,s,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,c),this.wt=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,n){return this.bo.ho("Write",e,n)}onMessage(e){if(en(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const n=function L7(t,e){return t&&t.length>0?(en(void 0!==e),t.map(n=>function(r,i){let s=ls(r.updateTime?r.updateTime:i);return s.isEqual(Xt.min())&&(s=ls(i)),new E7(s,r.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=ls(e.commitTime);return this.listener.Jo(r,n)}return en(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=jw(this.wt),this.Oo(e)}Ho(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Uw(this.wt,r))};this.Oo(n)}}class GK extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new We(me.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,n,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.bo.ro(e,n,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new We(me.UNKNOWN,i.toString())})}ao(e,n,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.bo.ao(e,n,r,s,c,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new We(me.UNKNOWN,s.toString())})}terminate(){this.Zo=!0}}class zK{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Ei(n),this.su=!1):qe("OnlineStateTracker",n)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class qK{constructor(e,n,r,i,s){var c=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br(d=>{r.enqueueAndForget((0,Te.Z)(function*(){var h;Xf(c)&&(qe("RemoteStore","Restarting streams for network reachability change."),yield(h=(0,Te.Z)(function*(m){const _=ft(m);_.lu.add(4),yield Gy(_),_._u.set("Unknown"),_.lu.delete(4),yield Yw(_)}),function(m){return h.apply(this,arguments)})(c))}))}),this._u=new zK(r,i)}}function Yw(t){return QP.apply(this,arguments)}function QP(){return QP=(0,Te.Z)(function*(t){if(Xf(t))for(const e of t.fu)yield e(!0)}),QP.apply(this,arguments)}function Gy(t){return YP.apply(this,arguments)}function YP(){return YP=(0,Te.Z)(function*(t){for(const e of t.fu)yield e(!1)}),YP.apply(this,arguments)}function iS(t,e){const n=ft(t);n.hu.has(e.targetId)||(n.hu.set(e.targetId,e),eO(n)?XP(n):qy(n).Co()&&JP(n,e))}function Jw(t,e){const n=ft(t),r=qy(n);n.hu.delete(e),r.Co()&&E$(n,e),0===n.hu.size&&(r.Co()?r.ko():Xf(n)&&n._u.set("Unknown"))}function JP(t,e){t.wu.Nt(e.targetId),qy(t).Qo(e)}function E$(t,e){t.wu.Nt(e),qy(t).jo(e)}function XP(t){t.wu=new x7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),te:e=>t.hu.get(e)||null}),qy(t).start(),t._u.iu()}function eO(t){return Xf(t)&&!qy(t).Do()&&t.hu.size>0}function Xf(t){return 0===ft(t).lu.size}function I$(t){t.wu=void 0}function KK(t){return tO.apply(this,arguments)}function tO(){return tO=(0,Te.Z)(function*(t){t.hu.forEach((e,n)=>{JP(t,e)})}),tO.apply(this,arguments)}function ZK(t,e){return nO.apply(this,arguments)}function nO(){return nO=(0,Te.Z)(function*(t,e){I$(t),eO(t)?(t._u.uu(e),XP(t)):t._u.set("Unknown")}),nO.apply(this,arguments)}function QK(t,e,n){return rO.apply(this,arguments)}function rO(){return rO=(0,Te.Z)(function*(t,e,n){if(t._u.set("Online"),e instanceof mU&&2===e.state&&e.cause)try{yield(r=(0,Te.Z)(function*(i,s){const c=s.cause;for(const d of s.targetIds)i.hu.has(d)&&(yield i.remoteSyncer.rejectListen(d,c),i.hu.delete(d),i.wu.removeTarget(d))}),function(i,s){return r.apply(this,arguments)})(t,e)}catch(r){qe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield sS(t,r)}else if(e instanceof HT?t.wu.Ut(e):e instanceof gU?t.wu.zt(e):t.wu.Gt(e),!n.isEqual(Xt.min()))try{const r=yield d$(t.localStore);n.compareTo(r)>=0&&(yield function(i,s){const c=i.wu.Yt(s);return c.targetChanges.forEach((d,h)=>{if(d.resumeToken.approximateByteSize()>0){const m=i.hu.get(h);m&&i.hu.set(h,m.withResumeToken(d.resumeToken,s))}}),c.targetMismatches.forEach(d=>{const h=i.hu.get(d);if(!h)return;i.hu.set(d,h.withResumeToken(Gi.EMPTY_BYTE_STRING,h.snapshotVersion)),E$(i,d);const m=new Qf(h.target,d,1,h.sequenceNumber);JP(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(r){qe("RemoteStore","Failed to raise snapshot:",r),yield sS(t,r)}var r}),rO.apply(this,arguments)}function sS(t,e,n){return iO.apply(this,arguments)}function iO(){return iO=(0,Te.Z)(function*(t,e,n){if(!Wf(e))throw e;t.lu.add(1),yield Gy(t),t._u.set("Offline"),n||(n=()=>d$(t.localStore)),t.asyncQueue.enqueueRetryable((0,Te.Z)(function*(){qe("RemoteStore","Retrying IndexedDB access"),yield n(),t.lu.delete(1),yield Yw(t)}))}),iO.apply(this,arguments)}function C$(t,e){return e().catch(n=>sS(t,n,e))}function zy(t){return sO.apply(this,arguments)}function sO(){return sO=(0,Te.Z)(function*(t){const e=ft(t),n=eh(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;YK(e);)try{const i=yield FK(e.localStore,r);if(null===i){0===e.au.length&&n.ko();break}r=i.batchId,JK(e,i)}catch(i){yield sS(e,i)}b$(e)&&T$(e)}),sO.apply(this,arguments)}function YK(t){return Xf(t)&&t.au.length<10}function JK(t,e){t.au.push(e);const n=eh(t);n.Co()&&n.zo&&n.Ho(e.mutations)}function b$(t){return Xf(t)&&!eh(t).Do()&&t.au.length>0}function T$(t){eh(t).start()}function XK(t){return oO.apply(this,arguments)}function oO(){return oO=(0,Te.Z)(function*(t){eh(t).Xo()}),oO.apply(this,arguments)}function e9(t){return aO.apply(this,arguments)}function aO(){return aO=(0,Te.Z)(function*(t){const e=eh(t);for(const n of t.au)e.Ho(n.mutations)}),aO.apply(this,arguments)}function t9(t,e,n){return uO.apply(this,arguments)}function uO(){return uO=(0,Te.Z)(function*(t,e,n){const r=t.au.shift(),i=NP.from(r,e,n);yield C$(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield zy(t)}),uO.apply(this,arguments)}function n9(t,e){return cO.apply(this,arguments)}function cO(){return cO=(0,Te.Z)(function*(t,e){var n;e&&eh(t).zo&&(yield(n=(0,Te.Z)(function*(r,i){if(lU(s=i.code)&&s!==me.ABORTED){const c=r.au.shift();eh(r).No(),yield C$(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield zy(r)}var s}),function(r,i){return n.apply(this,arguments)})(t,e)),b$(t)&&T$(t)}),cO.apply(this,arguments)}function S$(t,e){return lO.apply(this,arguments)}function lO(){return lO=(0,Te.Z)(function*(t,e){const n=ft(t);n.asyncQueue.verifyOperationInProgress(),qe("RemoteStore","RemoteStore received new credentials");const r=Xf(n);n.lu.add(3),yield Gy(n),r&&n._u.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.lu.delete(3),yield Yw(n)}),lO.apply(this,arguments)}function dO(t,e){return fO.apply(this,arguments)}function fO(){return fO=(0,Te.Z)(function*(t,e){const n=ft(t);e?(n.lu.delete(2),yield Yw(n)):e||(n.lu.add(2),yield Gy(n),n._u.set("Unknown"))}),fO.apply(this,arguments)}function qy(t){return t.mu||(t.mu=function(e,n,r){const i=ft(e);return i.tu(),new HK(n,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(t.datastore,t.asyncQueue,{zr:KK.bind(null,t),Jr:ZK.bind(null,t),Go:QK.bind(null,t)}),t.fu.push(function(){var e=(0,Te.Z)(function*(n){n?(t.mu.No(),eO(t)?XP(t):t._u.set("Unknown")):(yield t.mu.stop(),I$(t))});return function(n){return e.apply(this,arguments)}}())),t.mu}function eh(t){return t.gu||(t.gu=function(e,n,r){const i=ft(e);return i.tu(),new WK(n,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(t.datastore,t.asyncQueue,{zr:XK.bind(null,t),Jr:n9.bind(null,t),Yo:e9.bind(null,t),Jo:t9.bind(null,t)}),t.fu.push(function(){var e=(0,Te.Z)(function*(n){n?(t.gu.No(),yield zy(t)):(yield t.gu.stop(),t.au.length>0&&(qe("RemoteStore",`Stopping write stream with ${t.au.length} pending writes`),t.au=[]))});return function(n){return e.apply(this,arguments)}}())),t.gu}class hO{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,n,r,i,s){const c=Date.now()+r,d=new hO(e,n,c,i,s);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new We(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ky(t,e){if(Ei("AsyncQueue",`${e}: ${t}`),Wf(t))return new We(me.UNAVAILABLE,`${e}: ${t}`);throw t}class Zy{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ut.comparator(n.key,r.key):(n,r)=>ut.comparator(n.key,r.key),this.keyedMap=Ow(),this.sortedSet=new gi(this.comparator)}static emptySet(e){return new Zy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zy)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new Zy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class A${constructor(){this.yu=new gi(ut.comparator)}track(e){const n=e.doc.key,r=this.yu.get(n);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(n,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(n):1===e.type&&2===r.type?this.yu=this.yu.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):It():this.yu=this.yu.insert(n,e)}pu(){const e=[];return this.yu.inorderTraversal((n,r)=>{e.push(r)}),e}}class Qy{constructor(e,n,r,i,s,c,d,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=h}static fromInitialDocuments(e,n,r,i){const s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new Qy(e,n,Zy.emptySet(n),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class r9{constructor(){this.Iu=void 0,this.listeners=[]}}class i9{constructor(){this.queries=new Zf(e=>Kj(e),Nw),this.onlineState="Unknown",this.Tu=new Set}}function pO(t,e){return gO.apply(this,arguments)}function gO(){return gO=(0,Te.Z)(function*(t,e){const n=ft(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new r9),i)try{s.Iu=yield n.onListen(r)}catch(c){const d=Ky(c,`Initialization of query '${IP(e.query)}' failed`);return void e.onError(d)}n.queries.set(r,s),s.listeners.push(e),e.Eu(n.onlineState),s.Iu&&e.Au(s.Iu)&&vO(n)}),gO.apply(this,arguments)}function mO(t,e){return yO.apply(this,arguments)}function yO(){return yO=(0,Te.Z)(function*(t,e){const n=ft(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const c=s.listeners.indexOf(e);c>=0&&(s.listeners.splice(c,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}),yO.apply(this,arguments)}function s9(t,e){const n=ft(t);let r=!1;for(const i of e){const c=n.queries.get(i.query);if(c){for(const d of c.listeners)d.Au(i)&&(r=!0);c.Iu=i}}r&&vO(n)}function o9(t,e,n){const r=ft(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function vO(t){t.Tu.forEach(e=>{e.next()})}class _O{constructor(e,n,r){this.query=e,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Qy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),n=!0):this.Vu(e,this.onlineState)&&(this.Su(e),n=!0),this.Pu=e,n}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let n=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),n=!0),n}Vu(e,n){return!e.fromCache||!(this.options.Du&&"Offline"!==n||e.docs.isEmpty()&&"Offline"!==n)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Qy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class a9{constructor(e,n){this.payload=e,this.byteLength=n}Cu(){return"metadata"in this.payload}}class M${constructor(e){this.wt=e}Wi(e){return ul(this.wt,e)}zi(e){return e.metadata.exists?bU(this.wt,e.document,!1):Er.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return ls(e)}}class u9{constructor(e,n,r){this.xu=e,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=x$(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n;const r=Hn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ku(e){const n=new Map,r=new M$(this.wt);for(const i of e)if(i.metadata.queries){const s=r.Wi(i.metadata.name);for(const c of i.metadata.queries){const d=(n.get(c)||gn()).add(s);n.set(c,d)}}return n}complete(){var e=this;return(0,Te.Z)(function*(){const n=yield function LK(t,e,n,r){return HP.apply(this,arguments)}(e.localStore,new M$(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield VK(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:n}})()}}function x$(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class N${constructor(e){this.key=e}}class R${constructor(e){this.key=e}}class P${constructor(e,n){this.query=e,this.Fu=n,this.$u=null,this.current=!1,this.Bu=gn(),this.mutatedKeys=gn(),this.Lu=Qj(e),this.Uu=new Zy(this.Lu)}get qu(){return this.Fu}Ku(e,n){const r=n?n.Gu:new A$,i=n?n.Uu:this.Uu;let s=n?n.mutatedKeys:this.mutatedKeys,c=i,d=!1;const h="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,m="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((_,I)=>{const A=i.get(_),R=CP(this.query,I)?I:null,F=!!A&&this.mutatedKeys.has(A.key),Y=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let ne=!1;A&&R?A.data.isEqual(R.data)?F!==Y&&(r.track({type:3,doc:R}),ne=!0):this.Qu(A,R)||(r.track({type:2,doc:R}),ne=!0,(h&&this.Lu(R,h)>0||m&&this.Lu(R,m)<0)&&(d=!0)):!A&&R?(r.track({type:0,doc:R}),ne=!0):A&&!R&&(r.track({type:1,doc:A}),ne=!0,(h||m)&&(d=!0)),ne&&(R?(c=c.add(R),s=Y?s.add(_):s.delete(_)):(c=c.delete(_),s=s.delete(_)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const _="F"===this.query.limitType?c.last():c.first();c=c.delete(_.key),s=s.delete(_.key),r.track({type:1,doc:_})}return{Uu:c,Gu:r,Mi:d,mutatedKeys:s}}Qu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Gu.pu();s.sort((m,_)=>function(I,A){const R=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It()}};return R(I)-R(A)}(m.type,_.type)||this.Lu(m.doc,_.doc)),this.ju(r);const c=n?this.Wu():[],d=0===this.Bu.size&&this.current?1:0,h=d!==this.$u;return this.$u=d,0!==s.length||h?{snapshot:new Qy(this.query,e.Uu,i,s,e.mutatedKeys,0===d,h,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new A$,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(n=>this.Fu=this.Fu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Fu=this.Fu.delete(n)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=gn(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const n=[];return e.forEach(r=>{this.Bu.has(r)||n.push(new R$(r))}),this.Bu.forEach(r=>{e.has(r)||n.push(new N$(r))}),n}Ju(e){this.Fu=e.ji,this.Bu=gn();const n=this.Ku(e.documents);return this.applyChanges(n,!0)}Yu(){return Qy.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class c9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class l9{constructor(e){this.key=e,this.Xu=!1}}class d9{constructor(e,n,r,i,s,c){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.Zu={},this.tc=new Zf(d=>Kj(d),Nw),this.ec=new Map,this.nc=new Set,this.sc=new gi(ut.comparator),this.ic=new Map,this.rc=new FP,this.oc={},this.uc=new Map,this.cc=og.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function f9(t,e){return DO.apply(this,arguments)}function DO(){return DO=(0,Te.Z)(function*(t,e){const n=HO(t);let r,i;const s=n.tc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Yu();else{const c=yield Hy(n.localStore,qo(e));n.isPrimaryClient&&iS(n.remoteStore,c);const d=n.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield wO(n,e,r,"current"===d)}return i}),DO.apply(this,arguments)}function wO(t,e,n,r){return EO.apply(this,arguments)}function EO(){return EO=(0,Te.Z)(function*(t,e,n,r){t.hc=(_,I,A)=>{return(R=(0,Te.Z)(function*(F,Y,ne,_e){let je=Y.view.Ku(ne);je.Mi&&(je=yield eS(F.localStore,Y.query,!1).then(({documents:rt})=>Y.view.Ku(rt,je)));const fe=_e&&_e.targetChanges.get(Y.targetId),$e=Y.view.applyChanges(je,F.isPrimaryClient,fe);return RO(F,Y.targetId,$e.zu),$e.snapshot}),function(F,Y,ne,_e){return R.apply(this,arguments)})(t,_,I,A);var R};const i=yield eS(t.localStore,e,!0),s=new P$(e,i.ji),c=s.Ku(i.documents),d=Lw.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),h=s.applyChanges(c,t.isPrimaryClient,d);RO(t,n,h.zu);const m=new c9(e,n,s);return t.tc.set(e,m),t.ec.has(n)?t.ec.get(n).push(e):t.ec.set(n,[e]),h.snapshot}),EO.apply(this,arguments)}function h9(t,e){return IO.apply(this,arguments)}function IO(){return IO=(0,Te.Z)(function*(t,e){const n=ft(t),r=n.tc.get(e),i=n.ec.get(r.targetId);if(i.length>1)return n.ec.set(r.targetId,i.filter(s=>!Nw(s,e))),void n.tc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Wy(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Jw(n.remoteStore,r.targetId),Yy(n,r.targetId)}).catch(Hf))):(Yy(n,r.targetId),yield Wy(n.localStore,r.targetId,!0))}),IO.apply(this,arguments)}function CO(){return CO=(0,Te.Z)(function*(t,e,n){const r=WO(t);try{const i=yield function(s,c){const d=ft(s),h=Hr.now(),m=c.reduce((A,R)=>A.add(R.key),gn());let _,I;return d.persistence.runTransaction("Locally write mutations","readwrite",A=>{let R=Ko(),F=gn();return d.Ui.getEntries(A,m).next(Y=>{R=Y,R.forEach((ne,_e)=>{_e.isValidDocument()||(F=F.add(ne))})}).next(()=>d.localDocuments.getOverlayedDocuments(A,R)).next(Y=>{_=Y;const ne=[];for(const _e of c){const je=C7(_e,_.get(_e.key).overlayedDocument);null!=je&&ne.push(new Ed(_e.key,je,Bj(je.value.mapValue),ri.exists(!0)))}return d.mutationQueue.addMutationBatch(A,h,ne,c)}).next(Y=>{I=Y;const ne=Y.applyToLocalDocumentSet(_,F);return d.documentOverlayCache.saveOverlays(A,Y.batchId,ne)})}).then(()=>({batchId:I.batchId,changes:hU(_)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,c,d){let h=s.oc[s.currentUser.toKey()];h||(h=new gi(un)),h=h.insert(c,d),s.oc[s.currentUser.toKey()]=h}(r,i.batchId,n),yield Id(r,i.changes),yield zy(r.remoteStore)}catch(i){const s=Ky(i,"Failed to persist write");n.reject(s)}}),CO.apply(this,arguments)}function O$(t,e){return bO.apply(this,arguments)}function bO(){return bO=(0,Te.Z)(function*(t,e){const n=ft(t);try{const r=yield kK(n.localStore,e);e.targetChanges.forEach((i,s)=>{const c=n.ic.get(s);c&&(en(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?en(c.Xu):i.removedDocuments.size>0&&(en(c.Xu),c.Xu=!1))}),yield Id(n,r,e)}catch(r){yield Hf(r)}}),bO.apply(this,arguments)}function k$(t,e,n){const r=ft(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.tc.forEach((s,c)=>{const d=c.view.Eu(e);d.snapshot&&i.push(d.snapshot)}),function(s,c){const d=ft(s);d.onlineState=c;let h=!1;d.queries.forEach((m,_)=>{for(const I of _.listeners)I.Eu(c)&&(h=!0)}),h&&vO(d)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function g9(t,e,n){return TO.apply(this,arguments)}function TO(){return TO=(0,Te.Z)(function*(t,e,n){const r=ft(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ic.get(e),s=i&&i.key;if(s){let c=new gi(ut.comparator);c=c.insert(s,Er.newNoDocument(s,Xt.min()));const d=gn().add(s),h=new Fw(Xt.min(),new Map,new cr(un),c,d);yield O$(r,h),r.sc=r.sc.remove(s),r.ic.delete(e),PO(r)}else yield Wy(r.localStore,e,!1).then(()=>Yy(r,e,n)).catch(Hf)}),TO.apply(this,arguments)}function m9(t,e){return SO.apply(this,arguments)}function SO(){return SO=(0,Te.Z)(function*(t,e){const n=ft(t),r=e.batch.batchId;try{const i=yield OK(n.localStore,e);NO(n,r,null),xO(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Id(n,i)}catch(i){yield Hf(i)}}),SO.apply(this,arguments)}function y9(t,e,n){return AO.apply(this,arguments)}function AO(){return AO=(0,Te.Z)(function*(t,e,n){const r=ft(t);try{const i=yield function(s,c){const d=ft(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return d.mutationQueue.lookupMutationBatch(h,c).next(_=>(en(null!==_),m=_.keys(),d.mutationQueue.removeMutationBatch(h,_))).next(()=>d.mutationQueue.performConsistencyCheck(h)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(h,m,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>d.localDocuments.getDocuments(h,m))})}(r.localStore,e);NO(r,e,n),xO(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Id(r,i)}catch(i){yield Hf(i)}}),AO.apply(this,arguments)}function MO(){return MO=(0,Te.Z)(function*(t,e){const n=ft(t);Xf(n.remoteStore)||qe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const c=ft(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.mutationQueue.getHighestUnacknowledgedBatchId(d))}(n.localStore);if(-1===r)return void e.resolve();const i=n.uc.get(r)||[];i.push(e),n.uc.set(r,i)}catch(r){const i=Ky(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),MO.apply(this,arguments)}function xO(t,e){(t.uc.get(e)||[]).forEach(n=>{n.resolve()}),t.uc.delete(e)}function NO(t,e,n){const r=ft(t);let i=r.oc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function Yy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.ec.get(e))t.tc.delete(r),n&&t.Zu.lc(r,n);t.ec.delete(e),t.isPrimaryClient&&t.rc.us(e).forEach(r=>{t.rc.containsKey(r)||F$(t,r)})}function F$(t,e){t.nc.delete(e.path.canonicalString());const n=t.sc.get(e);null!==n&&(Jw(t.remoteStore,n),t.sc=t.sc.remove(e),t.ic.delete(n),PO(t))}function RO(t,e,n){for(const r of n)r instanceof N$?(t.rc.addReference(r.key,e),_9(t,r)):r instanceof R$?(qe("SyncEngine","Document no longer in limbo: "+r.key),t.rc.removeReference(r.key,e),t.rc.containsKey(r.key)||F$(t,r.key)):It()}function _9(t,e){const n=e.key,r=n.path.canonicalString();t.sc.get(n)||t.nc.has(r)||(qe("SyncEngine","New document in limbo: "+n),t.nc.add(r),PO(t))}function PO(t){for(;t.nc.size>0&&t.sc.size<t.maxConcurrentLimboResolutions;){const e=t.nc.values().next().value;t.nc.delete(e);const n=new ut(Hn.fromString(e)),r=t.cc.next();t.ic.set(r,new l9(n)),t.sc=t.sc.insert(n,r),iS(t.remoteStore,new Qf(qo(Py(n.path)),r,2,zo.ot))}}function Id(t,e,n){return OO.apply(this,arguments)}function OO(){return OO=(0,Te.Z)(function*(t,e,n){const r=ft(t),i=[],s=[],c=[];var d;r.tc.isEmpty()||(r.tc.forEach((d,h)=>{c.push(r.hc(h,e,n).then(m=>{if(m){r.isPrimaryClient&&r.sharedClientState.updateQueryState(h.targetId,m.fromCache?"not-current":"current"),i.push(m);const _=jP.Vi(h.targetId,m);s.push(_)}}))}),yield Promise.all(c),r.Zu.Go(i),yield(d=(0,Te.Z)(function*(h,m){const _=ft(h);try{yield _.persistence.runTransaction("notifyLocalViewChanges","readwrite",I=>de.forEach(m,A=>de.forEach(A.Pi,R=>_.persistence.referenceDelegate.addReference(I,A.targetId,R)).next(()=>de.forEach(A.vi,R=>_.persistence.referenceDelegate.removeReference(I,A.targetId,R)))))}catch(I){if(!Wf(I))throw I;qe("LocalStore","Failed to update sequence numbers: "+I)}for(const I of m){const A=I.targetId;if(!I.fromCache){const R=_.$i.get(A),Y=R.withLastLimboFreeSnapshotVersion(R.snapshotVersion);_.$i=_.$i.insert(A,Y)}}}),function(h,m){return d.apply(this,arguments)})(r.localStore,s))}),OO.apply(this,arguments)}function D9(t,e){return kO.apply(this,arguments)}function kO(){return kO=(0,Te.Z)(function*(t,e){const n=ft(t);if(!n.currentUser.isEqual(e)){qe("SyncEngine","User change. New user:",e.toKey());const r=yield l$(n.localStore,e);n.currentUser=e,(i=n).uc.forEach(c=>{c.forEach(d=>{d.reject(new We(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Id(n,r.Ki)}var i}),kO.apply(this,arguments)}function w9(t,e){const n=ft(t),r=n.ic.get(e);if(r&&r.Xu)return gn().add(r.key);{let i=gn();const s=n.ec.get(e);if(!s)return i;for(const c of s){const d=n.tc.get(c);i=i.unionWith(d.view.qu)}return i}}function E9(t,e){return FO.apply(this,arguments)}function FO(){return FO=(0,Te.Z)(function*(t,e){const n=ft(t),r=yield eS(n.localStore,e.query,!0),i=e.view.Ju(r);return n.isPrimaryClient&&RO(n,e.targetId,i.zu),i}),FO.apply(this,arguments)}function I9(t,e){return LO.apply(this,arguments)}function LO(){return LO=(0,Te.Z)(function*(t,e){const n=ft(t);return p$(n.localStore,e).then(r=>Id(n,r))}),LO.apply(this,arguments)}function C9(t,e,n,r){return VO.apply(this,arguments)}function VO(){return VO=(0,Te.Z)(function*(t,e,n,r){const i=ft(t),s=yield function(c,d){const h=ft(c),m=ft(h.mutationQueue);return h.persistence.runTransaction("Lookup mutation documents","readonly",_=>m.yn(_,d).next(I=>I?h.localDocuments.getDocuments(_,I):de.resolve(null)))}(i.localStore,e);var d;null!==s?("pending"===n?yield zy(i.remoteStore):"acknowledged"===n||"rejected"===n?(NO(i,e,r||null),xO(i,e),d=e,ft(ft(i.localStore).mutationQueue).In(d)):It(),yield Id(i,s)):qe("SyncEngine","Cannot apply mutation batch with id: "+e)}),VO.apply(this,arguments)}function BO(){return BO=(0,Te.Z)(function*(t,e){const n=ft(t);if(HO(n),WO(n),!0===e&&!0!==n.ac){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield L$(n,r.toArray());n.ac=!0,yield dO(n.remoteStore,!0);for(const s of i)iS(n.remoteStore,s)}else if(!1===e&&!1!==n.ac){const r=[];let i=Promise.resolve();n.ec.forEach((s,c)=>{n.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Yy(n,c),Wy(n.localStore,c,!0))),Jw(n.remoteStore,c)}),yield i,yield L$(n,r),function(s){const c=ft(s);c.ic.forEach((d,h)=>{Jw(c.remoteStore,h)}),c.rc.cs(),c.ic=new Map,c.sc=new gi(ut.comparator)}(n),n.ac=!1,yield dO(n.remoteStore,!1)}}),BO.apply(this,arguments)}function L$(t,e,n){return jO.apply(this,arguments)}function jO(){return jO=(0,Te.Z)(function*(t,e,n){const r=ft(t),i=[],s=[];for(const c of e){let d;const h=r.ec.get(c);if(h&&0!==h.length){d=yield Hy(r.localStore,qo(h[0]));for(const m of h){const _=r.tc.get(m),I=yield E9(r,_);I.snapshot&&s.push(I.snapshot)}}else{const m=yield h$(r.localStore,c);d=yield Hy(r.localStore,m),yield wO(r,V$(m),c,!1)}i.push(d)}return r.Zu.Go(s),i}),jO.apply(this,arguments)}function V$(t){return zj(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function T9(t){const e=ft(t);return ft(ft(e.localStore).persistence).Ri()}function S9(t,e,n,r){return UO.apply(this,arguments)}function UO(){return UO=(0,Te.Z)(function*(t,e,n,r){const i=ft(t);if(i.ac)return void qe("SyncEngine","Ignoring unexpected query state notification.");const s=i.ec.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const c=yield p$(i.localStore,Zj(s[0])),d=Fw.createSynthesizedRemoteEventForCurrentChange(e,"current"===n);yield Id(i,c,d);break}case"rejected":yield Wy(i.localStore,e,!0),Yy(i,e,r);break;default:It()}}),UO.apply(this,arguments)}function A9(t,e,n){return $O.apply(this,arguments)}function $O(){return $O=(0,Te.Z)(function*(t,e,n){const r=HO(t);if(r.ac){for(const i of e){if(r.ec.has(i)){qe("SyncEngine","Adding an already active target "+i);continue}const s=yield h$(r.localStore,i),c=yield Hy(r.localStore,s);yield wO(r,V$(s),c.targetId,!1),iS(r.remoteStore,c)}for(const i of n)r.ec.has(i)&&(yield Wy(r.localStore,i,!1).then(()=>{Jw(r.remoteStore,i),Yy(r,i)}).catch(Hf))}}),$O.apply(this,arguments)}function HO(t){const e=ft(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=O$.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g9.bind(null,e),e.Zu.Go=s9.bind(null,e.eventManager),e.Zu.lc=o9.bind(null,e.eventManager),e}function WO(t){const e=ft(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=m9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y9.bind(null,e),e}class B${constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,Te.Z)(function*(){n.wt=Qw(e.databaseInfo.databaseId),n.sharedClientState=n.dc(e),n.persistence=n._c(e),yield n.persistence.start(),n.localStore=n.wc(e),n.gcScheduler=n.mc(e,n.localStore),n.indexBackfillerScheduler=n.gc(e,n.localStore)})()}mc(e,n){return null}gc(e,n){return null}wc(e){return c$(this.persistence,new u$,e.initialUser,this.wt)}_c(e){return new o$(JT.Os,this.wt)}dc(e){return new v$}terminate(){var e=this;return(0,Te.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class j$ extends B${constructor(e,n,r){super(),this.yc=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield n().call(r,e),yield r.yc.initialize(r,e),yield WO(r.yc.syncEngine),yield zy(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return c$(this.persistence,new u$,e.initialUser,this.wt)}mc(e,n){return new _K(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}gc(e,n){const r=new n7(n,this.persistence);return new t7(e.asyncQueue,r)}_c(e){const n=BP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Zo.withCacheSize(this.cacheSizeBytes):Zo.DEFAULT;return new VP(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,D$(),rS(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new v$}}class x9 extends j${constructor(e,n){super(e,n,!1),this.yc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,Te.Z)(function*(){yield n().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof KP&&(r.sharedClientState.syncEngine={kr:C9.bind(null,i),Mr:S9.bind(null,i),Or:A9.bind(null,i),Ri:T9.bind(null,i),Nr:I9.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var s=(0,Te.Z)(function*(c){yield function b9(t,e){return BO.apply(this,arguments)}(r.yc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}dc(e){const n=D$();if(!KP.V(n))throw new We(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=BP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new KP(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class GO{initialize(e,n){var r=this;return(0,Te.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>k$(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=D9.bind(null,r.syncEngine),yield dO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new i9}createDatastore(e){const n=Qw(e.databaseInfo.databaseId),r=new $K(e.databaseInfo);return new GK(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=d=>k$(this.syncEngine,d,0),c=_$.V()?new _$:new BK,new qK(n,r,i,s,c);var n,r,i,s,c}createSyncEngine(e,n){return function(r,i,s,c,d,h,m){const _=new d9(r,i,s,c,d,h);return m&&(_.ac=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,Te.Z)(function*(n){const r=ft(n);qe("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Gy(r),r.du.shutdown(),r._u.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function U$(t,e=10240){let n=0;return{read:()=>(0,Te.Z)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,Te.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class oS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):Ei("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class N9{constructor(e,n){this.Ec=e,this.wt=n,this.metadata=new cs,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Te.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Te.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Te.Z)(function*(){const n=yield e.bc();if(null===n)return null;const r=e.Ac.decode(n),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const s=yield e.vc(i);return new a9(JSON.parse(s),n.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Te.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const n=e.Vc();n<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}vc(e){var n=this;return(0,Te.Z)(function*(){for(;n.buffer.length<e;)(yield n.Sc())&&n.Pc("Reached the end of bundle when more is expected.");const r=n.Ac.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Te.Z)(function*(){const n=yield e.Ec.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class R9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,Te.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new We(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Te.Z)(function*(s,c){const d=ft(s),h=jw(d.wt)+"/documents",m={documents:c.map(R=>Bw(d.wt,R))},_=yield d.ao("BatchGetDocuments",h,m,c.length),I=new Map;_.forEach(R=>{const F=function k7(t,e){return"found"in e?function(n,r){en(!!r.found);const i=ul(n,r.found.name),s=ls(r.found.updateTime),c=new ks({mapValue:{fields:r.found.fields}});return Er.newFoundDocument(i,s,c)}(t,e):"missing"in e?function(n,r){en(!!r.missing),en(!!r.readTime);const i=ul(n,r.missing),s=ls(r.readTime);return Er.newNoDocument(i,s)}(t,e):It()}(d.wt,R);I.set(F.key.toString(),F)});const A=[];return c.forEach(R=>{const F=I.get(R.toString());en(!!F),A.push(F)}),A}),function(s,c){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Te.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=ut.fromPath(i);e.mutations.push(new bP(s,e.precondition(s)))}),yield(r=(0,Te.Z)(function*(i,s){const c=ft(i),d=jw(c.wt)+"/documents",h={writes:s.map(m=>Uw(c.wt,m))};yield c.ro("Commit",d,h)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw It();n=Xt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new We(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?ri.updateTime(n):ri.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Xt.min()))throw new We(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ri.updateTime(n)}return ri.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class P9{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.Dc=r.maxAttempts,this.So=new ZP(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Te.Z)(function*(){const n=new R9(e.datastore),r=e.xc(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Nc(s)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const n=this.updateFunction(e);return!bw(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||!lU(n)}return!1}}class O9{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=us.UNAUTHENTICATED,this.clientId=wj.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Te.Z)(function*(d){qe("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(qe("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Te.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new We(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=Ky(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function $$(t,e){return zO.apply(this,arguments)}function zO(){return zO=(0,Te.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),qe("FirestoreClient","Initializing OfflineComponentProvider");const n=yield t.getConfiguration();yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,Te.Z)(function*(s){r.isEqual(s)||(yield l$(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}),zO.apply(this,arguments)}function H$(t,e){return qO.apply(this,arguments)}function qO(){return qO=(0,Te.Z)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield KO(t);qe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield t.getConfiguration();yield e.initialize(n,r),t.setCredentialChangeListener(i=>S$(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>S$(e.remoteStore,s)),t.onlineComponents=e}),qO.apply(this,arguments)}function KO(t){return ZO.apply(this,arguments)}function ZO(){return ZO=(0,Te.Z)(function*(t){return t.offlineComponents||(qe("FirestoreClient","Using default OfflineComponentProvider"),yield $$(t,new B$)),t.offlineComponents}),ZO.apply(this,arguments)}function aS(t){return QO.apply(this,arguments)}function QO(){return QO=(0,Te.Z)(function*(t){return t.onlineComponents||(qe("FirestoreClient","Using default OnlineComponentProvider"),yield H$(t,new GO)),t.onlineComponents}),QO.apply(this,arguments)}function W$(t){return KO(t).then(e=>e.persistence)}function uS(t){return KO(t).then(e=>e.localStore)}function G$(t){return aS(t).then(e=>e.remoteStore)}function YO(t){return aS(t).then(e=>e.syncEngine)}function Jy(t){return JO.apply(this,arguments)}function JO(){return JO=(0,Te.Z)(function*(t){const e=yield aS(t),n=e.eventManager;return n.onListen=f9.bind(null,e.syncEngine),n.onUnlisten=h9.bind(null,e.syncEngine),n}),JO.apply(this,arguments)}function z$(t,e,n={}){const r=new cs;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,s,c,d,h){const m=new oS({next:I=>{s.enqueueAndForget(()=>mO(i,_));const A=I.docs.has(c);!A&&I.fromCache?h.reject(new We(me.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&I.fromCache&&d&&"server"===d.source?h.reject(new We(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(I)},error:I=>h.reject(I)}),_=new _O(Py(c.path),m,{includeMetadataChanges:!0,Du:!0});return pO(i,_)}(yield Jy(t),t.asyncQueue,e,n,r)})),r.promise}function q$(t,e,n={}){const r=new cs;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function(i,s,c,d,h){const m=new oS({next:I=>{s.enqueueAndForget(()=>mO(i,_)),I.fromCache&&"server"===d.source?h.reject(new We(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(I)},error:I=>h.reject(I)}),_=new _O(c,m,{includeMetadataChanges:!0,Du:!0});return pO(i,_)}(yield Jy(t),t.asyncQueue,e,n,r)})),r.promise}const K$=new Map;function XO(t,e,n){if(!n)throw new We(me.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Z$(t,e,n,r){if(!0===e&&!0===r)throw new We(me.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Q$(t){if(!ut.isDocumentKey(t))throw new We(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Y$(t){if(ut.isDocumentKey(t))throw new We(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function cS(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(n=t).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof t?"a function":It()}function Un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new We(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cS(t);throw new We(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function J$(t,e){if(e<=0)throw new We(me.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class X${constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new We(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new We(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Z$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xw{constructor(e,n,r){this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new X$({}),this._settingsFrozen=!1,e instanceof Dd?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new We(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dd(i.options.projectId)}(e))}get app(){if(!this._app)throw new We(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new We(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new X$(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new H5;switch(n.type){case"gapi":const r=n.client;return en(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new q5(r,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new We(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=K$.get(e);n&&(qe("ComponentProvider","Removing Datastore"),K$.delete(e),n.terminate())}(this),Promise.resolve()}}class Ar{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ll(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ar(this.firestore,e,this._key)}}class Zs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zs(this.firestore,e,this._query)}}class ll extends Zs{constructor(e,n,r){super(e,n,Py(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ar(this.firestore,null,new ut(e))}withConverter(e){return new ll(this.firestore,e,this._path)}}function eH(t,e,...n){if(t=(0,On.m9)(t),XO("collection","path",e),t instanceof Xw){const r=Hn.fromString(e,...n);return Y$(r),new ll(t,null,r)}{if(!(t instanceof Ar||t instanceof ll))throw new We(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Hn.fromString(e,...n));return Y$(r),new ll(t.firestore,null,r)}}function lS(t,e,...n){if(t=(0,On.m9)(t),1===arguments.length&&(e=wj.I()),XO("doc","path",e),t instanceof Xw){const r=Hn.fromString(e,...n);return Q$(r),new Ar(t,null,new ut(r))}{if(!(t instanceof Ar||t instanceof ll))throw new We(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Hn.fromString(e,...n));return Q$(r),new Ar(t.firestore,t instanceof ll?t.converter:null,new ut(r))}}function tH(t,e){return t=(0,On.m9)(t),e=(0,On.m9)(e),(t instanceof Ar||t instanceof ll)&&(e instanceof Ar||e instanceof ll)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function nH(t,e){return t=(0,On.m9)(t),e=(0,On.m9)(e),t instanceof Zs&&e instanceof Zs&&t.firestore===e.firestore&&Nw(t._query,e._query)&&t.converter===e.converter}class G9{constructor(){this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new ZP(this,"async_queue_retry"),this.Kc=()=>{const n=rS();n&&qe("AsyncQueue","Visibility state changed to "+n.visibilityState),this.So.Eo()};const e=rS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const n=rS();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const n=new cs;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Oc.push(e),this.jc()))}jc(){var e=this;return(0,Te.Z)(function*(){if(0!==e.Oc.length){try{yield e.Oc[0](),e.Oc.shift(),e.So.reset()}catch(n){if(!Wf(n))throw n;qe("AsyncQueue","Operation failed with retryable error: "+n)}e.Oc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const n=this.Mc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Ei("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Mc=n,n}enqueueAfterDelay(e,n,r){this.Gc(),this.qc.indexOf(e)>-1&&(n=0);const i=hO.createAndSchedule(this,e,n,r,s=>this.Wc(s));return this.$c.push(i),i}Gc(){this.Bc&&It()}verifyOperationInProgress(){}zc(){var e=this;return(0,Te.Z)(function*(){let n;do{n=e.Mc,yield n}while(n!==e.Mc)})()}Hc(e){for(const n of this.$c)if(n.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.$c)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const n=this.$c.indexOf(e);this.$c.splice(n,1)}}function ek(t){return function(e,n){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(t)}class z9{constructor(){this._progressObserver={},this._taskCompletionResolver=new cs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wr extends Xw{constructor(e,n,r){super(e,n,r),this.type="firestore",this._queue=new G9,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||rH(this),this._firestoreClient.terminate()}}function K9(t=(0,md.getApp)()){return(0,md._getProvider)(t,"firestore").getImmediate()}function Ri(t){return t._firestoreClient||rH(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function rH(t){var e;const n=t._freezeSettings(),r=(s=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new s7(t._databaseId,s,t._persistenceKey,(d=n).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;t._firestoreClient=new O9(t._authCredentials,t._appCheckCredentials,t._queue,r)}function iH(t,e,n){const r=new cs;return t.asyncQueue.enqueue((0,Te.Z)(function*(){try{yield $$(t,n),yield H$(t,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(c=s).name?c.code===me.FAILED_PRECONDITION||c.code===me.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw s;Wp("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var c})).then(()=>r.promise)}function sH(t){if(t._initialized||t._terminated)throw new We(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Cd{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new We(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dl(Gi.fromBase64String(e))}catch(n){throw new We(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new dl(Gi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ug{constructor(e){this._methodName=e}}class dS{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new We(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new We(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return un(this._lat,e._lat)||un(this._long,e._long)}}const rZ=/^__.*__$/;class iZ{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Ed(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ly(e,this.data,n,this.fieldTransforms)}}class oH{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ed(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function aH(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It()}}class fS{constructor(e,n,r,i,s,c){this.settings=e,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new fS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return gS(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(aH(this.Zc)&&rZ.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class sZ{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.wt=r||Qw(e)}aa(e,n,r,i=!1){return new fS({Zc:e,methodName:n,ca:r,path:pi.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function cg(t){const e=t._freezeSettings(),n=Qw(t._databaseId);return new sZ(t._databaseId,!!e.ignoreUndefinedProperties,n)}function hS(t,e,n,r,i,s={}){const c=t.aa(s.merge||s.mergeFields?2:0,e,n,i);ik("Data must be an object, but it was:",c,r);const d=lH(r,c);let h,m;if(s.merge)h=new Aa(c.fieldMask),m=c.fieldTransforms;else if(s.mergeFields){const _=[];for(const I of s.mergeFields){const A=sk(e,I,n);if(!c.contains(A))throw new We(me.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);fH(_,A)||_.push(A)}h=new Aa(_),m=c.fieldTransforms.filter(I=>h.covers(I.field))}else h=null,m=c.fieldTransforms;return new iZ(new ks(d),h,m)}class e0 extends ug{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof e0}}function uH(t,e,n){return new fS({Zc:3,ca:e.settings.ca,methodName:t._methodName,na:n},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class tk extends ug{_toFieldTransform(e){return new Rw(e.path,new ky)}isEqual(e){return e instanceof tk}}class oZ extends ug{constructor(e,n){super(e),this.ha=n}_toFieldTransform(e){const n=uH(this,e,!0),r=this.ha.map(s=>lg(s,n)),i=new Jp(r);return new Rw(e.path,i)}isEqual(e){return this===e}}class aZ extends ug{constructor(e,n){super(e),this.ha=n}_toFieldTransform(e){const n=uH(this,e,!0),r=this.ha.map(s=>lg(s,n)),i=new Xp(r);return new Rw(e.path,i)}isEqual(e){return this===e}}class uZ extends ug{constructor(e,n){super(e),this.la=n}_toFieldTransform(e){const n=new Fy(e.wt,Xj(e.wt,this.la));return new Rw(e.path,n)}isEqual(e){return this===e}}function nk(t,e,n,r){const i=t.aa(1,e,n);ik("Data must be an object, but it was:",i,r);const s=[],c=ks.empty();qp(r,(h,m)=>{const _=pS(e,h,n);m=(0,On.m9)(m);const I=i.ia(_);if(m instanceof e0)s.push(_);else{const A=lg(m,I);null!=A&&(s.push(_),c.set(_,A))}});const d=new Aa(s);return new oH(c,d,i.fieldTransforms)}function rk(t,e,n,r,i,s){const c=t.aa(1,e,n),d=[sk(e,r,n)],h=[i];if(s.length%2!=0)throw new We(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<s.length;A+=2)d.push(sk(e,s[A])),h.push(s[A+1]);const m=[],_=ks.empty();for(let A=d.length-1;A>=0;--A)if(!fH(m,d[A])){const R=d[A];let F=h[A];F=(0,On.m9)(F);const Y=c.ia(R);if(F instanceof e0)m.push(R);else{const ne=lg(F,Y);null!=ne&&(m.push(R),_.set(R,ne))}}const I=new Aa(m);return new oH(_,I,c.fieldTransforms)}function cH(t,e,n,r=!1){return lg(n,t.aa(r?4:3,e))}function lg(t,e){if(dH(t=(0,On.m9)(t)))return ik("Unsupported field value:",e,t),lH(t,e);if(t instanceof ug)return function(n,r){if(!aH(r.Zc))throw r.oa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const c of n){let d=lg(c,r.ra(s));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if(null===(n=(0,On.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return Xj(r.wt,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const i=Hr.fromDate(n);return{timestampValue:Vw(r.wt,i)}}if(n instanceof Hr){const i=new Hr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Vw(r.wt,i)}}if(n instanceof dS)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof dl)return{bytesValue:DU(r.wt,n._byteString)};if(n instanceof Ar){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.oa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:TP(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.oa(`Unsupported field value: ${cS(n)}`)}(t,e)}function lH(t,e){const n={};return Mj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qp(t,(r,i)=>{const s=lg(i,e.ea(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function dH(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Hr||t instanceof dS||t instanceof dl||t instanceof Ar||t instanceof ug)}function ik(t,e,n){if(!dH(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=cS(n);throw e.oa("an object"===r?t+" a custom object":t+" "+r)}var r}function sk(t,e,n){if((e=(0,On.m9)(e))instanceof Cd)return e._internalPath;if("string"==typeof e)return pS(t,e);throw gS("Field path arguments must be of type string or ",t,!1,void 0,n)}const cZ=new RegExp("[~\\*/\\[\\]]");function pS(t,e,n){if(e.search(cZ)>=0)throw gS(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cd(...e.split("."))._internalPath}catch{throw gS(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gS(t,e,n,r,i){const s=r&&!r.isEmpty(),c=void 0!==i;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let h="";return(s||c)&&(h+=" (found",s&&(h+=` in field ${r}`),c&&(h+=` in document ${i}`),h+=")"),new We(me.INVALID_ARGUMENT,d+t+h)}function fH(t,e){return t.some(n=>n.isEqual(e))}class t0{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ar(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new lZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(mS("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class lZ extends t0{data(){return super.data()}}function mS(t,e){return"string"==typeof e?pS(t,e):e instanceof Cd?e._internalPath:e._delegate._internalPath}class dg{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bd extends t0{constructor(e,n,r,i,s,c){super(e,n,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new n0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(mS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class n0 extends bd{data(e={}){return super.data(e)}}class th{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new dg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new n0(this._firestore,this._userDataWriter,r.key,r,new dg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new We(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new n0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new dg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const d=new n0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new dg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,m=-1;return 0!==c.type&&(h=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),m=s.indexOf(c.doc.key)),{type:dZ(c.type),doc:d,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function dZ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It()}}function hH(t,e){return t instanceof bd&&e instanceof bd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof th&&e instanceof th&&t._firestore===e._firestore&&nH(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function pH(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new We(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r0{}function nh(t,...e){for(const n of e)t=n._apply(t);return t}class fZ extends r0{constructor(e,n,r){super(),this.fa=e,this.da=n,this._a=r,this.type="where"}_apply(e){const n=cg(e.firestore),r=function(i,s,c,d,h,m,_){let I;if(h.isKeyField()){if("array-contains"===m||"array-contains-any"===m)throw new We(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if("in"===m||"not-in"===m){DH(_,m);const R=[];for(const F of _)R.push(_H(d,i,F));I={arrayValue:{values:R}}}else I=_H(d,i,_)}else"in"!==m&&"not-in"!==m&&"array-contains-any"!==m||DH(_,m),I=cH(c,"where",_,"in"===m||"not-in"===m);const A=Fs.create(h,m,I);return function(R,F){if(F.ht()){const ne=wP(R);if(null!==ne&&!ne.isEqual(F.field))throw new We(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ne.toString()}' and '${F.field.toString()}'`);const _e=DP(R);null!==_e&&wH(0,F.field,_e)}const Y=function(ne,_e){for(const je of ne.filters)if(_e.indexOf(je.op)>=0)return je.op;return null}(R,function(ne){switch(ne){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(F.op));if(null!==Y)throw new We(me.INVALID_ARGUMENT,Y===F.op?`Invalid query. You cannot use more than one '${F.op.toString()}' filter.`:`Invalid query. You cannot use '${F.op.toString()}' filters with '${Y.toString()}' filters.`)}(i,A),A}(e._query,0,n,e.firestore._databaseId,this.fa,this.da,this._a);return new Zs(e.firestore,e.converter,function(i,s){const c=i.filters.concat([s]);return new wd(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class pZ extends r0{constructor(e,n){super(),this.fa=e,this.wa=n,this.type="orderBy"}_apply(e){const n=function(r,i,s){if(null!==r.startAt)throw new We(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new We(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Ry(i,s);return function(d,h){if(null===DP(d)){const m=wP(d);null!==m&&wH(0,m,h.field)}}(r,c),c}(e._query,this.fa,this.wa);return new Zs(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new wd(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}class gH extends r0{constructor(e,n,r){super(),this.type=e,this.ma=n,this.ga=r}_apply(e){return new Zs(e.firestore,e.converter,VT(e._query,this.ma,this.ga))}}class mH extends r0{constructor(e,n,r){super(),this.type=e,this.ya=n,this.pa=r}_apply(e){const n=vH(e,this.type,this.ya,this.pa);return new Zs(e.firestore,e.converter,(i=n,new wd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class yH extends r0{constructor(e,n,r){super(),this.type=e,this.ya=n,this.pa=r}_apply(e){const n=vH(e,this.type,this.ya,this.pa);return new Zs(e.firestore,e.converter,(i=n,new wd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function vH(t,e,n,r){if(n[0]=(0,On.m9)(n[0]),n[0]instanceof t0)return function(i,s,c,d,h){if(!d)throw new We(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const m=[];for(const _ of Oy(i))if(_.field.isKeyField())m.push(Qp(s,d.key));else{const I=d.data.field(_.field);if(yP(I))throw new We(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===I){const A=_.field.canonicalString();throw new We(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}m.push(I)}return new Kf(m,h)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=cg(t.firestore);return function(s,c,d,h,m,_){const I=s.explicitOrderBy;if(m.length>I.length)throw new We(me.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let R=0;R<m.length;R++){const F=m[R];if(I[R].field.isKeyField()){if("string"!=typeof F)throw new We(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof F}`);if(!EP(s)&&-1!==F.indexOf("/"))throw new We(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${F}' contains a slash.`);const Y=s.path.child(Hn.fromString(F));if(!ut.isDocumentKey(Y))throw new We(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${Y}' is not because it contains an odd number of segments.`);const ne=new ut(Y);A.push(Qp(c,ne))}else{const Y=cH(d,h,F);A.push(Y)}}return new Kf(A,_)}(t._query,t.firestore._databaseId,i,e,n,r)}}function _H(t,e,n){if("string"==typeof(n=(0,On.m9)(n))){if(""===n)throw new We(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!EP(e)&&-1!==n.indexOf("/"))throw new We(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Hn.fromString(n));if(!ut.isDocumentKey(r))throw new We(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qp(t,new ut(r))}if(n instanceof Ar)return Qp(t,n._key);throw new We(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cS(n)}.`)}function DH(t,e){if(!Array.isArray(t)||0===t.length)throw new We(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new We(me.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function wH(t,e,n){if(!n.isEqual(e))throw new We(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}const EZ={maxAttempts:5};class ok{convertValue(e,n="none"){switch(Zp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw It()}}convertObject(e,n){const r={};return qp(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new dS(mi(e.latitude),mi(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Nj(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Cw(e));default:return null}}convertTimestamp(e){const n=Gf(e);return new Hr(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Hn.fromString(e);en(xU(r));const i=new Dd(r.get(1),r.get(3)),s=new ut(r.popFirst(5));return i.isEqual(n)||Ei(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function yS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class IZ extends ok{constructor(e){super(),this.firestore=e}convertBytes(e){return new dl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ar(this.firestore,null,n)}}class EH{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=cg(e)}set(e,n,r){this._verifyNotCommitted();const i=rh(e,this._firestore),s=yS(i.converter,n,r),c=hS(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,ri.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=rh(e,this._firestore);let c;return c="string"==typeof(n=(0,On.m9)(n))||n instanceof Cd?rk(this._dataReader,"WriteBatch.update",s._key,n,r,i):nk(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(c.toMutation(s._key,ri.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=rh(e,this._firestore);return this._mutations=this._mutations.concat(new Vy(n._key,ri.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new We(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rh(t,e){if((t=(0,On.m9)(t)).firestore!==e)throw new We(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class fg extends ok{constructor(e){super(),this.firestore=e}convertBytes(e){return new dl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ar(this.firestore,null,n)}}function IH(t,e,n){t=Un(t,Ar);const r=Un(t.firestore,Wr),i=yS(t.converter,e,n);return Xy(r,[hS(cg(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,ri.none())])}function CH(t,e,n,...r){t=Un(t,Ar);const i=Un(t.firestore,Wr),s=cg(i);let c;return c="string"==typeof(e=(0,On.m9)(e))||e instanceof Cd?rk(s,"updateDoc",t._key,e,n,r):nk(s,"updateDoc",t._key,e),Xy(i,[c.toMutation(t._key,ri.exists(!0))])}function bH(t,...e){var n,r,i;t=(0,On.m9)(t);let s={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||ek(e[c])||(s=e[c],c++);const d={includeMetadataChanges:s.includeMetadataChanges};if(ek(e[c])){const I=e[c];e[c]=null===(n=I.next)||void 0===n?void 0:n.bind(I),e[c+1]=null===(r=I.error)||void 0===r?void 0:r.bind(I),e[c+2]=null===(i=I.complete)||void 0===i?void 0:i.bind(I)}let h,m,_;if(t instanceof Ar)m=Un(t.firestore,Wr),_=Py(t._key.path),h={next:I=>{e[c]&&e[c](ak(m,t,I))},error:e[c+1],complete:e[c+2]};else{const I=Un(t,Zs);m=Un(I.firestore,Wr),_=I._query;const A=new fg(m);h={next:R=>{e[c]&&e[c](new th(m,A,I,R))},error:e[c+1],complete:e[c+2]},pH(t._query)}return function(I,A,R,F){const Y=new oS(F),ne=new _O(A,Y,R);return I.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return pO(yield Jy(I),ne)})),()=>{Y.Tc(),I.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return mO(yield Jy(I),ne)}))}}(Ri(m),_,d,h)}function Xy(t,e){return function(n,r){const i=new cs;return n.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function p9(t,e,n){return CO.apply(this,arguments)}(yield YO(n),r,i)})),i.promise}(Ri(t),e)}function ak(t,e,n){const r=n.docs.get(e._key),i=new fg(t);return new bd(t,i,e._key,r,new dg(n.hasPendingWrites,n.fromCache),e.converter)}class PZ extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=cg(e)}get(e){const n=rh(e,this._firestore),r=new IZ(this._firestore);return this._transaction.lookup([n._key]).then(i=>{if(!i||1!==i.length)return It();const s=i[0];if(s.isFoundDocument())return new t0(this._firestore,r,s.key,s,n.converter);if(s.isNoDocument())return new t0(this._firestore,r,n._key,null,n.converter);throw It()})}set(e,n,r){const i=rh(e,this._firestore),s=yS(i.converter,n,r),c=hS(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,n,r,...i){const s=rh(e,this._firestore);let c;return c="string"==typeof(n=(0,On.m9)(n))||n instanceof Cd?rk(this._dataReader,"Transaction.update",s._key,n,r,i):nk(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,c),this}delete(e){const n=rh(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=rh(e,this._firestore),r=new fg(this._firestore);return super.get(e).then(i=>new bd(this._firestore,r,n._key,i._document,new dg(!1,!1),n.converter))}}function uk(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new We("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function SH(){if(typeof Uint8Array>"u")throw new We("unimplemented","Uint8Arrays are not available in this environment.")}function AH(){if(!function r7(){return typeof atob<"u"}())throw new We("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(t,e=!0){Ay=md.SDK_VERSION,(0,md._registerComponent)(new rT.wA("firestore",(n,{options:r})=>{const i=n.getProvider("app").getImmediate(),s=new Wr(i,new G5(n.getProvider("auth-internal")),new K5(n.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),(0,md.registerVersion)(vj,"3.4.14",t),(0,md.registerVersion)(vj,"3.4.14","esm2017")}();class s0{constructor(e){this._delegate=e}static fromBase64String(e){return AH(),new s0(dl.fromBase64String(e))}static fromUint8Array(e){return SH(),new s0(dl.fromUint8Array(e))}toBase64(){return AH(),this._delegate.toBase64()}toUint8Array(){return SH(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ck(t){return function $Z(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class HZ{enableIndexedDbPersistence(e,n){return function Z9(t,e){sH(t=Un(t,Wr));const n=Ri(t),r=t._freezeSettings(),i=new GO;return iH(n,i,new j$(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function Q9(t){sH(t=Un(t,Wr));const e=Ri(t),n=t._freezeSettings(),r=new GO;return iH(e,r,new x9(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Y9(t){if(t._initialized&&!t._terminated)throw new We(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new cs;return t._queue.enqueueAndForgetEvenWhileRestricted((0,Te.Z)(function*(){try{yield(n=(0,Te.Z)(function*(r){if(!fc.V())return Promise.resolve();const i=r+"main";yield fc.delete(i)}),function(r){return n.apply(this,arguments)})(BP(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class MH{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Dd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Wp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function H9(t,e,n,r={}){var i;const s=(t=Un(t,Xw))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&Wp("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let c,d;if("string"==typeof r.mockUserToken)c=r.mockUserToken,d=us.MOCK_USER;else{c=(0,On.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new We(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new us(h)}t._authCredentials=new W5(new _j(c,d))}}(this._delegate,e,n,r)}enableNetwork(){return function X9(t){return function k9(t){return t.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield W$(t),n=yield G$(t);return e.setNetworkEnabled(!0),function(r){const i=ft(r);return i.lu.delete(0),Yw(i)}(n)}))}(Ri(t=Un(t,Wr)))}(this._delegate)}disableNetwork(){return function eZ(t){return function F9(t){return t.asyncQueue.enqueue((0,Te.Z)(function*(){const e=yield W$(t),n=yield G$(t);return e.setNetworkEnabled(!1),(r=(0,Te.Z)(function*(i){const s=ft(i);s.lu.add(0),yield Gy(s),s._u.set("Offline")}),function(i){return r.apply(this,arguments)})(n);var r}))}(Ri(t=Un(t,Wr)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Z$("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function J9(t){return function(e){const n=new cs;return e.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return function v9(t,e){return MO.apply(this,arguments)}(yield YO(e),n)})),n.promise}(Ri(t=Un(t,Wr)))}(this._delegate)}onSnapshotsInSync(e){return function RZ(t,e){return function B9(t,e){const n=new oS(e);return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield Jy(t),i=n,ft(r).Tu.add(i),void i.next();var r,i})),()=>{n.Tc(),t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return r=yield Jy(t),i=n,void ft(r).Tu.delete(i);var r,i}))}}(Ri(t=Un(t,Wr)),ek(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new We("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ev(this,eH(this._delegate,e))}catch(n){throw Eo(n,"collection()","Firestore.collection()")}}doc(e){try{return new Du(this,lS(this._delegate,e))}catch(n){throw Eo(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Io(this,function W9(t,e){if(t=Un(t,Xw),XO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new We(me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zs(t,null,(n=e,new wd(Hn.emptyPath(),n)));var n}(this._delegate,e))}catch(n){throw Eo(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function OZ(t,e,n){t=Un(t,Wr);const r=Object.assign(Object.assign({},EZ),n);return function(i){if(i.maxAttempts<1)throw new We(me.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function j9(t,e,n){const r=new cs;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){const i=yield(s=t,aS(s).then(c=>c.datastore));var s;new P9(t.asyncQueue,i,n,e,r).run()})),r.promise}(Ri(t),i=>e(new PZ(t,i)),r)}(this._delegate,n=>e(new xH(this,n)))}batch(){return Ri(this._delegate),new NH(new EH(this._delegate,e=>Xy(this._delegate,e)))}loadBundle(e){return function tZ(t,e){const n=Ri(t=Un(t,Wr)),r=new z9;return function U9(t,e,n,r){const i=function(s,c){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,h=function(h,m){if(h instanceof Uint8Array)return U$(h,m);if(h instanceof ArrayBuffer)return U$(new Uint8Array(h),m);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new N9(h,c);var h}(n,Qw(e));t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){!function M9(t,e,n){const r=ft(t);var i;(i=(0,Te.Z)(function*(s,c,d){try{const h=yield c.getMetadata();if(yield function(A,R){const F=ft(A),Y=ls(R.createTime);return F.persistence.runTransaction("hasNewerBundle","readonly",ne=>F.Ds.getBundleMetadata(ne,R.id)).then(ne=>!!ne&&ne.createTime.compareTo(Y)>=0)}(s.localStore,h))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(A=h).totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}),Promise.resolve(new Set);d._updateProgress(x$(h));const m=new u9(h,s.localStore,c.wt);let _=yield c.fc();for(;_;){const A=yield m.Nu(_);A&&d._updateProgress(A),_=yield c.fc()}const I=yield m.complete();return yield Id(s,I.Ou,void 0),yield function(A,R){const F=ft(A);return F.persistence.runTransaction("Save bundle","readwrite",Y=>F.Ds.saveBundleMetadata(Y,R))}(s.localStore,h),d._completeWith(I.progress),Promise.resolve(I.Mu)}catch(h){return Wp("SyncEngine",`Loading bundle failed with ${h}`),d._failWith(h),Promise.resolve(new Set)}var A}),function(s,c,d){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield YO(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function nZ(t,e){return function $9(t,e){return t.asyncQueue.enqueue((0,Te.Z)(function*(){return function(n,r){const i=ft(n);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ds.getNamedQuery(s,r))}(yield uS(t),e)}))}(Ri(t=Un(t,Wr)),e).then(n=>n?new Zs(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Io(this,n):null)}}class vS extends ok{constructor(e){super(),this.firestore=e}convertBytes(e){return new s0(new dl(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Du.forKey(n,this.firestore,null)}}class xH{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new vS(e)}get(e){const n=pg(e);return this._delegate.get(n).then(r=>new o0(this._firestore,new bd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=pg(e);return r?(uk("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=pg(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=pg(e);return this._delegate.delete(n),this}}class NH{constructor(e){this._delegate=e}set(e,n,r){const i=pg(e);return r?(uk("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=pg(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=pg(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class hg{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new n0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new a0(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=hg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new hg(e,new vS(e),n),i.set(n,s)),s}}hg.INSTANCES=new WeakMap;class Du{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new vS(e)}static forPath(e,n,r){if(e.length%2!=0)throw new We("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Du(n,new Ar(n._delegate,r,new ut(e)))}static forKey(e,n,r){return new Du(n,new Ar(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ev(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ev(this.firestore,eH(this._delegate,e))}catch(n){throw Eo(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,On.m9)(e))instanceof Ar&&tH(this._delegate,e)}set(e,n){n=uk("DocumentReference.set",n);try{return n?IH(this._delegate,e,n):IH(this._delegate,e)}catch(r){throw Eo(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?CH(this._delegate,e):CH(this._delegate,e,n,...r)}catch(i){throw Eo(i,"updateDoc()","DocumentReference.update()")}}delete(){return function xZ(t){return Xy(Un(t.firestore,Wr),[new Vy(t._key,ri.none())])}(this._delegate)}onSnapshot(...e){const n=RH(e),r=PH(e,i=>new o0(this.firestore,new bd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return bH(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function bZ(t){t=Un(t,Ar);const e=Un(t.firestore,Wr),n=Ri(e),r=new fg(e);return function L9(t,e){const n=new cs;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,s,c){try{const d=yield function(h,m){const _=ft(h);return _.persistence.runTransaction("read document","readonly",I=>_.localDocuments.getDocument(I,m))}(i,s);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new We(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const h=Ky(d,`Failed to get document '${s} from cache`);c.reject(h)}}),function(i,s,c){return r.apply(this,arguments)})(yield uS(t),e,n);var r})),n.promise}(n,t._key).then(i=>new bd(e,r,t._key,i,new dg(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function TZ(t){t=Un(t,Ar);const e=Un(t.firestore,Wr);return z$(Ri(e),t._key,{source:"server"}).then(n=>ak(e,t,n))}(this._delegate):function CZ(t){t=Un(t,Ar);const e=Un(t.firestore,Wr);return z$(Ri(e),t._key).then(n=>ak(e,t,n))}(this._delegate),n.then(r=>new o0(this.firestore,new bd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Du(this.firestore,this._delegate.withConverter(e?hg.getInstance(this.firestore,e):null))}}function Eo(t,e,n){return t.message=t.message.replace(e,n),t}function RH(t){for(const e of t)if("object"==typeof e&&!ck(e))return e;return{}}function PH(t,e){var n,r;let i;return i=ck(t[0])?t[0]:ck(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class o0{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Du(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return hH(this._delegate,e._delegate)}}class a0 extends o0{data(e){const n=this._delegate.data(e);return function $5(t,e){t||It()}(void 0!==n),n}}class Io{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new vS(e)}where(e,n,r){try{return new Io(this.firestore,nh(this._delegate,function hZ(t,e,n){const r=e,i=mS("where",t);return new fZ(i,r,n)}(e,n,r)))}catch(i){throw Eo(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Io(this.firestore,nh(this._delegate,function gZ(t,e="asc"){const n=e,r=mS("orderBy",t);return new pZ(r,n)}(e,n)))}catch(r){throw Eo(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Io(this.firestore,nh(this._delegate,function mZ(t){return J$("limit",t),new gH("limit",t,"F")}(e)))}catch(n){throw Eo(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Io(this.firestore,nh(this._delegate,function yZ(t){return J$("limitToLast",t),new gH("limitToLast",t,"L")}(e)))}catch(n){throw Eo(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Io(this.firestore,nh(this._delegate,function vZ(...t){return new mH("startAt",t,!0)}(...e)))}catch(n){throw Eo(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Io(this.firestore,nh(this._delegate,function _Z(...t){return new mH("startAfter",t,!1)}(...e)))}catch(n){throw Eo(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Io(this.firestore,nh(this._delegate,function DZ(...t){return new yH("endBefore",t,!1)}(...e)))}catch(n){throw Eo(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Io(this.firestore,nh(this._delegate,function wZ(...t){return new yH("endAt",t,!0)}(...e)))}catch(n){throw Eo(n,"endAt()","Query.endAt()")}}isEqual(e){return nH(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function AZ(t){t=Un(t,Zs);const e=Un(t.firestore,Wr),n=Ri(e),r=new fg(e);return function V9(t,e){const n=new cs;return t.asyncQueue.enqueueAndForget((0,Te.Z)(function*(){return(r=(0,Te.Z)(function*(i,s,c){try{const d=yield eS(i,s,!0),h=new P$(s,d.ji),m=h.Ku(d.documents),_=h.applyChanges(m,!1);c.resolve(_.snapshot)}catch(d){const h=Ky(d,`Failed to execute query '${s} against cache`);c.reject(h)}}),function(i,s,c){return r.apply(this,arguments)})(yield uS(t),e,n);var r})),n.promise}(n,t._query).then(i=>new th(e,r,t,i))}(this._delegate):"server"===e?.source?function MZ(t){t=Un(t,Zs);const e=Un(t.firestore,Wr),n=Ri(e),r=new fg(e);return q$(n,t._query,{source:"server"}).then(i=>new th(e,r,t,i))}(this._delegate):function SZ(t){t=Un(t,Zs);const e=Un(t.firestore,Wr),n=Ri(e),r=new fg(e);return pH(t._query),q$(n,t._query).then(i=>new th(e,r,t,i))}(this._delegate),n.then(r=>new lk(this.firestore,new th(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=RH(e),r=PH(e,i=>new lk(this.firestore,new th(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return bH(this._delegate,n,r)}withConverter(e){return new Io(this.firestore,this._delegate.withConverter(e?hg.getInstance(this.firestore,e):null))}}class GZ{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new a0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lk{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Io(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new a0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new GZ(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new a0(this._firestore,r))})}isEqual(e){return hH(this._delegate,e._delegate)}}class ev extends Io{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Du(this.firestore,e):null}doc(e){try{return new Du(this.firestore,void 0===e?lS(this._delegate):lS(this._delegate,e))}catch(n){throw Eo(n,"doc()","CollectionReference.doc()")}}add(e){return function NZ(t,e){const n=Un(t.firestore,Wr),r=lS(t),i=yS(t.converter,e);return Xy(n,[hS(cg(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,ri.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Du(this.firestore,n))}isEqual(e){return tH(this._delegate,e._delegate)}withConverter(e){return new ev(this.firestore,this._delegate.withConverter(e?hg.getInstance(this.firestore,e):null))}}function pg(t){return Un(t,Ar)}class dk{constructor(...e){this._delegate=new Cd(...e)}static documentId(){return new dk(pi.keyField().canonicalString())}isEqual(e){return(e=(0,On.m9)(e))instanceof Cd&&this._delegate._internalPath.isEqual(e._internalPath)}}class gg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function FZ(){return new tk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gg(e)}static delete(){const e=function kZ(){return new e0("deleteField")}();return e._methodName="FieldValue.delete",new gg(e)}static arrayUnion(...e){const n=function LZ(...t){return new oZ("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new gg(n)}static arrayRemove(...e){const n=function VZ(...t){return new aZ("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new gg(n)}static increment(e){const n=function BZ(t){return new uZ("increment",t)}(e);return n._methodName="FieldValue.increment",new gg(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const zZ={Firestore:MH,GeoPoint:dS,Timestamp:Hr,Blob:s0,Transaction:xH,WriteBatch:NH,DocumentReference:Du,DocumentSnapshot:o0,Query:Io,QueryDocumentSnapshot:a0,QuerySnapshot:lk,CollectionReference:ev,FieldPath:dk,FieldValue:gg,setLogLevel:function WZ(t){!function U5(t){$f.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};!function KZ(t){(function qZ(t,e){t.INTERNAL.registerComponent(new rT.wA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},zZ)))})(t,(e,n)=>new MH(e,n,new HZ)),t.registerVersion("@firebase/firestore-compat","0.1.23")}(Pq.Z);var OH=V(4220),ZZ=V(7958),_S=V(7498),QZ=V(1997);function ih(t,e){return(0,hd.e)((n,r)=>{let i=null,s=0,c=!1;const d=()=>c&&!i&&r.complete();n.subscribe((0,pd.x)(r,h=>{i?.unsubscribe();let m=0;const _=s++;(0,QZ.Xf)(t(h,_)).subscribe(i=(0,pd.x)(r,I=>r.next(e?e(h,I,_,m++):I),()=>{i=null,d()}))},()=>{c=!0,d()}))})}var YZ=V(9078);class JZ extends OH.x{constructor(e=1/0,n=1/0,r=YZ.l){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:c}=this;n||(r.push(e),!i&&r.push(s.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let c=0;c<s.length&&!e.closed;c+=r?1:2)e.next(s[c]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const c=n.now();let d=0;for(let h=1;h<r.length&&r[h]<=c;h+=2)d=h;d&&r.splice(0,d+1)}}}var XZ=V(6055);function kH(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,(0,XZ.B)({connector:()=>new JZ(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const FH=(0,V(496).d)(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});var tQ=V(9137);function nQ(t){return t<=0?()=>tQ.E:(0,hd.e)((e,n)=>{let r=0;e.subscribe((0,pd.x)(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function rQ(t){return(0,hd.e)((e,n)=>{let r=!1;e.subscribe((0,pd.x)(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function iQ(t=sQ){return(0,hd.e)((e,n)=>{let r=!1;e.subscribe((0,pd.x)(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function sQ(){return new FH}var aQ=V(2259);function LH(t,e){return(0,aQ.m)(e)?ih(()=>t,e):ih(()=>t)}var fk=V(4138),mg=V(9689);class tv{constructor(e){return e}}class VH{constructor(){return(0,mg.C6)()}}const hk=new Q.OlP("angularfire2._apps"),cQ={provide:tv,useFactory:function uQ(t){return t&&1===t.length?t[0]:new tv((0,mg.Mq)())},deps:[[new Q.FiY,hk]]},lQ={provide:VH,deps:[[new Q.FiY,hk]]};function dQ(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new tv(r)}}let fQ=(()=>{class t{constructor(n){(0,mg.KN)("angularfire",ur.q4.full,"core"),(0,mg.KN)("angularfire",ur.q4.full,"app"),(0,mg.KN)("angular",Q.q4F.full,n.toString())}}return t.\u0275fac=function(n){return new(n||t)(Q.LFG(Q.Lbi))},t.\u0275mod=Q.oAB({type:t}),t.\u0275inj=Q.cJS({providers:[cQ,lQ]}),t})();function hQ(t,...e){return{ngModule:fQ,providers:[{provide:hk,useFactory:dQ(t),multi:!0,deps:[Q.R0b,Q.zs3,ur.HU,...e]}]}}const pQ=(0,ur.u3)(mg.ZF,!0),BH=new Map,gQ={activated:!1,tokenObservers:[]},mQ={initialized:!1,enabled:!1};function hs(t){return BH.get(t)||gQ}function hc(t,e){BH.set(t,e)}function DS(){return mQ}class wQ{constructor(e,n,r,i,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return(0,Te.Z)(function*(){n.stop();try{n.pending=new On.BH,yield function EQ(t){return new Promise(e=>{setTimeout(e,t)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new On.BH,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const Co=new On.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function UH(t){if(!hs(t).activated)throw Co.create("use-before-activation",{appName:t.name})}function mk(t,e){return yk.apply(this,arguments)}function yk(){return yk=(0,Te.Z)(function*({url:t,body:e},n){var r,i;const s={"Content-Type":"application/json"},c=n.getImmediate({optional:!0});if(c){const R=yield c.getHeartbeatsHeader();R&&(s["X-Firebase-Client"]=R)}const d={method:"POST",body:JSON.stringify(e),headers:s};let h,m;try{h=yield fetch(t,d)}catch(R){throw Co.create("fetch-network-error",{originalErrorMessage:null===(r=R)||void 0===r?void 0:r.message})}if(200!==h.status)throw Co.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(R){throw Co.create("fetch-parse-error",{originalErrorMessage:null===(i=R)||void 0===i?void 0:i.message})}const _=m.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Co.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const I=1e3*Number(_[1]),A=Date.now();return{token:m.token,expireTimeMillis:A+I,issuedAtTimeMillis:A}}),yk.apply(this,arguments)}function TQ(t,e){const{projectId:n,appId:r,apiKey:i}=t.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const u0="firebase-app-check-store";let IS=null;function HH(){return IS||(IS=new Promise((t,e)=>{var n;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{t(i.target.result)},r.onerror=i=>{var s;e(Co.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(u0,{keyPath:"compositeKey"})}}catch(r){e(Co.create("storage-open",{originalErrorMessage:null===(n=r)||void 0===n?void 0:n.message}))}}),IS)}function vk(){return vk=(0,Te.Z)(function*(t,e){const r=(yield HH()).transaction(u0,"readwrite"),s=r.objectStore(u0).put({compositeKey:t,value:e});return new Promise((c,d)=>{s.onsuccess=h=>{c()},r.onerror=h=>{var m;d(Co.create("storage-set",{originalErrorMessage:null===(m=h.target.error)||void 0===m?void 0:m.message}))}})}),vk.apply(this,arguments)}const c0=new Bf.Yd("@firebase/app-check");function qH(t,e){return(0,On.hl)()?function xQ(t,e){return function WH(t,e){return vk.apply(this,arguments)}(function zH(t){return`${t.options.appId}-${t.name}`}(t),e)}(t,e).catch(n=>{c0.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function KH(){return DS().enabled}function ZH(){return Ek.apply(this,arguments)}function Ek(){return Ek=(0,Te.Z)(function*(){const t=DS();if(t.enabled&&t.token)return t.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Ek.apply(this,arguments)}const FQ={error:"UNKNOWN_ERROR"};function LQ(t){return On.US.encodeString(JSON.stringify(t),!1)}function CS(t){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,Te.Z)(function*(t,e=!1){const n=t.app;UH(n);const r=hs(n);let s,i=r.token;if(!i){const h=yield r.cachedTokenPromise;h&&bS(h)&&(i=h)}if(!e&&i&&bS(i))return{token:i.token};let d,c=!1;if(KH()){r.exchangeTokenPromise||(r.exchangeTokenPromise=mk(TQ(n,yield ZH()),t.heartbeatServiceProvider).then(m=>(r.exchangeTokenPromise=void 0,m)),c=!0);const h=yield r.exchangeTokenPromise;return yield qH(n,h),hc(n,Object.assign(Object.assign({},r),{token:h})),{token:h.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(h=>(r.exchangeTokenPromise=void 0,h)),c=!0),i=yield r.exchangeTokenPromise}catch(h){"appCheck/throttled"===h.code?c0.warn(h.message):c0.error(h),s=h}return i?(d={token:i.token},hc(n,Object.assign(Object.assign({},r),{token:i})),yield qH(n,i)):d=BQ(s),c&&YH(n,d),d}),Ik.apply(this,arguments)}function bk(t,e){const n=hs(t),r=n.tokenObservers.filter(i=>i.next!==e);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),hc(t,Object.assign(Object.assign({},n),{tokenObservers:r}))}function QH(t){const{app:e}=t,n=hs(e);let r=n.tokenRefresher;r||(r=function VQ(t){const{app:e}=t;return new wQ((0,Te.Z)(function*(){let r;if(r=hs(e).token?yield CS(t,!0):yield CS(t),r.error)throw r.error}),()=>!0,()=>{const n=hs(e);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(t),hc(e,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function YH(t,e){const n=hs(t).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function bS(t){return t.expireTimeMillis-Date.now()>0}function BQ(t){return{token:LQ(FQ),error:t}}class jQ{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=hs(this.app);for(const n of e)bk(this.app,n.next);return Promise.resolve()}}const s3="app-check-internal";!function eY(){(0,md._registerComponent)(new rT.wA("app-check",t=>function UQ(t,e){return new jQ(t,e)}(t.getProvider("app").getImmediate(),t.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(s3).initialize()})),(0,md._registerComponent)(new rT.wA(s3,t=>function $Q(t){return{getToken:e=>CS(t,e),addTokenListener:e=>function Ck(t,e,n,r){const{app:i}=t,s=hs(i),c={next:n,error:r,type:e};if(hc(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&bS(s.token)){const d=s.token;Promise.resolve().then(()=>{n({token:d.token}),QH(t)}).catch(()=>{})}s.cachedTokenPromise.then(()=>QH(t))}(t,"INTERNAL",e),removeTokenListener:e=>bk(t.app,e)}}(t.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,md.registerVersion)("@firebase/app-check","0.5.12")}();class SS{constructor(){return(0,ur.vb)("app-check")}}typeof window<"u"&&window;var sY=V(5456);const a3=new Q.OlP("angularfire2.auth.use-emulator"),u3=new Q.OlP("angularfire2.auth.settings"),c3=new Q.OlP("angularfire2.auth.tenant-id"),l3=new Q.OlP("angularfire2.auth.langugage-code"),d3=new Q.OlP("angularfire2.auth.use-device-language"),f3=new Q.OlP("angularfire.auth.persistence"),h3=(t,e,n,r,i,s,c,d)=>(0,cc.cc)(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const h=e.runOutsideAngular(()=>t.auth());if(n&&h.useEmulator(...n),r&&(h.tenantId=r),h.languageCode=i,s&&h.useDeviceLanguage(),c)for(const[m,_]of Object.entries(c))h.settings[m]=_;return d&&h.setPersistence(d),h},[n,r,i,s,c,d]);let p3=(()=>{class t{constructor(n,r,i,s,c,d,h,m,_,I,A,R){const F=new OH.x,Y=Ey(void 0).pipe((0,_S.Q)(c.outsideAngular),ih(()=>s.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,4824)))),(0,ba.U)(()=>(0,cc.on)(n,s,r)),(0,ba.U)(ne=>h3(ne,s,d,m,_,I,h,A)),kH({bufferSize:1,refCount:!1}));if(tB(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ey(null);else{Y.pipe(function oQ(t,e){const n=arguments.length>=2;return r=>r.pipe(t?zb((i,s)=>t(i,s,r)):B2.y,nQ(1),n?rQ(e):iQ(()=>new FH))}()).subscribe();const _e=Y.pipe(ih($e=>$e.getRedirectResult().then(rt=>rt,()=>null)),ur.iC,kH({bufferSize:1,refCount:!1})),je=Y.pipe(ih($e=>new n1.y(rt=>({unsubscribe:s.runOutsideAngular(()=>$e.onAuthStateChanged(bt=>rt.next(bt),bt=>rt.error(bt),()=>rt.complete()))})))),fe=Y.pipe(ih($e=>new n1.y(rt=>({unsubscribe:s.runOutsideAngular(()=>$e.onIdTokenChanged(bt=>rt.next(bt),bt=>rt.error(bt),()=>rt.complete()))}))));this.authState=_e.pipe(LH(je),(0,fk.R)(c.outsideAngular),(0,_S.Q)(c.insideAngular)),this.user=_e.pipe(LH(fe),(0,fk.R)(c.outsideAngular),(0,_S.Q)(c.insideAngular)),this.idToken=this.user.pipe(ih($e=>$e?(0,Vf.D)($e.getIdToken()):Ey(null))),this.idTokenResult=this.user.pipe(ih($e=>$e?(0,Vf.D)($e.getIdTokenResult()):Ey(null))),this.credential=(0,ZZ.T)(_e,F,this.authState.pipe(zb($e=>!$e))).pipe((0,ba.U)($e=>$e?.user?$e:null),(0,fk.R)(c.outsideAngular),(0,_S.Q)(c.insideAngular))}return(0,cc.pX)(this,Y,s,{spy:{apply:(ne,_e,je)=>{(ne.startsWith("signIn")||ne.startsWith("createUser"))&&je.then(fe=>F.next(fe))}}})}}return t.\u0275fac=function(n){return new(n||t)(Q.LFG(cc.Dh),Q.LFG(cc.xv,8),Q.LFG(Q.Lbi),Q.LFG(Q.R0b),Q.LFG(ur.HU),Q.LFG(a3,8),Q.LFG(u3,8),Q.LFG(c3,8),Q.LFG(l3,8),Q.LFG(d3,8),Q.LFG(f3,8),Q.LFG(SS,8))},t.\u0275prov=Q.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})();function g3(t,e){return function aY(t,e=i6.z){return new n1.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function xk(t,e){return g3(t,e).pipe((0,ba.U)(n=>({payload:n,type:"query"})))}function AS(t,e){return xk(t,e).pipe(i1(void 0),s1(),(0,ba.U)(([n,r])=>{const i=r.payload.docChanges(),s=i.map(c=>({type:c.type,payload:c}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,d)=>{const h=i.find(_=>_.doc.ref.isEqual(c.ref)),m=n?.payload.docs.find(_=>_.ref.isEqual(c.ref));h&&JSON.stringify(h.doc.metadata)===JSON.stringify(c.metadata)||!h&&m&&JSON.stringify(m.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),s}))}function m3(t,e,n){return AS(t,n).pipe(o1((r,i)=>function cY(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function lY(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Nk(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Nk(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Nk(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),function u6(t,e=B2.y){return t=t??c6,(0,hd.e)((n,r)=>{let i,s=!0;n.subscribe((0,pd.x)(r,c=>{const d=e(c);(s||!t(i,d))&&(s=!1,i=d,r.next(c))}))})}(),(0,ba.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Nk(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function y3(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class v3{constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=AS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,ba.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(i1(void 0),s1(),zb(([r,i])=>i.length>0||!r),(0,ba.U)(([r,i])=>i),ur.iC)}auditTrail(e){return this.stateChanges(e).pipe(o1((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=y3(e);return m3(this.query,n,this.afs.schedulers.outsideAngular).pipe(ur.iC)}valueChanges(e={}){return xk(this.query,this.afs.schedulers.outsideAngular).pipe((0,ba.U)(n=>n.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ur.iC)}get(e){return(0,Vf.D)(this.query.get(e)).pipe(ur.iC)}add(e){return this.ref.add(e)}doc(e){return new _3(this.ref.doc(e),this.afs)}}class _3{constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=E3(r,n);return new v3(i,s,this.afs)}snapshotChanges(){return function uY(t,e){return g3(t,e).pipe(i1(void 0),s1(),(0,ba.U)(([n,r])=>r.exists?n?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ur.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ba.U)(({payload:n})=>e.idField?Object.assign(Object.assign({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return(0,Vf.D)(this.ref.get(e)).pipe(ur.iC)}}class dY{constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?AS(this.query,this.afs.schedulers.outsideAngular).pipe((0,ba.U)(n=>n.filter(r=>e.indexOf(r.type)>-1)),zb(n=>n.length>0),ur.iC):AS(this.query,this.afs.schedulers.outsideAngular).pipe(ur.iC)}auditTrail(e){return this.stateChanges(e).pipe(o1((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=y3(e);return m3(this.query,n,this.afs.schedulers.outsideAngular).pipe(ur.iC)}valueChanges(e={}){return xk(this.query,this.afs.schedulers.outsideAngular).pipe((0,ba.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ur.iC)}get(e){return(0,Vf.D)(this.query.get(e)).pipe(ur.iC)}}const D3=new Q.OlP("angularfire2.enableFirestorePersistence"),w3=new Q.OlP("angularfire2.firestore.persistenceSettings"),fY=new Q.OlP("angularfire2.firestore.settings"),hY=new Q.OlP("angularfire2.firestore.use-emulator");function E3(t,e=(n=>n)){return{query:e(t),ref:t}}let I3=(()=>{class t{constructor(n,r,i,s,c,d,h,m,_,I,A,R,F,Y,ne,_e,je){this.schedulers=h;const fe=(0,cc.on)(n,d,r),$e=_;I&&h3(fe,d,A,F,Y,ne,R,_e),[this.firestore,this.persistenceEnabled$]=(0,cc.cc)(`${fe.name}.firestore`,"AngularFirestore",fe.name,()=>{const rt=d.runOutsideAngular(()=>fe.firestore());if(s&&rt.settings(s),$e&&rt.useEmulator(...$e),i&&!tB(c)){const bt=()=>{try{return(0,Vf.D)(rt.enablePersistence(m||void 0).then(()=>!0,()=>!1))}catch(hr){return typeof console<"u"&&console.warn(hr),Ey(!1)}};return[rt,d.runOutsideAngular(bt)]}return[rt,Ey(!1)]},[s,$e,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:c}=E3(i,r),d=this.schedulers.ngZone.run(()=>s);return new v3(d,c,this)}collectionGroup(n,r){const i=r||(c=>c),s=this.firestore.collectionGroup(n);return new dY(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new _3(i,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(n){return new(n||t)(Q.LFG(cc.Dh),Q.LFG(cc.xv,8),Q.LFG(D3,8),Q.LFG(fY,8),Q.LFG(Q.Lbi),Q.LFG(Q.R0b),Q.LFG(ur.HU),Q.LFG(w3,8),Q.LFG(hY,8),Q.LFG(p3,8),Q.LFG(a3,8),Q.LFG(u3,8),Q.LFG(c3,8),Q.LFG(l3,8),Q.LFG(d3,8),Q.LFG(f3,8),Q.LFG(SS,8))},t.\u0275prov=Q.Yz7({token:t,factory:t.\u0275fac,providedIn:"any"}),t})(),pY=(()=>{class t{constructor(){sY.Z.registerVersion("angularfire",ur.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:D3,useValue:!0},{provide:w3,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Q.oAB({type:t}),t.\u0275inj=Q.cJS({providers:[I3]}),t})();function gY(t,e){if(1&t&&(ei(0,"li",10),jr(1),fr()),2&t){const n=e.$implicit;Wl(1),fp(" ",n.name," ")}}let mY=(()=>{class t{constructor(n){this.items=n.collection("items").valueChanges()}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)(Pt(I3))},t.\u0275cmp=js({type:t,selectors:[["app-list-mundial"]],decls:46,vars:3,consts:[[1,"container"],[1,"card"],[1,"card-body"],[1,"h3"],["align","right"],["type","button",1,"btn","btn-success","float","right"],[1,"table"],[1,"thead-dark"],["scope","row"],["class","text",4,"ngFor","ngForOf"],[1,"text"]],template:function(n,r){1&n&&(ei(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),jr(4,"Grupos conformados"),fr(),ei(5,"p",4)(6,"button",5),jr(7,"Agregar"),fr()(),ei(8,"table",6)(9,"thead",7)(10,"tr")(11,"th"),jr(12,"Grupo"),fr(),ei(13,"th"),jr(14,"Pa\xeds"),fr(),ei(15,"th"),jr(16,"Historia"),fr(),tc(17,"th"),fr()(),ei(18,"tbody")(19,"tr")(20,"th",8),jr(21,"1"),fr(),ei(22,"td"),jr(23,"Mark"),fr(),ei(24,"td"),jr(25,"Otto"),fr(),tc(26,"td"),fr(),ei(27,"tr")(28,"th",8),jr(29,"2"),fr(),ei(30,"td"),jr(31,"Jacob"),fr(),ei(32,"td"),jr(33,"Thornton"),fr(),tc(34,"td"),fr(),ei(35,"tr")(36,"th",8),jr(37,"3"),fr(),ei(38,"td"),jr(39,"Larry"),fr(),ei(40,"td"),jr(41,"the Bird"),fr(),tc(42,"td"),fr()()(),ei(43,"ul"),function wI(t,e,n,r,i,s,c,d){const h=Fe(),m=ct(),_=t+22,I=m.firstCreatePass?function BM(t,e,n,r,i,s,c,d,h){const m=e.consts,_=ql(e,t,4,c||null,so(m,d));pm(e,n,_,so(m,h)),za(e,_);const I=_.tViews=hm(2,_,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,m);return null!==e.queries&&(e.queries.template(e,_),I.queries=e.queries.embeddedTView(_)),_}(_,m,h,e,n,r,i,s,c):m.data[_];oo(I,!1);const A=h[11].createComment("");sf(m,h,A,I),ss(A,h),gf(h,h[_]=R_(A,h,A,I)),Fa(I)&&qc(m,h,I),null!=c&&Kc(h,I,d)}(44,gY,2,1,"li",9),function yN(t,e){const n=ct();let r;const i=t+22;n.firstCreatePass?(r=function ZF(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=es(r.type)),c=ir(Pt);try{const d=Ct(!1),h=s();return Ct(d),function EI(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,Fe(),i,h),h}finally{ir(c)}}(45,"async"),fr()()()()),2&n&&(Wl(44),Mm("ngForOf",vN(45,1,r.items)))},dependencies:[QL,eV]}),t})(),yY=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=js({type:t,selectors:[["app-navbar"]],decls:3,vars:0,consts:[[1,"navbar","navbar-dark","bg-dark"],["href","#",1,"navbar-brand"]],template:function(n,r){1&n&&(ei(0,"nav",0)(1,"a",1),jr(2,"App Mundial - Firebase"),fr()())}}),t})(),vY=(()=>{class t{constructor(){this.title="mundial"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=js({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(n,r){1&n&&tc(0,"app-navbar")(1,"app-list-mundial")},dependencies:[mY,yY]}),t})();const Rk_firebase={projectId:"ngfire-d9cdc",appId:"1:914911363777:web:91f06684f08c9669e60a40",storageBucket:"ngfire-d9cdc.appspot.com",locationId:"us-central",apiKey:"AIzaSyC_cQXw4TEKgHOHy5rrIoEj2jt2b8VxsqQ",authDomain:"ngfire-d9cdc.firebaseapp.com",messagingSenderId:"914911363777",measurementId:"G-B37EB4NCS8"};V(7017);class b3{constructor(){return(0,ur.vb)("auth")}}class kk{constructor(e){return e}}const T3="firestore",Fk=new Q.OlP("angularfire2.firestore-instances");function CY(t){return(e,n)=>{const r=e.runOutsideAngular(()=>t(n));return new kk(r)}}const bY={provide:class EY{constructor(){return(0,ur.vb)(T3)}},deps:[[new Q.FiY,Fk]]},TY={provide:kk,useFactory:function IY(t,e){const n=(0,ur.JM)(T3,t,e);return n&&new kk(n)},deps:[[new Q.FiY,Fk],tv]};let SY=(()=>{class t{constructor(){(0,mg.KN)("angularfire",ur.q4.full,"fst")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Q.oAB({type:t}),t.\u0275inj=Q.cJS({providers:[TY,bY]}),t})();function AY(t,...e){return{ngModule:SY,providers:[{provide:Fk,useFactory:CY(t),multi:!0,deps:[Q.R0b,Q.zs3,ur.HU,VH,[new Q.FiY,b3],[new Q.FiY,SS],...e]}]}}const MY=(0,ur.u3)(K9,!0);let xY=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=vs({type:t,bootstrap:[vY]}),t.\u0275inj=Rr({imports:[dG,r6,pY,cc.hO.initializeApp(Rk_firebase),hQ(()=>pQ(Rk_firebase)),AY(()=>MY())]}),t})();(function q3(){IL=!1})(),lG().bootstrapModule(xY).catch(t=>console.error(t))},2462:(Mt,Be,V)=>{V.d(Be,{Dh:()=>he,GT:()=>ve,cc:()=>Ge,hO:()=>it,on:()=>Z,pX:()=>ae,xv:()=>Se});var N=V(250),U=V(5456),O=V(7005);Mt=V.hmd(Mt);const ce=["ngOnDestroy"],ae=(ge,Xe,Ye,Le={})=>new Proxy(ge,{get:(Re,Ce)=>Ye.runOutsideAngular(()=>{var et;if(ge[Ce])return!(null===(et=Le?.spy)||void 0===et)&&et.get&&Le.spy.get(Ce,ge[Ce]),ge[Ce];if(ce.indexOf(Ce)>-1)return()=>{};const oe=Xe.toPromise().then(ye=>{const Ae=ye&&ye[Ce];return"function"==typeof Ae?Ae.bind(ye):Ae&&Ae.then?Ae.then(te=>Ye.run(()=>te)):Ye.run(()=>Ae)});return new Proxy(()=>{},{get:(ye,Ae)=>oe[Ae],apply:(ye,Ae,te)=>oe.then(le=>{var we;const ke=le&&le(...te);return!(null===(we=Le?.spy)||void 0===we)&&we.apply&&Le.spy.apply(Ce,te,ke),ke})})})}),ve=(ge,Xe)=>{Xe.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Le=>{Object.defineProperty(ge.prototype,Le,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Le))})})};class Ie{constructor(Xe){return Xe}}const he=new N.OlP("angularfire2.app.options"),Se=new N.OlP("angularfire2.app.name");function Z(ge,Xe,Ye){const Re="object"==typeof Ye&&Ye||{};Re.name=Re.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const et=U.Z.apps.filter(oe=>oe&&oe.name===Re.name)[0]||Xe.runOutsideAngular(()=>U.Z.initializeApp(ge,Re));try{JSON.stringify(ge)!==JSON.stringify(et.options)&&G("error",`${et.name} Firebase App already initialized with different options${Mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ie(et)}const G=(ge,...Xe)=>{(0,N.X6Q)()&&typeof console<"u"&&console[ge](...Xe)},ie={provide:Ie,useFactory:Z,deps:[he,N.R0b,[new N.FiY,Se]]};let it=(()=>{class ge{constructor(Ye){U.Z.registerVersion("angularfire",O.q4.full,"core"),U.Z.registerVersion("angularfire",O.q4.full,"app-compat"),U.Z.registerVersion("angular",N.q4F.full,Ye.toString())}static initializeApp(Ye,Le){return{ngModule:ge,providers:[{provide:he,useValue:Ye},{provide:Se,useValue:Le}]}}}return ge.\u0275fac=function(Ye){return new(Ye||ge)(N.LFG(N.Lbi))},ge.\u0275mod=N.oAB({type:ge}),ge.\u0275inj=N.cJS({providers:[ie]}),ge})();function Ge(ge,Xe,Ye,Le,Re){const[,Ce,et]=globalThis.\u0275AngularfireInstanceCache.find(oe=>oe[0]===ge)||[];if(Ce)return function Ue(ge,Xe){try{return ge.toString()===Xe.toString()}catch{return ge===Xe}}(Re,et)||(pe("error",`${Xe} was already initialized on the ${Ye} Firebase App with different settings.${Je?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Re,was:et})),Ce;{const oe=Le();return globalThis.\u0275AngularfireInstanceCache.push([ge,oe,Re]),oe}}const Je=!!Mt.hot,pe=(ge,...Xe)=>{(0,N.X6Q)()&&typeof console<"u"&&console[ge](...Xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7005:(Mt,Be,V)=>{V.d(Be,{q4:()=>Eh,iC:()=>Pc,HU:()=>Bd,vb:()=>qa,JM:()=>za,u3:()=>jd});var N=V(250),U=V(9689),O=V(5861),ce=V(4567),ae=V(9835),ve=V(9903),Ie=V(9794),he=V(1592);const Se="@firebase/installations",Z="0.5.12",ie=`w:${Z}`,it="FIS_v2",Xe=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(b){return b instanceof ae.ZR&&b.code.includes("request-failed")}function Le({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Re(b){return{token:b.token,requestStatus:2,expiresIn:le(b.expiresIn),creationTime:Date.now()}}function Ce(b,T){return et.apply(this,arguments)}function et(){return(et=(0,O.Z)(function*(b,T){const B=(yield T.json()).error;return Xe.create("request-failed",{requestName:b,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function oe({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function ye(b,{refreshToken:T}){const x=oe(b);return x.append("Authorization",function we(b){return`${it} ${b}`}(T)),x}function Ae(b){return te.apply(this,arguments)}function te(){return(te=(0,O.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function le(b){return Number(b.replace("s","000"))}function ke(b,T){return He.apply(this,arguments)}function He(){return(He=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:T},{fid:x}){const B=Le(b),ee=oe(b),ue=T.getImmediate({optional:!0});if(ue){const _t=yield ue.getHeartbeatsHeader();_t&&ee.append("x-firebase-client",_t)}const Qe={method:"POST",headers:ee,body:JSON.stringify({fid:x,authVersion:it,appId:b.appId,sdkVersion:ie})},mt=yield Ae(()=>fetch(B,Qe));if(mt.ok){const _t=yield mt.json();return{fid:_t.fid||x,registrationStatus:2,refreshToken:_t.refreshToken,authToken:Re(_t.authToken)}}throw yield Ce("Create Installation",mt)})).apply(this,arguments)}function Ne(b){return new Promise(T=>{setTimeout(T,b)})}const wn=/^[cdef][\w-]{21}$/;function tt(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function hn(b){return function Tt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return wn.test(x)?x:""}catch{return""}}function tr(b){return`${b.appName}!${b.appId}`}const Bn=new Map;function Ht(b,T){const x=tr(b);Zt(x,T),function Ls(b,T){const x=function Kn(){return!yi&&"BroadcastChannel"in self&&(yi=new BroadcastChannel("[Firebase] FID Change"),yi.onmessage=b=>{Zt(b.data.key,b.data.fid)}),yi}();x&&x.postMessage({key:b,fid:T}),function Qs(){0===Bn.size&&yi&&(yi.close(),yi=null)}()}(x,T)}function Zt(b,T){const x=Bn.get(b);if(x)for(const B of x)B(T)}let yi=null;const Ir="firebase-installations-store";let Ys=null;function At(){return Ys||(Ys=(0,he.X3)("firebase-installations-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(Ir)}})),Ys}function Gr(b,T){return zi.apply(this,arguments)}function zi(){return(zi=(0,O.Z)(function*(b,T){const x=tr(b),ee=(yield At()).transaction(Ir,"readwrite"),ue=ee.objectStore(Ir),xe=yield ue.get(x);return yield ue.put(T,x),yield ee.done,(!xe||xe.fid!==T.fid)&&Ht(b,T.fid),T})).apply(this,arguments)}function En(b){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,O.Z)(function*(b){const T=tr(b),B=(yield At()).transaction(Ir,"readwrite");yield B.objectStore(Ir).delete(T),yield B.done})).apply(this,arguments)}function Pi(b,T){return ii.apply(this,arguments)}function ii(){return(ii=(0,O.Z)(function*(b,T){const x=tr(b),ee=(yield At()).transaction(Ir,"readwrite"),ue=ee.objectStore(Ir),xe=yield ue.get(x),Qe=T(xe);return void 0===Qe?yield ue.delete(x):yield ue.put(Qe,x),yield ee.done,Qe&&(!xe||xe.fid!==Qe.fid)&&Ht(b,Qe.fid),Qe})).apply(this,arguments)}function nr(b){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,O.Z)(function*(b){let T;const x=yield Pi(b.appConfig,B=>{const ee=bo(B),ue=si(b,ee);return T=ue.registrationPromise,ue.installationEntry});return""===x.fid?{installationEntry:yield T}:{installationEntry:x,registrationPromise:T}})).apply(this,arguments)}function bo(b){return ms(b||{fid:tt(),registrationStatus:0})}function si(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Xe.create("app-offline"))};const x={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},B=function $n(b,T){return or.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:B}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:gs(b)}:{installationEntry:T}}function or(){return(or=(0,O.Z)(function*(b,T){try{const x=yield ke(b,T);return Gr(b.appConfig,x)}catch(x){throw Ye(x)&&409===x.customData.serverCode?yield En(b.appConfig):yield Gr(b.appConfig,{fid:T.fid,registrationStatus:0}),x}})).apply(this,arguments)}function gs(b){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,O.Z)(function*(b){let T=yield pn(b.appConfig);for(;1===T.registrationStatus;)yield Ne(100),T=yield pn(b.appConfig);if(0===T.registrationStatus){const{installationEntry:x,registrationPromise:B}=yield nr(b);return B||x}return T})).apply(this,arguments)}function pn(b){return Pi(b,T=>{if(!T)throw Xe.create("installation-not-found");return ms(T)})}function ms(b){return function Oi(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function rr(b,T){return ki.apply(this,arguments)}function ki(){return(ki=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:T},x){const B=pr(b,x),ee=ye(b,x),ue=T.getImmediate({optional:!0});if(ue){const _t=yield ue.getHeartbeatsHeader();_t&&ee.append("x-firebase-client",_t)}const Qe={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:ie,appId:b.appId}})},mt=yield Ae(()=>fetch(B,Qe));if(mt.ok)return Re(yield mt.json());throw yield Ce("Generate Auth Token",mt)})).apply(this,arguments)}function pr(b,{fid:T}){return`${Le(b)}/${T}/authTokens:generate`}function X(b){return H.apply(this,arguments)}function H(){return(H=(0,O.Z)(function*(b,T=!1){let x;const B=yield Pi(b.appConfig,ue=>{if(!kt(ue))throw Xe.create("not-registered");const xe=ue.authToken;if(!T&&cn(xe))return ue;if(1===xe.requestStatus)return x=j(b,T),ue;{if(!navigator.onLine)throw Xe.create("app-offline");const Qe=xr(ue);return x=Me(b,Qe),Qe}});return x?yield x:B.authToken})).apply(this,arguments)}function j(b,T){return z.apply(this,arguments)}function z(){return(z=(0,O.Z)(function*(b,T){let x=yield q(b.appConfig);for(;1===x.authToken.requestStatus;)yield Ne(100),x=yield q(b.appConfig);const B=x.authToken;return 0===B.requestStatus?X(b,T):B})).apply(this,arguments)}function q(b){return Pi(b,T=>{if(!kt(T))throw Xe.create("not-registered");return function J(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Me(b,T){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,O.Z)(function*(b,T){try{const x=yield rr(b,T),B=Object.assign(Object.assign({},T),{authToken:x});return yield Gr(b.appConfig,B),x}catch(x){if(!Ye(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const B=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Gr(b.appConfig,B)}else yield En(b.appConfig);throw x}})).apply(this,arguments)}function kt(b){return void 0!==b&&2===b.registrationStatus}function cn(b){return 2===b.requestStatus&&!function kn(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function xr(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function $(){return($=(0,O.Z)(function*(b){const T=b,{installationEntry:x,registrationPromise:B}=yield nr(T);return B?B.catch(console.error):X(T).catch(console.error),x.fid})).apply(this,arguments)}function Ke(){return(Ke=(0,O.Z)(function*(b,T=!1){const x=b;return yield Ee(x),(yield X(x,T)).token})).apply(this,arguments)}function Ee(b){return nt.apply(this,arguments)}function nt(){return(nt=(0,O.Z)(function*(b){const{registrationPromise:T}=yield nr(b);T&&(yield T)})).apply(this,arguments)}function Wt(b){return Xe.create("missing-app-config-values",{valueName:b})}const wu="installations",Eu=b=>{const T=b.getProvider("app").getImmediate(),x=function Qo(b){if(!b||!b.options)throw Wt("App Configuration");if(!b.name)throw Wt("App Name");const T=["projectId","apiKey","appId"];for(const x of T)if(!b.options[x])throw Wt(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:x,heartbeatServiceProvider:(0,ce._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},Yo=b=>{const T=b.getProvider("app").getImmediate(),x=(0,ce._getProvider)(T,wu).getImmediate();return{getId:()=>function W(b){return $.apply(this,arguments)}(x),getToken:ee=>function De(b){return Ke.apply(this,arguments)}(x,ee)}};(function zr(){(0,ce._registerComponent)(new ve.wA(wu,Eu,"PUBLIC")),(0,ce._registerComponent)(new ve.wA("installations-internal",Yo,"PRIVATE"))})(),(0,ce.registerVersion)(Se,Z),(0,ce.registerVersion)(Se,Z,"esm2017");const Jo="@firebase/remote-config",wt=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Cu{constructor(T,x,B,ee){this.client=T,this.storage=x,this.storageCache=B,this.logger=ee}isCachedDataFresh(T,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-x,ee=B<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${ee}.`),ee}fetch(T){var x=this;return(0,O.Z)(function*(){const[B,ee]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(ee&&x.isCachedDataFresh(T.cacheMaxAgeMillis,B))return ee;T.eTag=ee&&ee.eTag;const ue=yield x.client.fetch(T),xe=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&xe.push(x.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(xe),ue})()}}function oi(b=navigator){return b.languages&&b.languages[0]||b.language}class ea{constructor(T,x,B,ee,ue,xe){this.firebaseInstallations=T,this.sdkVersion=x,this.namespace=B,this.projectId=ee,this.apiKey=ue,this.appId=xe}fetch(T){var x=this;return(0,O.Z)(function*(){var B,ee,ue;const[xe,Qe]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),_t=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ut={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Ct={sdk_version:x.sdkVersion,app_instance_id:xe,app_instance_id_token:Qe,app_id:x.appId,language_code:oi()},fi={method:"POST",headers:Ut,body:JSON.stringify(Ct)},_i=fetch(_t,fi),Za=new Promise((ji,Gs)=>{T.signal.addEventListener(()=>{const Fo=new Error("The operation was aborted.");Fo.name="AbortError",Gs(Fo)})});let ju;try{yield Promise.race([_i,Za]),ju=yield _i}catch(ji){let Gs="fetch-client-network";throw"AbortError"===(null===(B=ji)||void 0===B?void 0:B.name)&&(Gs="fetch-timeout"),wt.create(Gs,{originalErrorMessage:null===(ee=ji)||void 0===ee?void 0:ee.message})}let Ci=ju.status;const Ol=ju.headers.get("ETag")||void 0;let ga,ma;if(200===ju.status){let ji;try{ji=yield ju.json()}catch(Gs){throw wt.create("fetch-client-parse",{originalErrorMessage:null===(ue=Gs)||void 0===ue?void 0:ue.message})}ga=ji.entries,ma=ji.state}if("INSTANCE_STATE_UNSPECIFIED"===ma?Ci=500:"NO_CHANGE"===ma?Ci=304:("NO_TEMPLATE"===ma||"EMPTY_CONFIG"===ma)&&(ga={}),304!==Ci&&200!==Ci)throw wt.create("fetch-status",{httpStatus:Ci});return{status:Ci,eTag:Ol,config:ga}})()}}class qr{constructor(T,x){this.client=T,this.storage=x}fetch(T){var x=this;return(0,O.Z)(function*(){const B=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(T,B)})()}attemptFetch(T,{throttleEndTimeMillis:x,backoffCount:B}){var ee=this;return(0,O.Z)(function*(){yield function Ad(b,T){return new Promise((x,B)=>{const ee=Math.max(T-Date.now(),0),ue=setTimeout(x,ee);b.addEventListener(()=>{clearTimeout(ue),B(wt.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,x);try{const ue=yield ee.client.fetch(T);return yield ee.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function nv(b){if(!(b instanceof ae.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ue))throw ue;const xe={throttleEndTimeMillis:Date.now()+(0,ae.$s)(B),backoffCount:B+1};return yield ee.storage.setThrottleMetadata(xe),ee.attemptFetch(T,xe)}})()}}class iv{constructor(T,x,B,ee,ue){this.app=T,this._client=x,this._storageCache=B,this._storage=ee,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function pc(b,T){var x;const B=b.target.error||void 0;return wt.create(T,{originalErrorMessage:B&&(null===(x=B)||void 0===x?void 0:x.message)})}const Na="app_namespace_store";class ai{constructor(T,x,B,ee=function sv(){return new Promise((b,T)=>{var x;try{const B=indexedDB.open("firebase_remote_config",1);B.onerror=ee=>{T(pc(ee,"storage-open"))},B.onsuccess=ee=>{b(ee.target.result)},B.onupgradeneeded=ee=>{0===ee.oldVersion&&ee.target.result.createObjectStore(Na,{keyPath:"compositeKey"})}}catch(B){T(wt.create("storage-open",{originalErrorMessage:null===(x=B)||void 0===x?void 0:x.message}))}})}()){this.appId=T,this.appName=x,this.namespace=B,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var x=this;return(0,O.Z)(function*(){const B=yield x.openDbPromise;return new Promise((ee,ue)=>{var xe;const mt=B.transaction([Na],"readonly").objectStore(Na),_t=x.createCompositeKey(T);try{const Ut=mt.get(_t);Ut.onerror=Ct=>{ue(pc(Ct,"storage-get"))},Ut.onsuccess=Ct=>{const fi=Ct.target.result;ee(fi?fi.value:void 0)}}catch(Ut){ue(wt.create("storage-get",{originalErrorMessage:null===(xe=Ut)||void 0===xe?void 0:xe.message}))}})})()}set(T,x){var B=this;return(0,O.Z)(function*(){const ee=yield B.openDbPromise;return new Promise((ue,xe)=>{var Qe;const _t=ee.transaction([Na],"readwrite").objectStore(Na),Ut=B.createCompositeKey(T);try{const Ct=_t.put({compositeKey:Ut,value:x});Ct.onerror=fi=>{xe(pc(fi,"storage-set"))},Ct.onsuccess=()=>{ue()}}catch(Ct){xe(wt.create("storage-set",{originalErrorMessage:null===(Qe=Ct)||void 0===Qe?void 0:Qe.message}))}})})()}delete(T){var x=this;return(0,O.Z)(function*(){const B=yield x.openDbPromise;return new Promise((ee,ue)=>{var xe;const mt=B.transaction([Na],"readwrite").objectStore(Na),_t=x.createCompositeKey(T);try{const Ut=mt.delete(_t);Ut.onerror=Ct=>{ue(pc(Ct,"storage-delete"))},Ut.onsuccess=()=>{ee()}}catch(Ut){ue(wt.create("storage-delete",{originalErrorMessage:null===(xe=Ut)||void 0===xe?void 0:xe.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class ln{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,O.Z)(function*(){const x=T.storage.getLastFetchStatus(),B=T.storage.getLastSuccessfulFetchTimestampMillis(),ee=T.storage.getActiveConfig(),ue=yield x;ue&&(T.lastFetchStatus=ue);const xe=yield B;xe&&(T.lastSuccessfulFetchTimestampMillis=xe);const Qe=yield ee;Qe&&(T.activeConfig=Qe)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Gt(){return gc.apply(this,arguments)}function gc(){return(gc=(0,O.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}!function ov(){(0,ce._registerComponent)(new ve.wA("remote-config",function b(T,{instanceIdentifier:x}){const B=T.getProvider("app").getImmediate(),ee=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw wt.create("registration-window");if(!(0,ae.hl)())throw wt.create("indexed-db-unavailable");const{projectId:ue,apiKey:xe,appId:Qe}=B.options;if(!ue)throw wt.create("registration-project-id");if(!xe)throw wt.create("registration-api-key");if(!Qe)throw wt.create("registration-app-id");const mt=new ai(Qe,B.name,x=x||"firebase"),_t=new ln(mt),Ut=new Ie.Yd(Jo);Ut.logLevel=Ie.in.ERROR;const Ct=new ea(ee,ce.SDK_VERSION,x,ue,xe,Qe),fi=new qr(Ct,mt),_i=new Cu(fi,mt,_t,Ut),Za=new iv(B,_i,_t,mt,Ut);return function yt(b){const T=(0,ae.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Za),Za},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(Jo,"0.3.11"),(0,ce.registerVersion)(Jo,"0.3.11","esm2017")}();const Rr="/firebase-messaging-sw.js",Xs="/firebase-cloud-messaging-push-scope",ta="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",gl="google.c.a.c_id",ml="google.c.a.c_l",mc="google.c.a.ts",Bs="google.c.a.e";var gr=(()=>{return(b=gr||(gr={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",gr;var b})();function vt(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function yc(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(x),ee=new Uint8Array(B.length);for(let ue=0;ue<B.length;++ue)ee[ue]=B.charCodeAt(ue);return ee}const na="fcm_token_details_db",yl="fcm_token_object_Store";function br(b){return Zi.apply(this,arguments)}function Zi(){return Zi=(0,O.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(na))return null;let T=null;return(yield(0,he.X3)(na,5,{upgrade:(B=(0,O.Z)(function*(ee,ue,xe,Qe){var mt;if(ue<2||!ee.objectStoreNames.contains(yl))return;const _t=Qe.objectStore(yl),Ut=yield _t.index("fcmSenderId").get(b);if(yield _t.clear(),Ut)if(2===ue){const Ct=Ut;if(!Ct.auth||!Ct.p256dh||!Ct.endpoint)return;T={token:Ct.fcmToken,createTime:null!==(mt=Ct.createTime)&&void 0!==mt?mt:Date.now(),subscriptionOptions:{auth:Ct.auth,p256dh:Ct.p256dh,endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:"string"==typeof Ct.vapidKey?Ct.vapidKey:vt(Ct.vapidKey)}}}else if(3===ue){const Ct=Ut;T={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:vt(Ct.auth),p256dh:vt(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:vt(Ct.vapidKey)}}}else if(4===ue){const Ct=Ut;T={token:Ct.fcmToken,createTime:Ct.createTime,subscriptionOptions:{auth:vt(Ct.auth),p256dh:vt(Ct.p256dh),endpoint:Ct.endpoint,swScope:Ct.swScope,vapidKey:vt(Ct.vapidKey)}}}}),function(ue,xe,Qe,mt){return B.apply(this,arguments)})})).close(),yield(0,he.Lj)(na),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),Li(T)?T:null;var B}),Zi.apply(this,arguments)}function Li(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const ui="firebase-messaging-store";let _n=null;function eo(){return _n||(_n=(0,he.X3)("firebase-messaging-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(ui)}})),_n}function vi(b){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,O.Z)(function*(b){const T=Ao(b),B=yield(yield eo()).transaction(ui).objectStore(ui).get(T);if(B)return B;{const ee=yield br(b.appConfig.senderId);if(ee)return yield dn(b,ee),ee}})).apply(this,arguments)}function dn(b,T){return ra.apply(this,arguments)}function ra(){return(ra=(0,O.Z)(function*(b,T){const x=Ao(b),ee=(yield eo()).transaction(ui,"readwrite");return yield ee.objectStore(ui).put(T,x),yield ee.done,T})).apply(this,arguments)}function Ji(b){return ia.apply(this,arguments)}function ia(){return(ia=(0,O.Z)(function*(b){const T=Ao(b),B=(yield eo()).transaction(ui,"readwrite");yield B.objectStore(ui).delete(T),yield B.done})).apply(this,arguments)}function Ao({appConfig:b}){return b.appId}const Xn=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function dh(b,T){return js.apply(this,arguments)}function js(){return(js=(0,O.Z)(function*(b,T){var x;const B=yield Oe(b),ee=Kr(T),ue={method:"POST",headers:B,body:JSON.stringify(ee)};let xe;try{xe=yield(yield fetch(vl(b.appConfig),ue)).json()}catch(Qe){throw Xn.create("token-subscribe-failed",{errorInfo:null===(x=Qe)||void 0===x?void 0:x.toString()})}if(xe.error)throw Xn.create("token-subscribe-failed",{errorInfo:xe.error.message});if(!xe.token)throw Xn.create("token-subscribe-no-token");return xe.token})).apply(this,arguments)}function Md(b,T){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,O.Z)(function*(b,T){var x;const B=yield Oe(b),ee=Kr(T.subscriptionOptions),ue={method:"PATCH",headers:B,body:JSON.stringify(ee)};let xe;try{xe=yield(yield fetch(`${vl(b.appConfig)}/${T.token}`,ue)).json()}catch(Qe){throw Xn.create("token-update-failed",{errorInfo:null===(x=Qe)||void 0===x?void 0:x.toString()})}if(xe.error)throw Xn.create("token-update-failed",{errorInfo:xe.error.message});if(!xe.token)throw Xn.create("token-update-no-token");return xe.token})).apply(this,arguments)}function _c(b,T){return vs.apply(this,arguments)}function vs(){return(vs=(0,O.Z)(function*(b,T){var x;const ee={method:"DELETE",headers:yield Oe(b)};try{const xe=yield(yield fetch(`${vl(b.appConfig)}/${T}`,ee)).json();if(xe.error)throw Xn.create("token-unsubscribe-failed",{errorInfo:xe.error.message})}catch(ue){throw Xn.create("token-unsubscribe-failed",{errorInfo:null===(x=ue)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function vl({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Oe(b){return xt.apply(this,arguments)}function xt(){return(xt=(0,O.Z)(function*({appConfig:b,installations:T}){const x=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Kr({p256dh:b,auth:T,endpoint:x,vapidKey:B}){const ee={web:{endpoint:x,auth:T,p256dh:b}};return B!==ta&&(ee.web.applicationPubKey=B),ee}const Mn=6048e5;function In(b){return mr.apply(this,arguments)}function mr(){return(mr=(0,O.Z)(function*(b){const T=yield Pa(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:vt(T.getKey("auth")),p256dh:vt(T.getKey("p256dh"))},B=yield vi(b.firebaseDependencies);if(B){if(lr(B.subscriptionOptions,x))return Date.now()>=B.createTime+Mn?at(b,{token:B.token,createTime:Date.now(),subscriptionOptions:x}):B.token;try{yield _c(b.firebaseDependencies,B.token)}catch(ee){console.warn(ee)}return Qn(b.firebaseDependencies,x)}return Qn(b.firebaseDependencies,x)})).apply(this,arguments)}function Pr(b){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,O.Z)(function*(b){const T=yield vi(b.firebaseDependencies);T&&(yield _c(b.firebaseDependencies,T.token),yield Ji(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function at(b,T){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,O.Z)(function*(b,T){try{const x=yield Md(b.firebaseDependencies,T),B=Object.assign(Object.assign({},T),{token:x,createTime:Date.now()});return yield dn(b.firebaseDependencies,B),x}catch(x){throw yield Pr(b),x}})).apply(this,arguments)}function Qn(b,T){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,O.Z)(function*(b,T){const B={token:yield dh(b,T),createTime:Date.now(),subscriptionOptions:T};return yield dn(b,B),B.token})).apply(this,arguments)}function Pa(b,T){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,O.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:yc(T)})})).apply(this,arguments)}function lr(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function Cn(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Oa(b,T){if(!T.notification)return;b.notification={};const x=T.notification.title;x&&(b.notification.title=x);const B=T.notification.body;B&&(b.notification.body=B);const ee=T.notification.image;ee&&(b.notification.image=ee)}(T,b),function _s(b,T){!T.data||(b.data=T.data)}(T,b),function Ot(b,T){var x,B,ee,ue,xe;if(!(T.fcmOptions||null!==(x=T.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const Qe=null!==(ee=null===(B=T.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==ee?ee:null===(ue=T.notification)||void 0===ue?void 0:ue.click_action;Qe&&(b.fcmOptions.link=Qe);const mt=null===(xe=T.fcmOptions)||void 0===xe?void 0:xe.analytics_label;mt&&(b.fcmOptions.analyticsLabel=mt)}(T,b),T}function Dc(b){return"object"==typeof b&&!!b&&gl in b}function Mo(b,T){const x=[];for(let B=0;B<b.length;B++)x.push(b.charAt(B)),B<T.length&&x.push(T.charAt(B));return x.join("")}function to(b){return Xn.create("missing-app-config-values",{valueName:b})}Mo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Mo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yr{constructor(T,x,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function Tu(b){if(!b||!b.options)throw to("App Configuration Object");if(!b.name)throw to("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const B of T)if(!x[B])throw to(B);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:ee,installations:x,analyticsProvider:B}}_delete(){return Promise.resolve()}}function xo(b){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,O.Z)(function*(b){var T;try{b.swRegistration=yield navigator.serviceWorker.register(Rr,{scope:Xs}),b.swRegistration.update().catch(()=>{})}catch(x){throw Xn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=x)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function Vi(b,T){return Us.apply(this,arguments)}function Us(){return(Us=(0,O.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield xo(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Xn.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function _l(b,T){return xn.apply(this,arguments)}function xn(){return(xn=(0,O.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=ta)})).apply(this,arguments)}function ka(){return(ka=(0,O.Z)(function*(b,T){if(!navigator)throw Xn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Xn.create("permission-blocked");return yield _l(b,T?.vapidKey),yield Vi(b,T?.serviceWorkerRegistration),In(b)})).apply(this,arguments)}function Su(b,T,x){return No.apply(this,arguments)}function No(){return(No=(0,O.Z)(function*(b,T,x){const B=sa(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:x[gl],message_name:x[ml],message_time:x[mc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function sa(b){switch(b){case gr.NOTIFICATION_CLICKED:return"notification_open";case gr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $s(){return($s=(0,O.Z)(function*(b,T){const x=T.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===gr.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Cn(x)):b.onMessageHandler.next(Cn(x)));const B=x.data;Dc(B)&&"1"===B[Bs]&&(yield Su(b,x.messageType,B))})).apply(this,arguments)}const bn="@firebase/messaging",sn=b=>{const T=new yr(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function wc(b,T){return $s.apply(this,arguments)}(T,x)),T},Xi=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:B=>function Dl(b,T){return ka.apply(this,arguments)}(T,B)}};function Au(){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,O.Z)(function*(){try{yield(0,ae.eu)()}catch{return!1}return typeof window<"u"&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function wl(){(0,ce._registerComponent)(new ve.wA("messaging",sn,"PUBLIC")),(0,ce._registerComponent)(new ve.wA("messaging-internal",Xi,"PRIVATE")),(0,ce.registerVersion)(bn,"0.9.16"),(0,ce.registerVersion)(bn,"0.9.16","esm2017")}();const ro="analytics",Cl="firebase_id",Va="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",bl="https://www.googletagmanager.com/gtag/js",ci=new Ie.Yd("@firebase/analytics");function fh(b){return Promise.all(b.map(T=>T.catch(x=>x)))}function uv(b,T){const x=document.createElement("script");x.src=`${bl}?l=${b}&id=${T}`,x.async=!0,document.head.appendChild(x)}function Mu(b,T,x,B,ee,ue){return xu.apply(this,arguments)}function xu(){return(xu=(0,O.Z)(function*(b,T,x,B,ee,ue){const xe=B[ee];try{if(xe)yield T[xe];else{const mt=(yield fh(x)).find(_t=>_t.measurementId===ee);mt&&(yield T[mt.appId])}}catch(Qe){ci.error(Qe)}b("config",ee,ue)})).apply(this,arguments)}function oa(b,T,x,B,ee){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,O.Z)(function*(b,T,x,B,ee){try{let ue=[];if(ee&&ee.send_to){let xe=ee.send_to;Array.isArray(xe)||(xe=[xe]);const Qe=yield fh(x);for(const mt of xe){const _t=Qe.find(Ct=>Ct.measurementId===mt),Ut=_t&&T[_t.appId];if(!Ut){ue=[];break}ue.push(Ut)}}0===ue.length&&(ue=Object.values(T)),yield Promise.all(ue),b("event",B,ee||{})}catch(ue){ci.error(ue)}})).apply(this,arguments)}function es(){const b=window.document.getElementsByTagName("script");for(const T of Object.values(b))if(T.src&&T.src.includes(bl))return T;return null}const Jn=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ec=new class _g{constructor(T={},x=1e3){this.throttleMetadata=T,this.intervalMillis=x}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,x){this.throttleMetadata[T]=x}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function aa(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function mh(b){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,O.Z)(function*(b){var T;const{appId:x,apiKey:B}=b,ee={method:"GET",headers:aa(B)},ue=Va.replace("{app-id}",x),xe=yield fetch(ue,ee);if(200!==xe.status&&304!==xe.status){let Qe="";try{const mt=yield xe.json();null!==(T=mt.error)&&void 0!==T&&T.message&&(Qe=mt.error.message)}catch{}throw Jn.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:Qe})}return xe.json()})).apply(this,arguments)}function yh(b){return vr.apply(this,arguments)}function vr(){return(vr=(0,O.Z)(function*(b,T=Ec,x){const{appId:B,apiKey:ee,measurementId:ue}=b.options;if(!B)throw Jn.create("no-app-id");if(!ee){if(ue)return{measurementId:ue,appId:B};throw Jn.create("no-api-key")}const xe=T.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qe=new vh;return setTimeout((0,O.Z)(function*(){Qe.abort()}),void 0!==x?x:6e4),Ua({appId:B,apiKey:ee,measurementId:ue},xe,Qe,T)})).apply(this,arguments)}function Ua(b,T,x){return ua.apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:x},B,ee=Ec){var ue,xe;const{appId:Qe,measurementId:mt}=b;try{yield $a(B,T)}catch(_t){if(mt)return ci.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${null===(ue=_t)||void 0===ue?void 0:ue.message}]`),{appId:Qe,measurementId:mt};throw _t}try{const _t=yield mh(b);return ee.deleteThrottleMetadata(Qe),_t}catch(_t){const Ut=_t;if(!Ic(Ut)){if(ee.deleteThrottleMetadata(Qe),mt)return ci.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${mt} provided in the "measurementId" field in the local Firebase config. [${Ut?.message}]`),{appId:Qe,measurementId:mt};throw _t}const Ct=503===Number(null===(xe=Ut?.customData)||void 0===xe?void 0:xe.httpStatus)?(0,ae.$s)(x,ee.intervalMillis,30):(0,ae.$s)(x,ee.intervalMillis),fi={throttleEndTimeMillis:Date.now()+Ct,backoffCount:x+1};return ee.setThrottleMetadata(Qe,fi),ci.debug(`Calling attemptFetch again in ${Ct} millis`),Ua(b,fi,B,ee)}})).apply(this,arguments)}function $a(b,T){return new Promise((x,B)=>{const ee=Math.max(T-Date.now(),0),ue=setTimeout(x,ee);b.addEventListener(()=>{clearTimeout(ue),B(Jn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Ic(b){if(!(b instanceof ae.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class vh{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let sr,Tc;function Cc(){return(Cc=(0,O.Z)(function*(b,T,x,B,ee){if(ee&&ee.global)b("event",x,B);else{const ue=yield T;b("event",x,Object.assign(Object.assign({},B),{send_to:ue}))}})).apply(this,arguments)}function so(b){Tc=b}function Ru(b){sr=b}function Od(){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,O.Z)(function*(){var b;if(!(0,ae.hl)())return ci.warn(Jn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(T){return ci.warn(Jn.create("indexeddb-unavailable",{errorInfo:null===(b=T)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function la(){return(la=(0,O.Z)(function*(b,T,x,B,ee,ue,xe){var Qe;const mt=yh(b);mt.then(_i=>{x[_i.measurementId]=_i.appId,b.options.measurementId&&_i.measurementId!==b.options.measurementId&&ci.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${_i.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_i=>ci.error(_i)),T.push(mt);const _t=Od().then(_i=>{if(_i)return B.getId()}),[Ut,Ct]=yield Promise.all([mt,_t]);es()||uv(ue,Ut.measurementId),Tc&&(ee("consent","default",Tc),so(void 0)),ee("js",new Date);const fi=null!==(Qe=xe?.config)&&void 0!==Qe?Qe:{};return fi.origin="firebase",fi.update=!0,null!=Ct&&(fi[Cl]=Ct),ee("config",Ut.measurementId,fi),sr&&(ee("set",sr),Ru(void 0)),Ut.measurementId})).apply(this,arguments)}class Ha{constructor(T){this.app=T}_delete(){return delete li[this.app.options.appId],Promise.resolve()}}let li={},Al=[];const Wa={};let Fe,ct,Hs="dataLayer",kd=!1;function Ml(b,T,x){!function kr(){const b=[];if((0,ae.ru)()&&b.push("This is a browser extension environment."),(0,ae.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((B,ee)=>`(${ee+1}) ${B}`).join(" "),x=Jn.create("invalid-analytics-context",{errorInfo:T});ci.warn(x.message)}}();const B=b.options.appId;if(!B)throw Jn.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw Jn.create("no-api-key");ci.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=li[B])throw Jn.create("already-exists",{id:B});if(!kd){!function hh(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(Hs);const{wrappedGtag:ue,gtagCore:xe}=function gh(b,T,x,B,ee){let ue=function(...xe){window[B].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(ue=window[ee]),window[ee]=function ph(b,T,x,B){function ue(){return(ue=(0,O.Z)(function*(xe,Qe,mt){try{"event"===xe?yield oa(b,T,x,Qe,mt):"config"===xe?yield Mu(b,T,x,B,Qe,mt):"consent"===xe?b("consent","update",mt):b("set",Qe)}catch(_t){ci.error(_t)}})).apply(this,arguments)}return function ee(xe,Qe,mt){return ue.apply(this,arguments)}}(ue,b,T,x),{gtagCore:ue,wrappedGtag:window[ee]}}(li,Al,Wa,Hs,"gtag");ct=ue,Fe=xe,kd=!0}return li[B]=function Sc(b,T,x,B,ee,ue,xe){return la.apply(this,arguments)}(b,Al,Wa,T,Fe,Hs,x),new Ha(b)}function Fd(){return ao.apply(this,arguments)}function ao(){return(ao=(0,O.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}const dr="@firebase/analytics";!function Ac(){(0,ce._registerComponent)(new ve.wA(ro,(T,{options:x})=>Ml(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ce._registerComponent)(new ve.wA("analytics-internal",function b(T){try{const x=T.getProvider(ro).getImmediate();return{logEvent:(B,ee,ue)=>function Ws(b,T,x,B){b=(0,ae.m9)(b),function Nu(b,T,x,B,ee){return Cc.apply(this,arguments)}(ct,li[b.app.options.appId],T,x,B).catch(ee=>ci.error(ee))}(x,B,ee,ue)}}catch(x){throw Jn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ce.registerVersion)(dr,"0.8.0"),(0,ce.registerVersion)(dr,"0.8.0","esm2017")}();var Ou=V(9549),ku=V(328);const Nl=new class Fu extends ku.v{}(class da extends Ou.o{constructor(T,x){super(T,x),this.scheduler=T,this.work=x}schedule(T,x=0){return x>0?super.schedule(T,x):(this.delay=x,this.state=T,this.scheduler.flush(this),this)}execute(T,x){return x>0||this.closed?super.execute(T,x):this._execute(T,x)}requestAsyncId(T,x,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(T,x,B):T.flush(this)}});var Vd=V(7020),uo=V(7979),di=V(2259),Lu=V(2820),fa=V(6350),wh=V(5637),Mc=V(4138),xc=V(7498);const Eh=new N.GfV("7.4.1"),Bu="__angularfire_symbol__analyticsIsSupportedValue",Jr="__angularfire_symbol__analyticsIsSupported",ts="__angularfire_symbol__remoteConfigIsSupportedValue",qn="__angularfire_symbol__remoteConfigIsSupported",Ro="__angularfire_symbol__messagingIsSupportedValue",Nc="__angularfire_symbol__messagingIsSupported";function za(b,T,x){if(T){if(1===T.length)return T[0];const ue=T.filter(xe=>xe.app===x);if(1===ue.length)return ue[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[Jr]||(globalThis[Jr]=Fd().then(b=>globalThis[Bu]=b).catch(()=>globalThis[Bu]=!1)),globalThis[Nc]||(globalThis[Nc]=Au().then(b=>globalThis[Ro]=b).catch(()=>globalThis[Ro]=!1)),globalThis[qn]||(globalThis[qn]=Gt().then(b=>globalThis[ts]=b).catch(()=>globalThis[ts]=!1));const qa=(b,T)=>{const x=T?[T]:(0,U.C6)(),B=[];return x.forEach(ee=>{ee.container.getProvider(b).instances.forEach(xe=>{B.includes(xe)||B.push(xe)})}),B};function ns(){}class Po{constructor(T,x=Nl){this.zone=T,this.delegate=x}now(){return this.delegate.now()}schedule(T,x,B){const ee=this.zone;return this.delegate.schedule(function(xe){ee.runGuarded(()=>{T.apply(this,[xe])})},x,B)}}class Oo{constructor(T){this.zone=T,this.task=null}call(T,x){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ns,{},ns,ns)),x.pipe(function Vu(b,T,x){const B=(0,di.m)(b)||T||x?{next:b,error:T,complete:x}:b;return B?(0,Lu.e)((ee,ue)=>{var xe;null===(xe=B.subscribe)||void 0===xe||xe.call(B);let Qe=!0;ee.subscribe((0,fa.x)(ue,mt=>{var _t;null===(_t=B.next)||void 0===_t||_t.call(B,mt),ue.next(mt)},()=>{var mt;Qe=!1,null===(mt=B.complete)||void 0===mt||mt.call(B),ue.complete()},mt=>{var _t;Qe=!1,null===(_t=B.error)||void 0===_t||_t.call(B,mt),ue.error(mt)},()=>{var mt,_t;Qe&&(null===(mt=B.unsubscribe)||void 0===mt||mt.call(B)),null===(_t=B.finalize)||void 0===_t||_t.call(B)}))}):wh.y}({next:B,complete:B,error:B})).subscribe(T).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Bd=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Po(Zone.current)),this.insideAngular=x.run(()=>new Po(Zone.current,Vd.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(N.LFG(N.R0b))},b.\u0275prov=N.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Dn(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Ka(b){return Dn().ngZone.runOutsideAngular(()=>b())}function pa(b){return Dn().ngZone.run(()=>b())}function Pc(b){return Dn(),function Pl(b){return function(x){return(x=x.lift(new Oo(b.ngZone))).pipe((0,Mc.R)(b.outsideAngular),(0,xc.Q)(b.insideAngular))}}(Dn())(b)}const Ih=(b,T)=>function(){const B=arguments;return T&&setTimeout(()=>{"scheduled"===T.state&&T.invoke()},10),pa(()=>b.apply(void 0,B))},jd=(b,T)=>function(){let x;const B=arguments;for(let ue=0;ue<arguments.length;ue++)"function"==typeof B[ue]&&(T&&(x||(x=pa(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ns,{},ns,ns)))),B[ue]=Ih(B[ue],x));const ee=Ka(()=>b.apply(this,B));if(!T){if(ee instanceof uo.y){const ue=Dn();return ee.pipe((0,Mc.R)(ue.outsideAngular),(0,xc.Q)(ue.insideAngular))}return pa(()=>ee)}return ee instanceof uo.y?ee.pipe(Pc):ee instanceof Promise?pa(()=>new Promise((ue,xe)=>ee.then(Qe=>pa(()=>ue(Qe)),Qe=>pa(()=>xe(Qe))))):"function"==typeof ee&&x?function(){return setTimeout(()=>{x&&"scheduled"===x.state&&x.invoke()},10),ee.apply(this,arguments)}:pa(()=>ee)}},7017:(Mt,Be,V)=>{V.d(Be,{$:()=>vl,A:()=>G,B:()=>Ge,G:()=>Yo,H:()=>Ki,J:()=>qr,L:()=>cn,M:()=>gc,N:()=>ch,P:()=>Vd,Q:()=>gl,R:()=>Pu,T:()=>ml,U:()=>ta,V:()=>gr,W:()=>vt,X:()=>br,Y:()=>St,Z:()=>dh,_:()=>Md,a:()=>ja,a0:()=>In,a1:()=>Pr,a2:()=>at,a3:()=>Qn,a4:()=>Pa,a5:()=>lr,a6:()=>Oa,a7:()=>_s,a8:()=>Dc,a9:()=>Mo,aA:()=>mt,aB:()=>B,aC:()=>Oo,aD:()=>Po,aE:()=>ar,aI:()=>aa,aL:()=>Bs,aa:()=>xo,ab:()=>Vi,ac:()=>_l,af:()=>Su,ag:()=>sa,ah:()=>wc,ak:()=>ui,al:()=>El,an:()=>bl,ao:()=>xu,ap:()=>Gn,aq:()=>Ae,ar:()=>tn,as:()=>Ee,at:()=>Ye,au:()=>Ya,av:()=>fi,aw:()=>Le,ax:()=>oe,ay:()=>le,az:()=>kn,b:()=>Jn,c:()=>Eh,d:()=>qn,e:()=>Jr,f:()=>Ka,g:()=>Ih,h:()=>ko,i:()=>Ft,j:()=>T,k:()=>Hu,l:()=>Lr,m:()=>nn,o:()=>he,r:()=>Ou,s:()=>Dh,u:()=>Nl});var N=V(5861),U=V(9835),O=V(4567),ce=V(1191),ae=V(9794),ve=V(9903);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ge=function ie(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function it(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Je=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ge=new ae.Yd("@firebase/auth");function Xe(D,...g){ge.logLevel<=ae.in.ERROR&&ge.error(`Auth (${O.SDK_VERSION}): ${D}`,...g)}function Ye(D,...g){throw et(D,...g)}function Le(D,...g){return et(D,...g)}function Re(D,g,y){const E=Object.assign(Object.assign({},Ue()),{[g]:y});return new U.LL("auth","Firebase",E).create(g,{appName:D.name})}function Ce(D,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&Ye(D,"argument-error"),Re(D,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function et(D,...g){if("string"!=typeof D){const y=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=D.name),D._errorFactory.create(y,...E)}return Je.create(D,...g)}function oe(D,g,...y){if(!D)throw et(g,...y)}function ye(D){const g="INTERNAL ASSERTION FAILED: "+D;throw Xe(g),new Error(g)}function Ae(D,g){D||ye(g)}const te=new Map;function le(D){Ae(D instanceof Function,"Expected a class definition");let g=te.get(D);return g?(Ae(g instanceof D,"Instance stored in cache mismatched with class"),g):(g=new D,te.set(D,g),g)}function He(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function Ne(){return"http:"===Tt()||"https:"===Tt()}function Tt(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class tt{constructor(g,y){this.shortDelay=g,this.longDelay=y,Ae(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function wn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ne()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hn(D,g){Ae(D.emulator,"Emulator should always be set here");const{url:y}=D.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class tr{static initialize(g,y,E){this.fetchImpl=g,y&&(this.headersImpl=y),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Bn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ht=new tt(3e4,6e4);function Rt(D,g){return D.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:D.tenantId}):g}function jn(D,g,y,E){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,N.Z)(function*(D,g,y,E,M={}){return Ls(D,M,(0,N.Z)(function*(){let k={},re={};E&&("GET"===g?re=E:k={body:JSON.stringify(E)});const Pe=(0,U.xO)(Object.assign({key:D.config.apiKey},re)).slice(1),st=yield D._getAdditionalHeaders();return st["Content-Type"]="application/json",D.languageCode&&(st["X-Firebase-Locale"]=D.languageCode),tr.fetch()(ps(D,D.config.apiHost,y,Pe),Object.assign({method:g,headers:st,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function Ls(D,g,y){return yi.apply(this,arguments)}function yi(){return(yi=(0,N.Z)(function*(D,g,y){D._canInitEmulator=!1;const E=Object.assign(Object.assign({},Bn),g);try{const M=new Vs(D),k=yield Promise.race([y(),M.promise]);M.clearNetworkTimeout();const re=yield k.json();if("needConfirmation"in re)throw Ir(D,"account-exists-with-different-credential",re);if(k.ok&&!("errorMessage"in re))return re;{const Pe=k.ok?re.errorMessage:re.error.message,[st,lt]=Pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===st)throw Ir(D,"credential-already-in-use",re);if("EMAIL_EXISTS"===st)throw Ir(D,"email-already-in-use",re);if("USER_DISABLED"===st)throw Ir(D,"user-disabled",re);const $t=E[st]||st.toLowerCase().replace(/[_\s]+/g,"-");if(lt)throw Re(D,$t,lt);Ye(D,$t)}}catch(M){if(M instanceof U.ZR)throw M;Ye(D,"network-request-failed")}})).apply(this,arguments)}function Kn(D,g,y,E){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,N.Z)(function*(D,g,y,E,M={}){const k=yield jn(D,g,y,E,M);return"mfaPendingCredential"in k&&Ye(D,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function ps(D,g,y,E){const M=`${g}${y}?${E}`;return D.config.emulator?hn(D.config,M):`${D.config.apiScheme}://${M}`}class Vs{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,E)=>{this.timer=setTimeout(()=>E(Le(this.auth,"network-request-failed")),Ht.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ir(D,g,y){const E={appName:D.name};y.email&&(E.email=y.email),y.phoneNumber&&(E.phoneNumber=y.phoneNumber);const M=Le(D,g,E);return M.customData._tokenResponse=y,M}function At(){return(At=(0,N.Z)(function*(D,g){return jn(D,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Gr(D,g){return zi.apply(this,arguments)}function zi(){return(zi=(0,N.Z)(function*(D,g){return jn(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function En(D,g){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,N.Z)(function*(D,g){return jn(D,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Pi(D){if(D)try{const g=new Date(Number(D));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function Cr(){return(Cr=(0,N.Z)(function*(D,g=!1){const y=(0,U.m9)(D),E=yield y.getIdToken(g),M=si(E);oe(M&&M.exp&&M.auth_time&&M.iat,y.auth,"internal-error");const k="object"==typeof M.firebase?M.firebase:void 0,re=k?.sign_in_provider;return{claims:M,token:E,authTime:Pi(bo(M.auth_time)),issuedAtTime:Pi(bo(M.iat)),expirationTime:Pi(bo(M.exp)),signInProvider:re||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function bo(D){return 1e3*Number(D)}function si(D){var g;const[y,E,M]=D.split(".");if(void 0===y||void 0===E||void 0===M)return Xe("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,U.tV)(E);return k?JSON.parse(k):(Xe("Failed to decode base64 JWT payload"),null)}catch(k){return Xe("Caught error parsing JWT payload as JSON",null===(g=k)||void 0===g?void 0:g.toString()),null}}function or(D,g){return gs.apply(this,arguments)}function gs(){return(gs=(0,N.Z)(function*(D,g,y=!1){if(y)return g;try{return yield g}catch(E){throw E instanceof U.ZR&&Ii(E)&&D.auth.currentUser===D&&(yield D.auth.signOut()),E}})).apply(this,arguments)}function Ii({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}class pn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const M=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,N.Z)(function*(){yield y.iteration()}),E)}iteration(){var g=this;return(0,N.Z)(function*(){var y;try{yield g.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(y=E)||void 0===y?void 0:y.code)&&g.schedule(!0))}g.schedule()})()}}class ms{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Pi(this.lastLoginAt),this.creationTime=Pi(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Oi(D){return rr.apply(this,arguments)}function rr(){return(rr=(0,N.Z)(function*(D){var g;const y=D.auth,E=yield D.getIdToken(),M=yield or(D,En(y,{idToken:E}));oe(M?.users.length,y,"internal-error");const k=M.users[0];D._notifyReloadListener(k);const re=null!==(g=k.providerUserInfo)&&void 0!==g&&g.length?H(k.providerUserInfo):[],Pe=X(D.providerData,re),$t=!!D.isAnonymous&&!(D.email&&k.passwordHash||Pe?.length),er={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:Pe,metadata:new ms(k.createdAt,k.lastLoginAt),isAnonymous:$t};Object.assign(D,er)})).apply(this,arguments)}function pr(){return(pr=(0,N.Z)(function*(D){const g=(0,U.m9)(D);yield Oi(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function X(D,g){return[...D.filter(E=>!g.some(M=>M.providerId===E.providerId)),...g]}function H(D){return D.map(g=>{var{providerId:y}=g,E=(0,ce._T)(g,["providerId"]);return{providerId:y,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function z(){return(z=(0,N.Z)(function*(D,g){const y=yield Ls(D,{},(0,N.Z)(function*(){const E=(0,U.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:M,apiKey:k}=D.config,re=ps(D,M,"/v1/token",`key=${k}`),Pe=yield D._getAdditionalHeaders();return Pe["Content-Type"]="application/x-www-form-urlencoded",tr.fetch()(re,{method:"POST",headers:Pe,body:E})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){oe(g.idToken,"internal-error"),oe(typeof g.idToken<"u","internal-error"),oe(typeof g.refreshToken<"u","internal-error");const y="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function $n(D){const g=si(D);return oe(g,"internal-error"),oe(typeof g.exp<"u","internal-error"),oe(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var E=this;return(0,N.Z)(function*(){return oe(!E.accessToken||E.refreshToken,g,"user-token-expired"),y||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var E=this;return(0,N.Z)(function*(){const{accessToken:M,refreshToken:k,expiresIn:re}=yield function j(D,g){return z.apply(this,arguments)}(g,y);E.updateTokensAndExpiration(M,k,Number(re))})()}updateTokensAndExpiration(g,y,E){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,y){const{refreshToken:E,accessToken:M,expirationTime:k}=y,re=new q;return E&&(oe("string"==typeof E,"internal-error",{appName:g}),re.refreshToken=E),M&&(oe("string"==typeof M,"internal-error",{appName:g}),re.accessToken=M),k&&(oe("number"==typeof k,"internal-error",{appName:g}),re.expirationTime=k),re}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new q,this.toJSON())}_performRefresh(){return ye("not implemented")}}function Me(D,g){oe("string"==typeof D||typeof D>"u","internal-error",{appName:g})}class Ze{constructor(g){var{uid:y,auth:E,stsTokenManager:M}=g,k=(0,ce._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=E,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new ms(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,N.Z)(function*(){const E=yield or(y,y.stsTokenManager.getToken(y.auth,g));return oe(E,y.auth,"internal-error"),y.accessToken!==E&&(y.accessToken=E,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),E})()}getIdTokenResult(g){return function nr(D){return Cr.apply(this,arguments)}(this,g)}reload(){return function ki(D){return pr.apply(this,arguments)}(this)}_assign(g){this!==g&&(oe(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Ze(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var E=this;return(0,N.Z)(function*(){let M=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),M=!0),y&&(yield Oi(E)),yield E.auth._persistUserIfCurrent(E),M&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,N.Z)(function*(){const y=yield g.getIdToken();return yield or(g,function Ys(D,g){return At.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var E,M,k,re,Pe,st,lt,$t;const er=null!==(E=y.displayName)&&void 0!==E?E:void 0,rs=null!==(M=y.email)&&void 0!==M?M:void 0,co=null!==(k=y.phoneNumber)&&void 0!==k?k:void 0,Wd=null!==(re=y.photoURL)&&void 0!==re?re:void 0,fv=null!==(Pe=y.tenantId)&&void 0!==Pe?Pe:void 0,Ll=null!==(st=y._redirectEventId)&&void 0!==st?st:void 0,Sh=null!==(lt=y.createdAt)&&void 0!==lt?lt:void 0,Ah=null!==($t=y.lastLoginAt)&&void 0!==$t?$t:void 0,{uid:Mh,emailVerified:Is,isAnonymous:Vl,providerData:Ja,stsTokenManager:hv}=y;oe(Mh&&hv,g,"internal-error");const bg=q.fromJSON(this.name,hv);oe("string"==typeof Mh,g,"internal-error"),Me(er,g.name),Me(rs,g.name),oe("boolean"==typeof Is,g,"internal-error"),oe("boolean"==typeof Vl,g,"internal-error"),Me(co,g.name),Me(Wd,g.name),Me(fv,g.name),Me(Ll,g.name),Me(Sh,g.name),Me(Ah,g.name);const xh=new Ze({uid:Mh,auth:g,email:rs,emailVerified:Is,displayName:er,isAnonymous:Vl,photoURL:Wd,phoneNumber:co,tenantId:fv,stsTokenManager:bg,createdAt:Sh,lastLoginAt:Ah});return Ja&&Array.isArray(Ja)&&(xh.providerData=Ja.map(Tg=>Object.assign({},Tg))),Ll&&(xh._redirectEventId=Ll),xh}static _fromIdTokenResponse(g,y,E=!1){return(0,N.Z)(function*(){const M=new q;M.updateFromServerResponse(y);const k=new Ze({uid:y.localId,auth:g,stsTokenManager:M,isAnonymous:E});return yield Oi(k),k})()}}const cn=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,N.Z)(function*(){return!0})()}_set(y,E){var M=this;return(0,N.Z)(function*(){M.storage[y]=E})()}_get(y){var E=this;return(0,N.Z)(function*(){const M=E.storage[y];return void 0===M?null:M})()}_remove(y){var E=this;return(0,N.Z)(function*(){delete E.storage[y]})()}_addListener(y,E){}_removeListener(y,E){}}return D.type="NONE",D})();function kn(D,g,y){return`firebase:${D}:${g}:${y}`}class xr{constructor(g,y,E){this.persistence=g,this.auth=y,this.userKey=E;const{config:M,name:k}=this.auth;this.fullUserKey=kn(this.userKey,M.apiKey,k),this.fullPersistenceKey=kn("persistence",M.apiKey,k),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,N.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?Ze._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,N.Z)(function*(){if(y.persistence===g)return;const E=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,E?y.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,E="authUser"){return(0,N.Z)(function*(){if(!y.length)return new xr(le(cn),g,E);const M=(yield Promise.all(y.map(function(){var lt=(0,N.Z)(function*($t){if(yield $t._isAvailable())return $t});return function($t){return lt.apply(this,arguments)}}()))).filter(lt=>lt);let k=M[0]||le(cn);const re=kn(E,g.config.apiKey,g.name);let Pe=null;for(const lt of y)try{const $t=yield lt._get(re);if($t){const er=Ze._fromJSON(g,$t);lt!==k&&(Pe=er),k=lt;break}}catch{}const st=M.filter(lt=>lt._shouldAllowMigration);return k._shouldAllowMigration&&st.length?(k=st[0],Pe&&(yield k._set(re,Pe.toJSON())),yield Promise.all(y.map(function(){var lt=(0,N.Z)(function*($t){if($t!==k)try{yield $t._remove(re)}catch{}});return function($t){return lt.apply(this,arguments)}}())),new xr(k,g,E)):new xr(k,g,E)})()}}function J(D){const g=D.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Ke(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(W(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(nt(g))return"Blackberry";if(pt(g))return"Webos";if($(g))return"Safari";if((g.includes("chrome/")||De(g))&&!g.includes("edge/"))return"Chrome";if(Ee(g))return"Android";{const E=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function W(D=(0,U.z$)()){return/firefox\//i.test(D)}function $(D=(0,U.z$)()){const g=D.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function De(D=(0,U.z$)()){return/crios\//i.test(D)}function Ke(D=(0,U.z$)()){return/iemobile/i.test(D)}function Ee(D=(0,U.z$)()){return/android/i.test(D)}function nt(D=(0,U.z$)()){return/blackberry/i.test(D)}function pt(D=(0,U.z$)()){return/webos/i.test(D)}function tn(D=(0,U.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function Gn(D=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}function Fn(D=(0,U.z$)()){return tn(D)||Ee(D)||pt(D)||nt(D)||/windows phone/i.test(D)||Ke(D)}function Qo(D,g=[]){let y;switch(D){case"Browser":y=J((0,U.z$)());break;case"Worker":y=`${J((0,U.z$)())}-${D}`;break;default:y=D}const E=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${O.SDK_VERSION}/${E}`}class Wt{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,y){const E=k=>new Promise((re,Pe)=>{try{re(g(k))}catch(st){Pe(st)}});E.onAbort=y,this.queue.push(E);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(g){var y=this;return(0,N.Z)(function*(){var E;if(y.auth.currentUser===g)return;const M=[];try{for(const k of y.queue)yield k(g),k.onAbort&&M.push(k.onAbort)}catch(k){M.reverse();for(const re of M)try{re()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=k)||void 0===E?void 0:E.message})}})()}}class wu{constructor(g,y,E){this.app=g,this.heartbeatServiceProvider=y,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Eu(this),this.idTokenSubscription=new Eu(this),this.beforeStateQueue=new Wt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Je,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,y){var E=this;return y&&(this._popupRedirectResolver=le(y)),this._initializationPromise=this.queue((0,N.Z)(function*(){var M,k;if(!E._deleted&&(E.persistenceManager=yield xr.create(E,g),!E._deleted)){if(null!==(M=E._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(y),E.lastNotifiedUid=(null===(k=E.currentUser)||void 0===k?void 0:k.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,N.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y,!0)}})()}initializeCurrentUser(g){var y=this;return(0,N.Z)(function*(){var E;const M=yield y.assertedPersistence.getCurrentUser();let k=M,re=!1;if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const Pe=null===(E=y.redirectUser)||void 0===E?void 0:E._redirectEventId,st=k?._redirectEventId,lt=yield y.tryRedirectSignIn(g);(!Pe||Pe===st)&&lt?.user&&(k=lt.user,re=!0)}if(!k)return y.directlySetCurrentUser(null);if(!k._redirectEventId){if(re)try{yield y.beforeStateQueue.runMiddleware(k)}catch(Pe){k=M,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(Pe))}return k?y.reloadAndSetCurrentUserOrClear(k):y.directlySetCurrentUser(null)}return oe(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===k._redirectEventId?y.directlySetCurrentUser(k):y.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(g){var y=this;return(0,N.Z)(function*(){let E=null;try{E=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch{yield y._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,N.Z)(function*(){var E;try{yield Oi(g)}catch(M){if("auth/network-request-failed"!==(null===(E=M)||void 0===E?void 0:E.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function fn(){if(typeof navigator>"u")return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var g=this;return(0,N.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,N.Z)(function*(){const E=g?(0,U.m9)(g):null;return E&&oe(E.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(E&&E._clone(y))})()}_updateCurrentUser(g,y=!1){var E=this;return(0,N.Z)(function*(){if(!E._deleted)return g&&oe(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),y||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,N.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,N.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var y=this;return this.queue((0,N.Z)(function*(){yield y.assertedPersistence.setPersistence(le(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new U.LL("auth","Firebase",g())}onAuthStateChanged(g,y,E){return this.registerStateListener(this.authStateSubscription,g,y,E)}beforeAuthStateChanged(g,y){return this.beforeStateQueue.pushCallback(g,y)}onIdTokenChanged(g,y,E){return this.registerStateListener(this.idTokenSubscription,g,y,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var E=this;return(0,N.Z)(function*(){const M=yield E.getOrInitRedirectPersistenceManager(y);return null===g?M.removeCurrentUser():M.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,N.Z)(function*(){if(!y.redirectPersistenceManager){const E=g&&le(g)||y._popupRedirectResolver;oe(E,y,"argument-error"),y.redirectPersistenceManager=yield xr.create(y,[le(E._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,N.Z)(function*(){var E,M;return y._isInitialized&&(yield y.queue((0,N.Z)(function*(){}))),(null===(E=y._currentUser)||void 0===E?void 0:E._redirectEventId)===g?y._currentUser:(null===(M=y.redirectUser)||void 0===M?void 0:M._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,N.Z)(function*(){if(g===y.currentUser)return y.queue((0,N.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,E,M){if(this._deleted)return()=>{};const k="function"==typeof y?y:y.next.bind(y),re=this._isInitialized?Promise.resolve():this._initializationPromise;return oe(re,this,"internal-error"),re.then(()=>k(this.currentUser)),"function"==typeof y?g.addObserver(y,E,M):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,N.Z)(function*(){y.currentUser&&y.currentUser!==g&&(y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh()),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Qo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,N.Z)(function*(){var y;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const M=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return M&&(E["X-Firebase-Client"]=M),E})()}}function ar(D){return(0,U.m9)(D)}class Eu{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,U.ne)(y=>this.observer=y)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Yo(D,g,y){const E=ar(D);oe(E._canInitEmulator,E,"emulator-config-failed"),oe(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const M=!!y?.disableWarnings,k=zr(g),{host:re,port:Pe}=function Jo(D){const g=zr(D),y=/(\/\/)?([^?#/]+)/.exec(D.substr(g.length));if(!y)return{host:"",port:null};const E=y[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(E);if(M){const k=M[1];return{host:k,port:To(E.substr(k.length+1))}}{const[k,re]=E.split(":");return{host:k,port:To(re)}}}(g);E.config.emulator={url:`${k}//${re}${null===Pe?"":`:${Pe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:re,port:Pe,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function qi(){function D(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}function zr(D){const g=D.indexOf(":");return g<0?"":D.substr(0,g+1)}function To(D){if(!D)return null;const g=Number(D);return isNaN(g)?null:g}class Ki{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return ye("not implemented")}_getIdTokenResponse(g){return ye("not implemented")}_linkToIdToken(g,y){return ye("not implemented")}_getReauthenticationResolver(g){return ye("not implemented")}}function fl(D,g){return wt.apply(this,arguments)}function wt(){return(wt=(0,N.Z)(function*(D,g){return jn(D,"POST","/v1/accounts:resetPassword",Rt(D,g))})).apply(this,arguments)}function Sd(D,g){return hl.apply(this,arguments)}function hl(){return(hl=(0,N.Z)(function*(D,g){return jn(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ma(D,g){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,N.Z)(function*(D,g){return jn(D,"POST","/v1/accounts:update",Rt(D,g))})).apply(this,arguments)}function vn(){return(vn=(0,N.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signInWithPassword",Rt(D,g))})).apply(this,arguments)}function ys(D,g){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,N.Z)(function*(D,g){return jn(D,"POST","/v1/accounts:sendOobCode",Rt(D,g))})).apply(this,arguments)}function Iu(D,g){return yt.apply(this,arguments)}function yt(){return(yt=(0,N.Z)(function*(D,g){return ys(D,g)})).apply(this,arguments)}function Fi(D,g){return xa.apply(this,arguments)}function xa(){return(xa=(0,N.Z)(function*(D,g){return ys(D,g)})).apply(this,arguments)}function gt(D,g){return So.apply(this,arguments)}function So(){return(So=(0,N.Z)(function*(D,g){return ys(D,g)})).apply(this,arguments)}function Nt(D,g){return An.apply(this,arguments)}function An(){return(An=(0,N.Z)(function*(D,g){return ys(D,g)})).apply(this,arguments)}function sh(){return(sh=(0,N.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signInWithEmailLink",Rt(D,g))})).apply(this,arguments)}function Cu(){return(Cu=(0,N.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signInWithEmailLink",Rt(D,g))})).apply(this,arguments)}class oi extends Ki{constructor(g,y,E,M=null){super("password",E),this._email=g,this._password=y,this._tenantId=M}static _fromEmailAndPassword(g,y){return new oi(g,y,"password")}static _fromEmailAndCode(g,y,E=null){return new oi(g,y,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,N.Z)(function*(){switch(y.signInMethod){case"password":return function Xo(D,g){return vn.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function pl(D,g){return sh.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:Ye(g,"internal-error")}})()}_linkToIdToken(g,y){var E=this;return(0,N.Z)(function*(){switch(E.signInMethod){case"password":return Sd(g,{idToken:y,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function oh(D,g){return Cu.apply(this,arguments)}(g,{idToken:y,email:E._email,oobCode:E._password});default:Ye(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function ea(D,g){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,N.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signInWithIdp",Rt(D,g))})).apply(this,arguments)}class qr extends Ki{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new qr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):Ye("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:M}=y,k=(0,ce._T)(y,["providerId","signInMethod"]);if(!E||!M)return null;const re=new qr(E,M);return re.idToken=k.idToken||void 0,re.accessToken=k.accessToken||void 0,re.secret=k.secret,re.nonce=k.nonce,re.pendingToken=k.pendingToken||null,re}_getIdTokenResponse(g){return ea(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,ea(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,ea(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,U.xO)(y)}return g}}function rv(D,g){return ah.apply(this,arguments)}function ah(){return(ah=(0,N.Z)(function*(D,g){return jn(D,"POST","/v1/accounts:sendVerificationCode",Rt(D,g))})).apply(this,arguments)}function pc(){return(pc=(0,N.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signInWithPhoneNumber",Rt(D,g))})).apply(this,arguments)}function uh(){return(uh=(0,N.Z)(function*(D,g){const y=yield Kn(D,"POST","/v1/accounts:signInWithPhoneNumber",Rt(D,g));if(y.temporaryProof)throw Ir(D,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const yg={USER_NOT_FOUND:"user-not-found"};function ai(){return(ai=(0,N.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signInWithPhoneNumber",Rt(D,Object.assign(Object.assign({},g),{operation:"REAUTH"})),yg)})).apply(this,arguments)}class ln extends Ki{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new ln({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new ln({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function iv(D,g){return pc.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function Na(D,g){return uh.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function sv(D,g){return ai.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:E,verificationCode:M}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:E,code:M}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:E,phoneNumber:M,temporaryProof:k}=g;return E||y||M||k?new ln({verificationId:y,verificationCode:E,phoneNumber:M,temporaryProof:k}):null}}class bu{constructor(g){var y,E,M,k,re,Pe;const st=(0,U.zd)((0,U.pd)(g)),lt=null!==(y=st.apiKey)&&void 0!==y?y:null,$t=null!==(E=st.oobCode)&&void 0!==E?E:null,er=function ov(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=st.mode)&&void 0!==M?M:null);oe(lt&&$t&&er,"argument-error"),this.apiKey=lt,this.operation=er,this.code=$t,this.continueUrl=null!==(k=st.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(re=st.languageCode)&&void 0!==re?re:null,this.tenantId=null!==(Pe=st.tenantId)&&void 0!==Pe?Pe:null}static parseLink(g){const y=function l0(D){const g=(0,U.zd)((0,U.pd)(D)).link,y=g?(0,U.zd)((0,U.pd)(g)).deep_link_id:null,E=(0,U.zd)((0,U.pd)(D)).deep_link_id;return(E?(0,U.zd)((0,U.pd)(E)).link:null)||E||y||g||D}(g);try{return new bu(y)}catch{return null}}}let gc=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(y,E){return oi._fromEmailAndPassword(y,E)}static credentialWithLink(y,E){const M=bu.parseLink(E);return oe(M,"argument-error"),oi._fromEmailAndCode(y,M.code,M.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class Rr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Xs extends Rr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ta extends Xs{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return oe("providerId"in y&&"signInMethod"in y,"argument-error"),qr._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return oe(g.idToken||g.accessToken,"argument-error"),qr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ta.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ta.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:E,oauthTokenSecret:M,pendingToken:k,nonce:re,providerId:Pe}=g;if(!E&&!M&&!y&&!k||!Pe)return null;try{return new ta(Pe)._credential({idToken:y,accessToken:E,nonce:re,pendingToken:k})}catch{return null}}}let ch=(()=>{class D extends Xs{constructor(){super("facebook.com")}static credential(y){return qr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return D.credentialFromTaggedObject(y)}static credentialFromError(y){return D.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return D.credential(y.oauthAccessToken)}catch{return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),gl=(()=>{class D extends Xs{constructor(){super("google.com"),this.addScope("profile")}static credential(y,E){return qr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:E})}static credentialFromResult(y){return D.credentialFromTaggedObject(y)}static credentialFromError(y){return D.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:E,oauthAccessToken:M}=y;if(!E&&!M)return null;try{return D.credential(E,M)}catch{return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),ml=(()=>{class D extends Xs{constructor(){super("github.com")}static credential(y){return qr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return D.credentialFromTaggedObject(y)}static credentialFromError(y){return D.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return D.credential(y.oauthAccessToken)}catch{return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class Bs extends Ki{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return ea(g,this.buildRequest())}_linkToIdToken(g,y){const E=this.buildRequest();return E.idToken=y,ea(g,E)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,ea(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:M,pendingToken:k}=y;return E&&M&&k&&E===M?new Bs(E,k):null}static _create(g,y){return new Bs(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class gr extends Rr{constructor(g){oe(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return gr.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return gr.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=Bs.fromJSON(g);return oe(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:E}=g;if(!y||!E)return null;try{return Bs._create(E,y)}catch{return null}}}let vt=(()=>{class D extends Xs{constructor(){super("twitter.com")}static credential(y,E){return qr._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:E})}static credentialFromResult(y){return D.credentialFromTaggedObject(y)}static credentialFromError(y){return D.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:E,oauthTokenSecret:M}=y;if(!E||!M)return null;try{return D.credential(E,M)}catch{return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function yc(D,g){return na.apply(this,arguments)}function na(){return(na=(0,N.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signUp",Rt(D,g))})).apply(this,arguments)}class ir{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,E,M=!1){return(0,N.Z)(function*(){const k=yield Ze._fromIdTokenResponse(g,E,M),re=yl(E);return new ir({user:k,providerId:re,_tokenResponse:E,operationType:y})})()}static _forOperation(g,y,E){return(0,N.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const M=yl(E);return new ir({user:g,providerId:M,_tokenResponse:E,operationType:y})})()}}function yl(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function br(D){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,N.Z)(function*(D){var g;const y=ar(D);if(yield y._initializationPromise,null!==(g=y.currentUser)&&void 0!==g&&g.isAnonymous)return new ir({user:y.currentUser,providerId:null,operationType:"signIn"});const E=yield yc(y,{returnSecureToken:!0}),M=yield ir._fromIdTokenResponse(y,"signIn",E,!0);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}class Li extends U.ZR{constructor(g,y,E,M){var k;super(y.code,y.message),this.operationType=E,this.user=M,Object.setPrototypeOf(this,Li.prototype),this.customData={appName:g.name,tenantId:null!==(k=g.tenantId)&&void 0!==k?k:void 0,_serverResponse:y.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,y,E,M){return new Li(g,y,E,M)}}function vc(D,g,y,E){return("reauthenticate"===g?y._getReauthenticationResolver(D):y._getIdTokenResponse(D)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Li._fromErrorAndOperation(D,k,g,E):k})}function Qi(D){return new Set(D.map(({providerId:g})=>g).filter(g=>!!g))}function ui(D,g){return _n.apply(this,arguments)}function _n(){return(_n=(0,N.Z)(function*(D,g){const y=(0,U.m9)(D);yield Yi(!0,y,g);const{providerUserInfo:E}=yield Gr(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),M=Qi(E||[]);return y.providerData=y.providerData.filter(k=>M.has(k.providerId)),M.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function eo(D,g){return vi.apply(this,arguments)}function vi(){return(vi=(0,N.Z)(function*(D,g,y=!1){const E=yield or(D,g._linkToIdToken(D.auth,yield D.getIdToken()),y);return ir._forOperation(D,"link",E)})).apply(this,arguments)}function Yi(D,g,y){return dn.apply(this,arguments)}function dn(){return(dn=(0,N.Z)(function*(D,g,y){yield Oi(g);const M=!1===D?"provider-already-linked":"no-such-provider";oe(Qi(g.providerData).has(y)===D,g.auth,M)})).apply(this,arguments)}function ra(D,g){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,N.Z)(function*(D,g,y=!1){var E;const{auth:M}=D,k="reauthenticate";try{const re=yield or(D,vc(M,k,g,D),y);oe(re.idToken,M,"internal-error");const Pe=si(re.idToken);oe(Pe,M,"internal-error");const{sub:st}=Pe;return oe(D.uid===st,M,"user-mismatch"),ir._forOperation(D,k,re)}catch(re){throw"auth/user-not-found"===(null===(E=re)||void 0===E?void 0:E.code)&&Ye(M,"user-mismatch"),re}})).apply(this,arguments)}function ia(D,g){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,N.Z)(function*(D,g,y=!1){const E="signIn",M=yield vc(D,E,g),k=yield ir._fromIdTokenResponse(D,E,M);return y||(yield D._updateCurrentUser(k.user)),k})).apply(this,arguments)}function St(D,g){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,N.Z)(function*(D,g){return ia(ar(D),g)})).apply(this,arguments)}function dh(D,g){return js.apply(this,arguments)}function js(){return(js=(0,N.Z)(function*(D,g){const y=(0,U.m9)(D);return yield Yi(!1,y,g.providerId),eo(y,g)})).apply(this,arguments)}function Md(D,g){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,N.Z)(function*(D,g){return ra((0,U.m9)(D),g)})).apply(this,arguments)}function _c(D,g){return vs.apply(this,arguments)}function vs(){return(vs=(0,N.Z)(function*(D,g){return Kn(D,"POST","/v1/accounts:signInWithCustomToken",Rt(D,g))})).apply(this,arguments)}function vl(D,g){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,N.Z)(function*(D,g){const y=ar(D),E=yield _c(y,{token:g,returnSecureToken:!0}),M=yield ir._fromIdTokenResponse(y,"signIn",E);return yield y._updateCurrentUser(M.user),M})).apply(this,arguments)}class xt{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Kr._fromServerResponse(g,y):Ye(g,"internal-error")}}class Kr extends xt{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Kr(y)}}function Mn(D,g,y){var E;oe((null===(E=y.url)||void 0===E?void 0:E.length)>0,D,"invalid-continue-uri"),oe(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(oe(y.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(oe(y.android.packageName.length>0,D,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function In(D,g,y){return mr.apply(this,arguments)}function mr(){return(mr=(0,N.Z)(function*(D,g,y){const E=(0,U.m9)(D),M={requestType:"PASSWORD_RESET",email:g};y&&Mn(E,M,y),yield Fi(E,M)})).apply(this,arguments)}function Pr(D,g,y){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,N.Z)(function*(D,g,y){yield fl((0,U.m9)(D),{oobCode:g,newPassword:y})})).apply(this,arguments)}function at(D,g){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,N.Z)(function*(D,g){yield Ma((0,U.m9)(D),{oobCode:g})})).apply(this,arguments)}function Qn(D,g){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,N.Z)(function*(D,g){const y=(0,U.m9)(D),E=yield fl(y,{oobCode:g}),M=E.requestType;switch(oe(M,y,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(E.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(E.mfaInfo,y,"internal-error");default:oe(E.email,y,"internal-error")}let k=null;return E.mfaInfo&&(k=xt._fromServerResponse(ar(y),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:k},operation:M}})).apply(this,arguments)}function Pa(D,g){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,N.Z)(function*(D,g){const{data:y}=yield Qn((0,U.m9)(D),g);return y.email})).apply(this,arguments)}function lr(D,g,y){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,N.Z)(function*(D,g,y){const E=ar(D),M=yield yc(E,{returnSecureToken:!0,email:g,password:y}),k=yield ir._fromIdTokenResponse(E,"signIn",M);return yield E._updateCurrentUser(k.user),k})).apply(this,arguments)}function Oa(D,g,y){return St((0,U.m9)(D),gc.credential(g,y))}function _s(D,g,y){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,N.Z)(function*(D,g,y){const E=(0,U.m9)(D),M={requestType:"EMAIL_SIGNIN",email:g};oe(y.handleCodeInApp,E,"argument-error"),y&&Mn(E,M,y),yield gt(E,M)})).apply(this,arguments)}function Dc(D,g){return"EMAIL_SIGNIN"===bu.parseLink(g)?.operation}function Mo(D,g,y){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,N.Z)(function*(D,g,y){const E=(0,U.m9)(D),M=gc.credentialWithLink(g,y||He());return oe(M._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),St(E,M)})).apply(this,arguments)}function to(D,g){return yr.apply(this,arguments)}function yr(){return(yr=(0,N.Z)(function*(D,g){return jn(D,"POST","/v1/accounts:createAuthUri",Rt(D,g))})).apply(this,arguments)}function xo(D,g){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,N.Z)(function*(D,g){const E={identifier:g,continueUri:Ne()?He():"http://localhost"},{signinMethods:M}=yield to((0,U.m9)(D),E);return M||[]})).apply(this,arguments)}function Vi(D,g){return Us.apply(this,arguments)}function Us(){return(Us=(0,N.Z)(function*(D,g){const y=(0,U.m9)(D),M={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};g&&Mn(y.auth,M,g);const{email:k}=yield Iu(y.auth,M);k!==D.email&&(yield D.reload())})).apply(this,arguments)}function _l(D,g,y){return xn.apply(this,arguments)}function xn(){return(xn=(0,N.Z)(function*(D,g,y){const E=(0,U.m9)(D),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:g};y&&Mn(E.auth,k,y);const{email:re}=yield Nt(E.auth,k);re!==D.email&&(yield D.reload())})).apply(this,arguments)}function Dl(D,g){return ka.apply(this,arguments)}function ka(){return(ka=(0,N.Z)(function*(D,g){return jn(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Su(D,g){return No.apply(this,arguments)}function No(){return(No=(0,N.Z)(function*(D,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const E=(0,U.m9)(D),k={idToken:yield E.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},re=yield or(E,Dl(E.auth,k));E.displayName=re.displayName||null,E.photoURL=re.photoUrl||null;const Pe=E.providerData.find(({providerId:st})=>"password"===st);Pe&&(Pe.displayName=E.displayName,Pe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(re)})).apply(this,arguments)}function sa(D,g){return $s((0,U.m9)(D),g,null)}function wc(D,g){return $s((0,U.m9)(D),null,g)}function $s(D,g,y){return bn.apply(this,arguments)}function bn(){return(bn=(0,N.Z)(function*(D,g,y){const{auth:E}=D,k={idToken:yield D.getIdToken(),returnSecureToken:!0};g&&(k.email=g),y&&(k.password=y);const re=yield or(D,Sd(E,k));yield D._updateTokensIfNecessary(re,!0)})).apply(this,arguments)}class sn{constructor(g,y,E={}){this.isNewUser=g,this.providerId=y,this.profile=E}}class Xi extends sn{constructor(g,y,E,M){super(g,y,E),this.username=M}}class wl extends sn{constructor(g,y){super(g,"facebook.com",y)}}class Au extends Xi{constructor(g,y){super(g,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class Fa extends sn{constructor(g,y){super(g,"google.com",y)}}class ws extends Xi{constructor(g,y,E){super(g,"twitter.com",y,E)}}function El(D){const{user:g,_tokenResponse:y}=D;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function no(D){var g,y;if(!D)return null;const{providerId:E}=D,M=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},k=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!E&&D?.idToken){const re=null===(y=null===(g=si(D.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(re)return new sn(k,"anonymous"!==re&&"custom"!==re?re:null)}if(!E)return null;switch(E){case"facebook.com":return new wl(k,M);case"github.com":return new Au(k,M);case"google.com":return new Fa(k,M);case"twitter.com":return new ws(k,M,D.screenName||null);case"custom":case"anonymous":return new sn(k,null);default:return new sn(k,E,M)}}(y)}class La{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new La("enroll",g)}static _fromMfaPendingCredential(g){return new La("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,E;if(g?.multiFactorSession){if(null!==(y=g.multiFactorSession)&&void 0!==y&&y.pendingCredential)return La._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(E=g.multiFactorSession)&&void 0!==E&&E.idToken)return La._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Va{constructor(g,y,E){this.session=g,this.hints=y,this.signInResolver=E}static _fromError(g,y){const E=ar(g),M=y.customData._serverResponse,k=(M.mfaInfo||[]).map(Pe=>xt._fromServerResponse(E,Pe));oe(M.mfaPendingCredential,E,"internal-error");const re=La._fromMfaPendingCredential(M.mfaPendingCredential);return new Va(re,k,function(){var Pe=(0,N.Z)(function*(st){const lt=yield st._process(E,re);delete M.mfaInfo,delete M.mfaPendingCredential;const $t=Object.assign(Object.assign({},M),{idToken:lt.idToken,refreshToken:lt.refreshToken});switch(y.operationType){case"signIn":const er=yield ir._fromIdTokenResponse(E,y.operationType,$t);return yield E._updateCurrentUser(er.user),er;case"reauthenticate":return oe(y.user,E,"internal-error"),ir._forOperation(y.user,y.operationType,$t);default:Ye(E,"internal-error")}});return function(st){return Pe.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,N.Z)(function*(){return y.signInResolver(g)})()}}function bl(D,g){var y;const E=(0,U.m9)(D),M=g;return oe(g.customData.operationType,E,"argument-error"),oe(null===(y=M.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,E,"argument-error"),Va._fromError(E,M)}function ci(D,g){return jn(D,"POST","/v2/accounts/mfaEnrollment:start",Rt(D,g))}class hh{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(E=>xt._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new hh(g)}getSession(){var g=this;return(0,N.Z)(function*(){return La._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var E=this;return(0,N.Z)(function*(){const M=g,k=yield E.getSession(),re=yield or(E.user,M._process(E.user.auth,k,y));return yield E.user._updateTokensIfNecessary(re),E.user.reload()})()}unenroll(g){var y=this;return(0,N.Z)(function*(){var E;const M="string"==typeof g?g:g.uid,k=yield y.user.getIdToken(),re=yield or(y.user,function uv(D,g){return jn(D,"POST","/v2/accounts/mfaEnrollment:withdraw",Rt(D,g))}(y.user.auth,{idToken:k,mfaEnrollmentId:M}));y.enrolledFactors=y.enrolledFactors.filter(({uid:Pe})=>Pe!==M),yield y.user._updateTokensIfNecessary(re);try{yield y.user.reload()}catch(Pe){if("auth/user-token-expired"!==(null===(E=Pe)||void 0===E?void 0:E.code))throw Pe}})()}}const Mu=new WeakMap;function xu(D){const g=(0,U.m9)(D);return Mu.has(g)||Mu.set(g,hh._fromUser(g)),Mu.get(g)}const oa="__sak";class Ba{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(oa,"1"),this.storage.removeItem(oa),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jn=(()=>{class D extends Ba{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,E)=>this.onStorageEvent(y,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ph(){const D=(0,U.z$)();return $(D)||tn(D)}()&&function Js(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Fn(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const E of Object.keys(this.listeners)){const M=this.storage.getItem(E),k=this.localCache[E];M!==k&&y(E,k,M)}}onStorageEvent(y,E=!1){if(!y.key)return void this.forAllChangedKeys((Pe,st,lt)=>{this.notifyListeners(Pe,lt)});const M=y.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Pe=this.storage.getItem(M);if(y.newValue!==Pe)null!==y.newValue?this.storage.setItem(M,y.newValue):this.storage.removeItem(M);else if(this.localCache[M]===y.newValue&&!E)return}const k=()=>{const Pe=this.storage.getItem(M);!E&&this.localCache[M]===Pe||this.notifyListeners(M,Pe)},re=this.storage.getItem(M);!function rn(){return(0,U.w1)()&&10===document.documentMode}()||re===y.newValue||y.newValue===y.oldValue?k():setTimeout(k,10)}notifyListeners(y,E){this.localCache[y]=E;const M=this.listeners[y];if(M)for(const k of Array.from(M))k(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,E,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:E,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,E){var M=()=>super._set,k=this;return(0,N.Z)(function*(){yield M().call(k,y,E),k.localCache[y]=JSON.stringify(E)})()}_get(y){var E=()=>super._get,M=this;return(0,N.Z)(function*(){const k=yield E().call(M,y);return M.localCache[y]=JSON.stringify(k),k})()}_remove(y){var E=()=>super._remove,M=this;return(0,N.Z)(function*(){yield E().call(M,y),delete M.localCache[y]})()}}return D.type="LOCAL",D})(),ja=(()=>{class D extends Ba{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,E){}_removeListener(y,E){}}return D.type="SESSION",D})();let Ec=(()=>{class D{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const E=this.receivers.find(k=>k.isListeningto(y));if(E)return E;const M=new D(y);return this.receivers.push(M),M}isListeningto(y){return this.eventTarget===y}handleEvent(y){var E=this;return(0,N.Z)(function*(){const M=y,{eventId:k,eventType:re,data:Pe}=M.data,st=E.handlersMap[re];if(!st?.size)return;M.ports[0].postMessage({status:"ack",eventId:k,eventType:re});const lt=Array.from(st).map(function(){var er=(0,N.Z)(function*(rs){return rs(M.origin,Pe)});return function(rs){return er.apply(this,arguments)}}()),$t=yield function _g(D){return Promise.all(D.map(function(){var g=(0,N.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(E){return{fulfilled:!1,reason:E}}});return function(y){return g.apply(this,arguments)}}()))}(lt);M.ports[0].postMessage({status:"done",eventId:k,eventType:re,response:$t})})()}_subscribe(y,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(E)}_unsubscribe(y,E){this.handlersMap[y]&&E&&this.handlersMap[y].delete(E),(!E||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function aa(D="",g=10){let y="";for(let E=0;E<g;E++)y+=Math.floor(10*Math.random());return D+y}class mh{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,E=50){var M=this;return(0,N.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let re,Pe;return new Promise((st,lt)=>{const $t=aa("",20);k.port1.start();const er=setTimeout(()=>{lt(new Error("unsupported_event"))},E);Pe={messageChannel:k,onMessage(rs){const co=rs;if(co.data.eventId===$t)switch(co.data.status){case"ack":clearTimeout(er),re=setTimeout(()=>{lt(new Error("timeout"))},3e3);break;case"done":clearTimeout(re),st(co.data.response);break;default:clearTimeout(er),clearTimeout(re),lt(new Error("invalid_response"))}}},M.handlers.add(Pe),k.port1.addEventListener("message",Pe.onMessage),M.target.postMessage({eventType:g,eventId:$t,data:y},[k.port2])}).finally(()=>{Pe&&M.removeMessageHandler(Pe)})})()}}function Nn(){return window}function vr(){return typeof Nn().WorkerGlobalScope<"u"&&"function"==typeof Nn().importScripts}function ua(){return(ua=(0,N.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const vh="firebaseLocalStorageDb",Nu="firebaseLocalStorage",Cc="fbase_key";class io{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Qr(D,g){return D.transaction([Nu],g?"readwrite":"readonly").objectStore(Nu)}function Es(){const D=indexedDB.open(vh,1);return new Promise((g,y)=>{D.addEventListener("error",()=>{y(D.error)}),D.addEventListener("upgradeneeded",()=>{const E=D.result;try{E.createObjectStore(Nu,{keyPath:Cc})}catch(M){y(M)}}),D.addEventListener("success",(0,N.Z)(function*(){const E=D.result;E.objectStoreNames.contains(Nu)?g(E):(E.close(),yield function bc(){const D=indexedDB.deleteDatabase(vh);return new io(D).toPromise()}(),g(yield Es()))}))})}function ca(D,g,y){return Or.apply(this,arguments)}function Or(){return(Or=(0,N.Z)(function*(D,g,y){const E=Qr(D,!0).put({[Cc]:g,value:y});return new io(E).toPromise()})).apply(this,arguments)}function Bi(){return(Bi=(0,N.Z)(function*(D,g){const y=Qr(D,!1).get(g),E=yield new io(y).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Tc(D,g){const y=Qr(D,!0).delete(g);return new io(y).toPromise()}const Ft=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,N.Z)(function*(){return y.db||(y.db=yield Es()),y.db})()}_withRetries(y){var E=this;return(0,N.Z)(function*(){let M=0;for(;;)try{const k=yield E._openDb();return yield y(k)}catch(k){if(M++>3)throw k;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,N.Z)(function*(){return vr()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,N.Z)(function*(){y.receiver=Ec._getInstance(function Ic(){return vr()?self:null}()),y.receiver._subscribe("keyChanged",function(){var E=(0,N.Z)(function*(M,k){return{keyProcessed:(yield y._poll()).includes(k.key)}});return function(M,k){return E.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var E=(0,N.Z)(function*(M,k){return["keyChanged"]});return function(M,k){return E.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,N.Z)(function*(){var E,M;if(y.activeServiceWorker=yield function Ua(){return ua.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new mh(y.activeServiceWorker);const k=yield y.sender._send("ping",{},800);!k||(null===(E=k[0])||void 0===E?void 0:E.fulfilled)&&(null===(M=k[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var E=this;return(0,N.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function $a(){var D;return(null===(D=navigator?.serviceWorker)||void 0===D?void 0:D.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:y},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,N.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Es();return yield ca(y,oa,"1"),yield Tc(y,oa),!0}catch{}return!1})()}_withPendingWrite(y){var E=this;return(0,N.Z)(function*(){E.pendingWrites++;try{yield y()}finally{E.pendingWrites--}})()}_set(y,E){var M=this;return(0,N.Z)(function*(){return M._withPendingWrite((0,N.Z)(function*(){return yield M._withRetries(k=>ca(k,y,E)),M.localCache[y]=E,M.notifyServiceWorker(y)}))})()}_get(y){var E=this;return(0,N.Z)(function*(){const M=yield E._withRetries(k=>function Sl(D,g){return Bi.apply(this,arguments)}(k,y));return E.localCache[y]=M,M})()}_remove(y){var E=this;return(0,N.Z)(function*(){return E._withPendingWrite((0,N.Z)(function*(){return yield E._withRetries(M=>Tc(M,y)),delete E.localCache[y],E.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,N.Z)(function*(){const E=yield y._withRetries(re=>{const Pe=Qr(re,!1).getAll();return new io(Pe).toPromise()});if(!E)return[];if(0!==y.pendingWrites)return[];const M=[],k=new Set;for(const{fbase_key:re,value:Pe}of E)k.add(re),JSON.stringify(y.localCache[re])!==JSON.stringify(Pe)&&(y.notifyListeners(re,Pe),M.push(re));for(const re of Object.keys(y.localCache))y.localCache[re]&&!k.has(re)&&(y.notifyListeners(re,null),M.push(re));return M})()}notifyListeners(y,E){this.localCache[y]=E;const M=this.listeners[y];if(M)for(const k of Array.from(M))k(E)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,N.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(E)}_removeListener(y,E){this.listeners[y]&&(this.listeners[y].delete(E),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})();function Sc(D,g){return jn(D,"POST","/v2/accounts/mfaSignIn:start",Rt(D,g))}function li(){return(li=(0,N.Z)(function*(D){return(yield jn(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Wa(D){return new Promise((g,y)=>{const E=document.createElement("script");E.setAttribute("src",D),E.onload=g,E.onerror=M=>{const k=Le("internal-error");k.customData=M,y(k)},E.type="text/javascript",E.charset="UTF-8",function Al(){var D,g;return null!==(g=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==g?g:document}().appendChild(E)})}function Hs(D){return`__${D}${Math.floor(1e6*Math.random())}`}const ct=1e12;class kd{constructor(g){this.auth=g,this.counter=ct,this._widgets=new Map}render(g,y){const E=this.counter;return this._widgets.set(E,new cv(g,this.auth.name,y||{})),this.counter++,E}reset(g){var y;const E=g||ct;null===(y=this._widgets.get(E))||void 0===y||y.delete(),this._widgets.delete(E)}getResponse(g){var y;return(null===(y=this._widgets.get(g||ct))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,N.Z)(function*(){var E;return null===(E=y._widgets.get(g||ct))||void 0===E||E.execute(),""})()}}class cv{constructor(g,y,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof g?document.getElementById(g):g;oe(M,"argument-error",{appName:y}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function kr(D){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<D;E++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ml=Hs("rcb"),xl=new tt(3e4,6e4);class Fd{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Nn().grecaptcha)||void 0===g||!g.render)}load(g,y=""){return oe(function ao(D){return D.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Nn().grecaptcha):new Promise((E,M)=>{const k=Nn().setTimeout(()=>{M(Le(g,"network-request-failed"))},xl.get());Nn()[Ml]=()=>{Nn().clearTimeout(k),delete Nn()[Ml];const Pe=Nn().grecaptcha;if(!Pe)return void M(Le(g,"internal-error"));const st=Pe.render;Pe.render=(lt,$t)=>{const er=st(lt,$t);return this.counter++,er},this.hostLanguage=y,E(Pe)},Wa(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:Ml,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(k),M(Le(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var y;return!(null===(y=Nn().grecaptcha)||void 0===y||!y.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class f0{load(g){return(0,N.Z)(function*(){return new kd(g)})()}clearedOneInstance(){}}const Dg="recaptcha",Yr={theme:"light",type:"image"};class Pu{constructor(g,y=Object.assign({},Yr),E){this.parameters=y,this.type=Dg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ar(E),this.isInvisible="invisible"===this.parameters.size,oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof g?document.getElementById(g):g;oe(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new f0:new Fd,this.validateStartingState()}verify(){var g=this;return(0,N.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(y)||new Promise(k=>{const re=Pe=>{!Pe||(g.tokenChangeListeners.delete(re),k(Pe))};g.tokenChangeListeners.add(re),g.isInvisible&&E.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(E=>E(y)),"function"==typeof g)g(y);else if("string"==typeof g){const E=Nn()[g];"function"==typeof E&&E(y)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,N.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const E=document.createElement("div");y.appendChild(E),y=E}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,N.Z)(function*(){oe(Ne()&&!vr(),g.auth,"internal-error"),yield function Fr(){let D=null;return new Promise(g=>{"complete"!==document.readyState?(D=()=>g(),window.addEventListener("load",D)):g()}).catch(g=>{throw D&&window.removeEventListener("load",D),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function Ha(D){return li.apply(this,arguments)}(g.auth);oe(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ws{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=ln._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Dh(D,g,y){return dr.apply(this,arguments)}function dr(){return(dr=(0,N.Z)(function*(D,g,y){const E=ar(D),M=yield ku(E,g,(0,U.m9)(y));return new Ws(M,k=>St(E,k))})).apply(this,arguments)}function Lr(D,g,y){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,N.Z)(function*(D,g,y){const E=(0,U.m9)(D);yield Yi(!1,E,"phone");const M=yield ku(E.auth,g,(0,U.m9)(y));return new Ws(M,k=>dh(E,k))})).apply(this,arguments)}function Ou(D,g,y){return da.apply(this,arguments)}function da(){return(da=(0,N.Z)(function*(D,g,y){const E=(0,U.m9)(D),M=yield ku(E.auth,g,(0,U.m9)(y));return new Ws(M,k=>Md(E,k))})).apply(this,arguments)}function ku(D,g,y){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,N.Z)(function*(D,g,y){var E;const M=yield y.verify();try{let k;if(oe("string"==typeof M,D,"argument-error"),oe(y.type===Dg,D,"argument-error"),k="string"==typeof g?{phoneNumber:g}:g,"session"in k){const re=k.session;if("phoneNumber"in k)return oe("enroll"===re.type,D,"internal-error"),(yield ci(D,{idToken:re.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{oe("signin"===re.type,D,"internal-error");const Pe=(null===(E=k.multiFactorHint)||void 0===E?void 0:E.uid)||k.multiFactorUid;return oe(Pe,D,"missing-multi-factor-info"),(yield Sc(D,{mfaPendingCredential:re.credential,mfaEnrollmentId:Pe,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:re}=yield rv(D,{phoneNumber:k.phoneNumber,recaptchaToken:M});return re}}finally{y._reset()}})).apply(this,arguments)}function Nl(D,g){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,N.Z)(function*(D,g){yield eo((0,U.m9)(D),g)})).apply(this,arguments)}let Vd=(()=>{class D{constructor(y){this.providerId=D.PROVIDER_ID,this.auth=ar(y)}verifyPhoneNumber(y,E){return ku(this.auth,y,(0,U.m9)(E))}static credential(y,E){return ln._fromVerification(y,E)}static credentialFromResult(y){return D.credentialFromTaggedObject(y)}static credentialFromError(y){return D.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:E,temporaryProof:M}=y;return E&&M?ln._fromTokenResponse(E,M):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function uo(D,g){return g?le(g):(oe(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class di extends Ki{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return ea(g,this._buildIdpRequest())}_linkToIdToken(g,y){return ea(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return ea(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Lu(D){return ia(D.auth,new di(D),D.bypassAuthState)}function fa(D){const{auth:g,user:y}=D;return oe(y,g,"internal-error"),ra(y,new di(D),D.bypassAuthState)}function wh(D){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,N.Z)(function*(D){const{auth:g,user:y}=D;return oe(y,g,"internal-error"),eo(y,new di(D),D.bypassAuthState)})).apply(this,arguments)}class Mc{constructor(g,y,E,M,k=!1){this.auth=g,this.resolver=E,this.user=M,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,N.Z)(function*(E,M){g.pendingPromise={resolve:E,reject:M};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(k){g.reject(k)}});return function(E,M){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,N.Z)(function*(){const{urlResponse:E,sessionId:M,postBody:k,tenantId:re,error:Pe,type:st}=g;if(Pe)return void y.reject(Pe);const lt={auth:y.auth,requestUri:E,sessionId:M,tenantId:re||void 0,postBody:k||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(st)(lt))}catch($t){y.reject($t)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Lu;case"linkViaPopup":case"linkViaRedirect":return wh;case"reauthViaPopup":case"reauthViaRedirect":return fa;default:Ye(this.auth,"internal-error")}}resolve(g){Ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xc=new tt(2e3,1e4);function Eh(D,g,y){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,N.Z)(function*(D,g,y){const E=ar(D);Ce(D,g,Rr);const M=uo(E,y);return new Nc(E,"signInViaPopup",g,M).executeNotNull()})).apply(this,arguments)}function Jr(D,g,y){return ts.apply(this,arguments)}function ts(){return(ts=(0,N.Z)(function*(D,g,y){const E=(0,U.m9)(D);Ce(E.auth,g,Rr);const M=uo(E.auth,y);return new Nc(E.auth,"reauthViaPopup",g,M,E).executeNotNull()})).apply(this,arguments)}function qn(D,g,y){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,N.Z)(function*(D,g,y){const E=(0,U.m9)(D);Ce(E.auth,g,Rr);const M=uo(E.auth,y);return new Nc(E.auth,"linkViaPopup",g,M,E).executeNotNull()})).apply(this,arguments)}let Nc=(()=>{class D extends Mc{constructor(y,E,M,k,re){super(y,E,k,re),this.provider=M,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var y=this;return(0,N.Z)(function*(){const E=yield y.execute();return oe(E,y.auth,"internal-error"),E})()}onExecution(){var y=this;return(0,N.Z)(function*(){Ae(1===y.filter.length,"Popup operations only handle one event");const E=aa();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],E),y.authWindow.associatedEvent=E,y.resolver._originValidation(y.auth).catch(M=>{y.reject(M)}),y.resolver._isIframeWebStorageSupported(y.auth,M=>{M||y.reject(Le(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Le(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const y=()=>{var E,M;this.pollId=null!==(M=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Le(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,xc.get())};y()}}return D.currentPopupAction=null,D})();const Ga=new Map;class Rl extends Mc{constructor(g,y,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,N.Z)(function*(){let E=Ga.get(y.auth._key());if(!E){try{const k=(yield function wg(D,g){return za.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;E=()=>Promise.resolve(k)}catch(M){E=()=>Promise.reject(M)}Ga.set(y.auth._key(),E)}return y.bypassAuthState||Ga.set(y.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,E=this;return(0,N.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(E,g);if("unknown"!==g.type){if(g.eventId){const M=yield E.auth._redirectUserForId(g.eventId);if(M)return E.user=M,y().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,N.Z)(function*(){})()}cleanUp(){}}function za(){return(za=(0,N.Z)(function*(D,g){const y=Dn(g),E=Bd(D);if(!(yield E._isAvailable()))return!1;const M="true"===(yield E._get(y));return yield E._remove(y),M})).apply(this,arguments)}function qa(D,g){return ns.apply(this,arguments)}function ns(){return(ns=(0,N.Z)(function*(D,g){return Bd(D)._set(Dn(g),"true")})).apply(this,arguments)}function Po(){Ga.clear()}function Oo(D,g){Ga.set(D._key(),g)}function Bd(D){return le(D._redirectPersistence)}function Dn(D){return kn("pendingRedirect",D.config.apiKey,D.name)}function Ka(D,g,y){return function pa(D,g,y){return Rc.apply(this,arguments)}(D,g,y)}function Rc(){return(Rc=(0,N.Z)(function*(D,g,y){const E=ar(D);Ce(D,g,Rr);const M=uo(E,y);return yield qa(M,E),M._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function ko(D,g,y){return function Pc(D,g,y){return Pl.apply(this,arguments)}(D,g,y)}function Pl(){return(Pl=(0,N.Z)(function*(D,g,y){const E=(0,U.m9)(D);Ce(E.auth,g,Rr);const M=uo(E.auth,y);yield qa(M,E.auth);const k=yield ue(E);return M._openRedirect(E.auth,g,"reauthViaRedirect",k)})).apply(this,arguments)}function Ih(D,g,y){return function jd(D,g,y){return b.apply(this,arguments)}(D,g,y)}function b(){return(b=(0,N.Z)(function*(D,g,y){const E=(0,U.m9)(D);Ce(E.auth,g,Rr);const M=uo(E.auth,y);yield Yi(!1,E,g.providerId),yield qa(M,E.auth);const k=yield ue(E);return M._openRedirect(E.auth,g,"linkViaRedirect",k)})).apply(this,arguments)}function T(D,g){return x.apply(this,arguments)}function x(){return(x=(0,N.Z)(function*(D,g){return yield ar(D)._initializationPromise,B(D,g,!1)})).apply(this,arguments)}function B(D,g){return ee.apply(this,arguments)}function ee(){return(ee=(0,N.Z)(function*(D,g,y=!1){const E=ar(D),M=uo(E,g),re=yield new Rl(E,M,y).execute();return re&&!y&&(delete re.user._redirectEventId,yield E._persistUserIfCurrent(re.user),yield E._setRedirectUser(null,g)),re})).apply(this,arguments)}function ue(D){return xe.apply(this,arguments)}function xe(){return(xe=(0,N.Z)(function*(D){const g=aa(`${D.uid}:::`);return D._redirectEventId=g,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),g})).apply(this,arguments)}class mt{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(y=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Ct(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ut(D);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var E;if(g.error&&!Ut(g)){const M=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";y.onError(Le(this.auth,M))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const E=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(_t(g))}saveEventToCache(g){this.cachedEventUids.add(_t(g)),this.lastProcessedEventTime=Date.now()}}function _t(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(g=>g).join("-")}function Ut({type:D,error:g}){return"unknown"===D&&"auth/no-auth-event"===g?.code}function fi(D){return _i.apply(this,arguments)}function _i(){return(_i=(0,N.Z)(function*(D,g={}){return jn(D,"GET","/v1/projects",g)})).apply(this,arguments)}const Za=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ju=/^https?/;function Ol(){return(Ol=(0,N.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:g}=yield fi(D);for(const y of g)try{if(ga(y))return}catch{}Ye(D,"unauthorized-domain")})).apply(this,arguments)}function ga(D){const g=He(),{protocol:y,hostname:E}=new URL(g);if(D.startsWith("chrome-extension://")){const re=new URL(D);return""===re.hostname&&""===E?"chrome-extension:"===y&&D.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&re.hostname===E}if(!ju.test(y))return!1;if(Za.test(D))return E===D;const M=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(E)}const ma=new tt(3e4,6e4);function ji(){const D=Nn().___jsl;if(D?.H)for(const g of Object.keys(D.H))if(D.H[g].r=D.H[g].r||[],D.H[g].L=D.H[g].L||[],D.H[g].r=[...D.H[g].L],D.CP)for(let y=0;y<D.CP.length;y++)D.CP[y]=null}let Fo=null;function Eg(D){return Fo=Fo||function Gs(D){return new Promise((g,y)=>{var E,M,k;function re(){ji(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{ji(),y(Le(D,"network-request-failed"))},timeout:ma.get()})}if(null!==(M=null===(E=Nn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==M&&M.Iframe)g(gapi.iframes.getContext());else{if(null===(k=Nn().gapi)||void 0===k||!k.load){const Pe=Hs("iframefcb");return Nn()[Pe]=()=>{gapi.load?re():y(Le(D,"network-request-failed"))},Wa(`https://apis.google.com/js/api.js?onload=${Pe}`).catch(st=>y(st))}re()}}).catch(g=>{throw Fo=null,g})}(D),Fo}const lv=new tt(5e3,15e3),Ud={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kl(D){const g=D.config;oe(g.authDomain,D,"auth-domain-config-required");const y=g.emulator?hn(g,"emulator/auth/iframe"):`https://${D.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:D.name,v:O.SDK_VERSION},M=h0.get(D.config.apiHost);M&&(E.eid=M);const k=D._getFrameworks();return k.length&&(E.fw=k.join(",")),`${y}?${(0,U.xO)(E).slice(1)}`}function Fl(){return Fl=(0,N.Z)(function*(D){const g=yield Eg(D),y=Nn().gapi;return oe(y,D,"internal-error"),g.open({where:document.body,url:kl(D),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ud,dontclear:!0},E=>new Promise(function(){var M=(0,N.Z)(function*(k,re){yield E.restyle({setHideOnLeave:!1});const Pe=Le(D,"network-request-failed"),st=Nn().setTimeout(()=>{re(Pe)},lv.get());function lt(){Nn().clearTimeout(st),k(E)}E.ping(lt).then(lt,()=>{re(Pe)})});return function(k,re){return M.apply(this,arguments)}}()))}),Fl.apply(this,arguments)}const Uu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class kc{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ya(D,g,y,E,M,k){oe(D.config.authDomain,D,"auth-domain-config-required"),oe(D.config.apiKey,D,"invalid-api-key");const re={apiKey:D.config.apiKey,appName:D.name,authType:y,redirectUrl:E,v:O.SDK_VERSION,eventId:M};if(g instanceof Rr){g.setDefaultLanguage(D.languageCode),re.providerId=g.providerId||"",(0,U.xb)(g.getCustomParameters())||(re.customParameters=JSON.stringify(g.getCustomParameters()));for(const[st,lt]of Object.entries(k||{}))re[st]=lt}if(g instanceof Xs){const st=g.getScopes().filter(lt=>""!==lt);st.length>0&&(re.scopes=st.join(","))}D.tenantId&&(re.tid=D.tenantId);const Pe=re;for(const st of Object.keys(Pe))void 0===Pe[st]&&delete Pe[st];return`${function Lc({config:D}){return D.emulator?hn(D,"emulator/auth/handler"):`https://${D.authDomain}/__/auth/handler`}(D)}?${(0,U.xO)(Pe).slice(1)}`}const Hd="webStorageSupport",Hu=class Th{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ja,this._completeRedirectFn=B,this._overrideRedirectResult=Oo}_openPopup(g,y,E,M){var k=this;return(0,N.Z)(function*(){var re;Ae(null===(re=k.eventManagers[g._key()])||void 0===re?void 0:re.manager,"_initialize() not called before _openPopup()");const Pe=Ya(g,y,E,He(),M);return function Cg(D,g,y,E=500,M=600){const k=Math.max((window.screen.availHeight-M)/2,0).toString(),re=Math.max((window.screen.availWidth-E)/2,0).toString();let Pe="";const st=Object.assign(Object.assign({},Uu),{width:E.toString(),height:M.toString(),top:k,left:re}),lt=(0,U.z$)().toLowerCase();y&&(Pe=De(lt)?"_blank":y),W(lt)&&(g=g||"http://localhost",st.scrollbars="yes");const $t=Object.entries(st).reduce((rs,[co,Wd])=>`${rs}${co}=${Wd},`,"");if(function zn(D=(0,U.z$)()){var g;return tn(D)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(lt)&&"_self"!==Pe)return function bh(D,g){const y=document.createElement("a");y.href=D,y.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(E)}(g||"",Pe),new kc(null);const er=window.open(g||"",Pe,$t);oe(er,D,"popup-blocked");try{er.focus()}catch{}return new kc(er)}(g,Pe,aa())})()}_openRedirect(g,y,E,M){var k=this;return(0,N.Z)(function*(){return yield k._originValidation(g),function yh(D){Nn().location.href=D}(Ya(g,y,E,He(),M)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:M,promise:k}=this.eventManagers[y];return M?Promise.resolve(M):(Ae(k,"If manager is not set, promise should be"),k)}const E=this.initAndGetManager(g);return this.eventManagers[y]={promise:E},E.catch(()=>{delete this.eventManagers[y]}),E}initAndGetManager(g){var y=this;return(0,N.Z)(function*(){const E=yield function Qa(D){return Fl.apply(this,arguments)}(g),M=new mt(g);return E.register("authEvent",k=>(oe(k?.authEvent,g,"invalid-auth-event"),{status:M.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:M},y.iframes[g._key()]=E,M})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Hd,{type:Hd},M=>{var k;const re=null===(k=M?.[0])||void 0===k?void 0:k[Hd];void 0!==re&&y(!!re),Ye(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Ci(D){return Ol.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return Fn()||$()||tn()}};class Gu extends class Wu{constructor(g){this.factorId=g}_process(g,y,E){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,E);case"signin":return this._finalizeSignIn(g,y.credential);default:return ye("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Gu(g)}_finalizeEnroll(g,y,E){return function fh(D,g){return jn(D,"POST","/v2/accounts/mfaEnrollment:finalize",Rt(D,g))}(g,{idToken:y,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function la(D,g){return jn(D,"POST","/v2/accounts/mfaSignIn:finalize",Rt(D,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let nn=(()=>{class D{constructor(){}static assertion(y){return Gu._fromCredential(y)}}return D.FACTOR_ID="phone",D})();var g0="@firebase/auth";class MS{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,N.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(E=>{var M;g((null===(M=E)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function NS(D){(0,O._registerComponent)(new ve.wA("auth",(g,{options:y})=>{const E=g.getProvider("app").getImmediate(),M=g.getProvider("heartbeat"),{apiKey:k,authDomain:re}=E.options;return((Pe,st)=>{oe(k&&!k.includes(":"),"invalid-api-key",{appName:Pe.name}),oe(!re?.includes(":"),"argument-error",{appName:Pe.name});const lt={apiKey:k,authDomain:re,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qo(D)},$t=new wu(Pe,st,lt);return function ke(D,g){const y=g?.persistence||[],E=(Array.isArray(y)?y:[y]).map(le);g?.errorMap&&D._updateErrorMap(g.errorMap),D._initializeWithPersistence(E,g?.popupRedirectResolver)}($t,y),$t})(E,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,E)=>{g.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new ve.wA("auth-internal",g=>{const y=ar(g.getProvider("auth").getImmediate());return new MS(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(g0,"0.20.5",function xS(D){switch(D){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(D)),(0,O.registerVersion)(g0,"0.20.5","esm2017")}("Browser")},9835:(Mt,Be,V)=>{V.d(Be,{$s:()=>Oi,BH:()=>it,G6:()=>oe,L:()=>he,LL:()=>He,Mn:()=>Ce,Sg:()=>Ge,UG:()=>pe,US:()=>ve,ZB:()=>G,ZR:()=>ke,b$:()=>Ye,d:()=>Le,eu:()=>Ae,hl:()=>ye,jU:()=>ge,m9:()=>pr,ne:()=>At,pd:()=>Ir,r3:()=>Rt,ru:()=>Xe,tV:()=>Se,uI:()=>Je,vZ:()=>yi,w1:()=>Re,xO:()=>ps,xb:()=>Zt,z$:()=>Ue,zI:()=>te,zd:()=>Vs});const ce=function(X){const H=[];let j=0;for(let z=0;z<X.length;z++){let q=X.charCodeAt(z);q<128?H[j++]=q:q<2048?(H[j++]=q>>6|192,H[j++]=63&q|128):55296==(64512&q)&&z+1<X.length&&56320==(64512&X.charCodeAt(z+1))?(q=65536+((1023&q)<<10)+(1023&X.charCodeAt(++z)),H[j++]=q>>18|240,H[j++]=q>>12&63|128,H[j++]=q>>6&63|128,H[j++]=63&q|128):(H[j++]=q>>12|224,H[j++]=q>>6&63|128,H[j++]=63&q|128)}return H},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(X,H){if(!Array.isArray(X))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,z=[];for(let q=0;q<X.length;q+=3){const Me=X[q],Ze=q+1<X.length,kt=Ze?X[q+1]:0,cn=q+2<X.length,kn=cn?X[q+2]:0;let W=(15&kt)<<2|kn>>6,$=63&kn;cn||($=64,Ze||(W=64)),z.push(j[Me>>2],j[(3&Me)<<4|kt>>4],j[W],j[$])}return z.join("")},encodeString(X,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(X):this.encodeByteArray(ce(X),H)},decodeString(X,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(X):function(X){const H=[];let j=0,z=0;for(;j<X.length;){const q=X[j++];if(q<128)H[z++]=String.fromCharCode(q);else if(q>191&&q<224){const Me=X[j++];H[z++]=String.fromCharCode((31&q)<<6|63&Me)}else if(q>239&&q<365){const cn=((7&q)<<18|(63&X[j++])<<12|(63&X[j++])<<6|63&X[j++])-65536;H[z++]=String.fromCharCode(55296+(cn>>10)),H[z++]=String.fromCharCode(56320+(1023&cn))}else{const Me=X[j++],Ze=X[j++];H[z++]=String.fromCharCode((15&q)<<12|(63&Me)<<6|63&Ze)}}return H.join("")}(this.decodeStringToByteArray(X,H))},decodeStringToByteArray(X,H){this.init_();const j=H?this.charToByteMapWebSafe_:this.charToByteMap_,z=[];for(let q=0;q<X.length;){const Me=j[X.charAt(q++)],kt=q<X.length?j[X.charAt(q)]:0;++q;const kn=q<X.length?j[X.charAt(q)]:64;++q;const J=q<X.length?j[X.charAt(q)]:64;if(++q,null==Me||null==kt||null==kn||null==J)throw Error();z.push(Me<<2|kt>>4),64!==kn&&(z.push(kt<<4&240|kn>>2),64!==J&&z.push(kn<<6&192|J))}return z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let X=0;X<this.ENCODED_VALS.length;X++)this.byteToCharMap_[X]=this.ENCODED_VALS.charAt(X),this.charToByteMap_[this.byteToCharMap_[X]]=X,this.byteToCharMapWebSafe_[X]=this.ENCODED_VALS_WEBSAFE.charAt(X),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[X]]=X,X>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(X)]=X,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(X)]=X)}}},he=function(X){return function(X){const H=ce(X);return ve.encodeByteArray(H,!0)}(X).replace(/\./g,"")},Se=function(X){try{return ve.decodeString(X,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function G(X,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===X&&(X={});break;case Array:X=[];break;default:return H}for(const j in H)!H.hasOwnProperty(j)||!ie(j)||(X[j]=G(X[j],H[j]));return X}function ie(X){return"__proto__"!==X}class it{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,j)=>{this.resolve=H,this.reject=j})}wrapCallback(H){return(j,z)=>{j?this.reject(j):this.resolve(z),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(j):H(j,z))}}}function Ge(X,H){if(X.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const z=H||"demo-project",q=X.iat||0,Me=X.sub||X.user_id;if(!Me)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ze=Object.assign({iss:`https://securetoken.google.com/${z}`,aud:z,iat:q,exp:q+3600,auth_time:q,sub:Me,user_id:Me,firebase:{sign_in_provider:"custom",identities:{}}},X);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Ze)),""].join(".")}function Ue(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Je(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ge(){return"object"==typeof self&&self.self===self}function Xe(){const X="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof X&&void 0!==X.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Le(){return Ue().indexOf("Electron/")>=0}function Re(){const X=Ue();return X.indexOf("MSIE ")>=0||X.indexOf("Trident/")>=0}function Ce(){return Ue().indexOf("MSAppHost/")>=0}function oe(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ye(){return"object"==typeof indexedDB}function Ae(){return new Promise((X,H)=>{try{let j=!0;const z="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(z);q.onsuccess=()=>{q.result.close(),j||self.indexedDB.deleteDatabase(z),X(!0)},q.onupgradeneeded=()=>{j=!1},q.onerror=()=>{var Me;H((null===(Me=q.error)||void 0===Me?void 0:Me.message)||"")}}catch(j){H(j)}})}function te(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ke extends Error{constructor(H,j,z){super(j),this.code=H,this.customData=z,this.name="FirebaseError",Object.setPrototypeOf(this,ke.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,He.prototype.create)}}class He{constructor(H,j,z){this.service=H,this.serviceName=j,this.errors=z}create(H,...j){const z=j[0]||{},q=`${this.service}/${H}`,Me=this.errors[H],Ze=Me?function Ne(X,H){return X.replace(Tt,(j,z)=>{const q=H[z];return null!=q?String(q):`<${z}?>`})}(Me,z):"Error";return new ke(q,`${this.serviceName}: ${Ze} (${q}).`,z)}}const Tt=/\{\$([^}]+)}/g;function Rt(X,H){return Object.prototype.hasOwnProperty.call(X,H)}function Zt(X){for(const H in X)if(Object.prototype.hasOwnProperty.call(X,H))return!1;return!0}function yi(X,H){if(X===H)return!0;const j=Object.keys(X),z=Object.keys(H);for(const q of j){if(!z.includes(q))return!1;const Me=X[q],Ze=H[q];if(Kn(Me)&&Kn(Ze)){if(!yi(Me,Ze))return!1}else if(Me!==Ze)return!1}for(const q of z)if(!j.includes(q))return!1;return!0}function Kn(X){return null!==X&&"object"==typeof X}function ps(X){const H=[];for(const[j,z]of Object.entries(X))Array.isArray(z)?z.forEach(q=>{H.push(encodeURIComponent(j)+"="+encodeURIComponent(q))}):H.push(encodeURIComponent(j)+"="+encodeURIComponent(z));return H.length?"&"+H.join("&"):""}function Vs(X){const H={};return X.replace(/^\?/,"").split("&").forEach(z=>{if(z){const[q,Me]=z.split("=");H[decodeURIComponent(q)]=decodeURIComponent(Me)}}),H}function Ir(X){const H=X.indexOf("?");if(!H)return"";const j=X.indexOf("#",H);return X.substring(H,j>0?j:void 0)}function At(X,H){const j=new Gr(X,H);return j.subscribe.bind(j)}class Gr{constructor(H,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{H(this)}).catch(z=>{this.error(z)})}next(H){this.forEachObserver(j=>{j.next(H)})}error(H){this.forEachObserver(j=>{j.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,j,z){let q;if(void 0===H&&void 0===j&&void 0===z)throw new Error("Missing Observer.");q=function En(X,H){if("object"!=typeof X||null===X)return!1;for(const j of H)if(j in X&&"function"==typeof X[j])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:j,complete:z},void 0===q.next&&(q.next=Mr),void 0===q.error&&(q.error=Mr),void 0===q.complete&&(q.complete=Mr);const Me=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),Me}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,H)}sendOne(H,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{j(this.observers[H])}catch(z){typeof console<"u"&&console.error&&console.error(z)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mr(){}function Oi(X,H=1e3,j=2){const z=H*Math.pow(j,X),q=Math.round(.5*z*(Math.random()-.5)*2);return Math.min(144e5,z+q)}function pr(X){return X&&X._delegate?X._delegate:X}},9689:(Mt,Be,V)=>{V.d(Be,{C6:()=>N.getApps,KN:()=>N.registerVersion,Mq:()=>N.getApp,ZF:()=>N.initializeApp});var N=V(4567);(0,N.registerVersion)("firebase","9.9.3","app")},5456:(Mt,Be,V)=>{V.d(Be,{Z:()=>N.Z});var N=V(8201);N.Z.registerVersion("firebase","9.9.3","app-compat")},4824:(Mt,Be,V)=>{V.r(Be);var N=V(5861),U=V(8201),O=V(7017),ce=V(9835),Ie=(V(4567),V(9794),V(9903));function he(){return window}function G(){return(G=(0,N.Z)(function*(J,W,$){var De;const{BuildInfo:Ke}=he();(0,O.aq)(W.sessionId,"AuthEvent did not contain a session ID");const Ee=yield ge(W.sessionId),nt={};return(0,O.ar)()?nt.ibi=Ke.packageName:(0,O.as)()?nt.apn=Ke.packageName:(0,O.at)(J,"operation-not-supported-in-this-environment"),Ke.displayName&&(nt.appDisplayName=Ke.displayName),nt.sessionId=Ee,(0,O.au)(J,$,W.type,void 0,null!==(De=W.eventId)&&void 0!==De?De:void 0,nt)})).apply(this,arguments)}function it(){return(it=(0,N.Z)(function*(J){const{BuildInfo:W}=he(),$={};(0,O.ar)()?$.iosBundleId=W.packageName:(0,O.as)()?$.androidPackageName=W.packageName:(0,O.at)(J,"operation-not-supported-in-this-environment"),yield(0,O.av)(J,$)})).apply(this,arguments)}function Je(){return(Je=(0,N.Z)(function*(J,W,$){const{cordova:De}=he();let Ke=()=>{};try{yield new Promise((Ee,nt)=>{let pt=null;function tn(){var rn;Ee();const Fn=null===(rn=De.plugins.browsertab)||void 0===rn?void 0:rn.close;"function"==typeof Fn&&Fn(),"function"==typeof $?.close&&$.close()}function Gn(){pt||(pt=window.setTimeout(()=>{nt((0,O.aw)(J,"redirect-cancelled-by-user"))},2e3))}function zn(){"visible"===document?.visibilityState&&Gn()}W.addPassiveListener(tn),document.addEventListener("resume",Gn,!1),(0,O.as)()&&document.addEventListener("visibilitychange",zn,!1),Ke=()=>{W.removePassiveListener(tn),document.removeEventListener("resume",Gn,!1),document.removeEventListener("visibilitychange",zn,!1),pt&&window.clearTimeout(pt)}})}finally{Ke()}})).apply(this,arguments)}function ge(J){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,N.Z)(function*(J){const W=Ye(J),$=yield crypto.subtle.digest("SHA-256",W);return Array.from(new Uint8Array($)).map(Ke=>Ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ye(J){if((0,O.aq)(/[0-9a-zA-Z]+/.test(J),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(J);const W=new ArrayBuffer(J.length),$=new Uint8Array(W);for(let De=0;De<J.length;De++)$[De]=J.charCodeAt(De);return $}class Re extends O.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(W=>{this.resolveInialized=W})}addPassiveListener(W){this.passiveListeners.add(W)}removePassiveListener(W){this.passiveListeners.delete(W)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(W){return this.resolveInialized(),this.passiveListeners.forEach($=>$(W)),super.onEvent(W)}initialized(){var W=this;return(0,N.Z)(function*(){yield W.initPromise})()}}function oe(J){return ye.apply(this,arguments)}function ye(){return(ye=(0,N.Z)(function*(J){const W=yield le()._get(we(J));return W&&(yield le()._remove(we(J))),W})).apply(this,arguments)}function te(){const J=[],W="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let $=0;$<20;$++){const De=Math.floor(Math.random()*W.length);J.push(W.charAt(De))}return J.join("")}function le(){return(0,O.ay)(O.b)}function we(J){return(0,O.az)("authEvent",J.config.apiKey,J.name)}function Ne(J){if(!J?.includes("?"))return{};const[W,...$]=J.split("?");return(0,ce.zd)($.join("?"))}function tt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function Rt(){var J;return(null===(J=self?.location)||void 0===J?void 0:J.protocol)||null}function Zt(J=(0,ce.z$)()){return!("file:"!==Rt()&&"ionic:"!==Rt()&&"capacitor:"!==Rt()||!J.toLowerCase().match(/iphone|ipad|ipod|android/))}function ps(){try{const J=self.localStorage,W=O.aI();if(J)return J.setItem(W,"1"),J.removeItem(W),!function Qs(J=(0,ce.z$)()){return function yi(){return(0,ce.w1)()&&11===document?.documentMode}()||function Kn(J=(0,ce.z$)()){return/Edge\/\d+/.test(J)}(J)}()||(0,ce.hl)()}catch{return Vs()&&(0,ce.hl)()}return!1}function Vs(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ir(){return(function jn(){return"http:"===Rt()||"https:"===Rt()}()||(0,ce.ru)()||Zt())&&!function Ls(){return(0,ce.b$)()||(0,ce.UG)()}()&&ps()&&!Vs()}function Ys(){return Zt()&&typeof document<"u"}function Gr(){return(Gr=(0,N.Z)(function*(){return!!Ys()&&new Promise(J=>{const W=setTimeout(()=>{J(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(W),J(!0)})})})).apply(this,arguments)}const En={LOCAL:"local",NONE:"none",SESSION:"session"},Mr=O.ax,Pi="persistence";function nr(J){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,N.Z)(function*(J){yield J._initializationPromise;const W=si(),$=O.az(Pi,J.config.apiKey,J.name);W&&W.setItem($,J._getPersistence())})).apply(this,arguments)}function si(){var J;try{return(null===(J=function zi(){return typeof window<"u"?window:null}())||void 0===J?void 0:J.sessionStorage)||null}catch{return null}}const $n=O.ax;class or{constructor(){this.browserResolver=O.ay(O.k),this.cordovaResolver=O.ay(class wn{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(W){var $=this;return(0,N.Z)(function*(){const De=W._key();let Ke=$.eventManagers.get(De);return Ke||(Ke=new Re(W),$.eventManagers.set(De,Ke),$.attachCallbackListeners(W,Ke)),Ke})()}_openPopup(W){(0,O.at)(W,"operation-not-supported-in-this-environment")}_openRedirect(W,$,De,Ke){var Ee=this;return(0,N.Z)(function*(){!function pe(J){var W,$,De,Ke,Ee,nt,pt,tn,Gn,zn;const rn=he();(0,O.ax)("function"==typeof(null===(W=rn?.universalLinks)||void 0===W?void 0:W.subscribe),J,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(typeof(null===($=rn?.BuildInfo)||void 0===$?void 0:$.packageName)<"u",J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(Ee=null===(Ke=null===(De=rn?.cordova)||void 0===De?void 0:De.plugins)||void 0===Ke?void 0:Ke.browsertab)||void 0===Ee?void 0:Ee.openUrl),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(tn=null===(pt=null===(nt=rn?.cordova)||void 0===nt?void 0:nt.plugins)||void 0===pt?void 0:pt.browsertab)||void 0===tn?void 0:tn.isAvailable),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(zn=null===(Gn=rn?.cordova)||void 0===Gn?void 0:Gn.InAppBrowser)||void 0===zn?void 0:zn.open),J,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(W);const nt=yield Ee._initialize(W);yield nt.initialized(),nt.resetRedirect(),(0,O.aD)(),yield Ee._originValidation(W);const pt=function Ce(J,W,$=null){return{type:W,eventId:$,urlResponse:null,sessionId:te(),postBody:null,tenantId:J.tenantId,error:(0,O.aw)(J,"no-auth-event")}}(W,De,Ke);yield function et(J,W){return le()._set(we(J),W)}(W,pt);const tn=yield function Z(J,W,$){return G.apply(this,arguments)}(W,pt,$),Gn=yield function Ge(J){const{cordova:W}=he();return new Promise($=>{W.plugins.browsertab.isAvailable(De=>{let Ke=null;De?W.plugins.browsertab.openUrl(J):Ke=W.InAppBrowser.open(J,(0,O.ap)()?"_blank":"_system","location=yes"),$(Ke)})})}(tn);return function Ue(J,W,$){return Je.apply(this,arguments)}(W,nt,Gn)})()}_isIframeWebStorageSupported(W,$){throw new Error("Method not implemented.")}_originValidation(W){const $=W._key();return this.originValidationPromises[$]||(this.originValidationPromises[$]=function ie(J){return it.apply(this,arguments)}(W)),this.originValidationPromises[$]}attachCallbackListeners(W,$){const{universalLinks:De,handleOpenURL:Ke,BuildInfo:Ee}=he(),nt=setTimeout((0,N.Z)(function*(){yield oe(W),$.onEvent(tt())}),500),pt=function(){var zn=(0,N.Z)(function*(rn){clearTimeout(nt);const Fn=yield oe(W);let Js=null;Fn&&rn?.url&&(Js=function Ae(J,W){var $,De;const Ke=function He(J){const W=Ne(J),$=W.link?decodeURIComponent(W.link):void 0,De=Ne($).link,Ke=W.deep_link_id?decodeURIComponent(W.deep_link_id):void 0;return Ne(Ke).link||Ke||De||$||J}(W);if(Ke.includes("/__/auth/callback")){const Ee=Ne(Ke),nt=Ee.firebaseError?function ke(J){try{return JSON.parse(J)}catch{return null}}(decodeURIComponent(Ee.firebaseError)):null,pt=null===(De=null===($=nt?.code)||void 0===$?void 0:$.split("auth/"))||void 0===De?void 0:De[1],tn=pt?(0,O.aw)(pt):null;return tn?{type:J.type,eventId:J.eventId,tenantId:J.tenantId,error:tn,urlResponse:null,sessionId:null,postBody:null}:{type:J.type,eventId:J.eventId,tenantId:J.tenantId,sessionId:J.sessionId,urlResponse:Ke,postBody:null}}return null}(Fn,rn.url)),$.onEvent(Js||tt())});return function(Fn){return zn.apply(this,arguments)}}();typeof De<"u"&&"function"==typeof De.subscribe&&De.subscribe(null,pt);const tn=Ke,Gn=`${Ee.packageName.toLowerCase()}://`;he().handleOpenURL=function(){var zn=(0,N.Z)(function*(rn){if(rn.toLowerCase().startsWith(Gn)&&pt({url:rn}),"function"==typeof tn)try{tn(rn)}catch(Fn){console.error(Fn)}});return function(rn){return zn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(W){var $=this;return(0,N.Z)(function*(){return yield $.selectUnderlyingResolver(),$.assertedUnderlyingResolver._initialize(W)})()}_openPopup(W,$,De,Ke){var Ee=this;return(0,N.Z)(function*(){return yield Ee.selectUnderlyingResolver(),Ee.assertedUnderlyingResolver._openPopup(W,$,De,Ke)})()}_openRedirect(W,$,De,Ke){var Ee=this;return(0,N.Z)(function*(){return yield Ee.selectUnderlyingResolver(),Ee.assertedUnderlyingResolver._openRedirect(W,$,De,Ke)})()}_isIframeWebStorageSupported(W,$){this.assertedUnderlyingResolver._isIframeWebStorageSupported(W,$)}_originValidation(W){return this.assertedUnderlyingResolver._originValidation(W)}get _shouldInitProactively(){return Ys()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return $n(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var W=this;return(0,N.Z)(function*(){if(W.underlyingResolver)return;const $=yield function At(){return Gr.apply(this,arguments)}();W.underlyingResolver=$?W.cordovaResolver:W.browserResolver})()}}function gs(J){return J.unwrap()}function pn(J){return Oi(J)}function Oi(J){const{_tokenResponse:W}=J instanceof ce.ZR?J.customData:J;if(!W)return null;if(!(J instanceof ce.ZR)&&"temporaryProof"in W&&"phoneNumber"in W)return O.P.credentialFromResult(J);const $=W.providerId;if(!$||$===O.o.PASSWORD)return null;let De;switch($){case O.o.GOOGLE:De=O.Q;break;case O.o.FACEBOOK:De=O.N;break;case O.o.GITHUB:De=O.T;break;case O.o.TWITTER:De=O.W;break;default:const{oauthIdToken:Ke,oauthAccessToken:Ee,oauthTokenSecret:nt,pendingToken:pt,nonce:tn}=W;return Ee||nt||Ke||pt?pt?$.startsWith("saml.")?O.aL._create($,pt):O.J._fromParams({providerId:$,signInMethod:$,pendingToken:pt,idToken:Ke,accessToken:Ee}):new O.U($).credential({idToken:Ke,accessToken:Ee,rawNonce:tn}):null}return J instanceof ce.ZR?De.credentialFromError(J):De.credentialFromResult(J)}function rr(J,W){return W.catch($=>{throw $ instanceof ce.ZR&&function ms(J,W){var $,De;const Ke=null===($=W.customData)||void 0===$?void 0:$._tokenResponse;if("auth/multi-factor-auth-required"===(null===(De=W)||void 0===De?void 0:De.code))W.resolver=new X(J,O.an(J,W));else if(Ke){const Ee=Oi(W),nt=W;Ee&&(nt.credential=Ee,nt.tenantId=Ke.tenantId||void 0,nt.email=Ke.email||void 0,nt.phoneNumber=Ke.phoneNumber||void 0)}}(J,$),$}).then($=>{const Ke=$.user;return{operationType:$.operationType,credential:pn($),additionalUserInfo:O.al($),user:H.getOrCreate(Ke)}})}function ki(J,W){return pr.apply(this,arguments)}function pr(){return(pr=(0,N.Z)(function*(J,W){const $=yield W;return{verificationId:$.verificationId,confirm:De=>rr(J,$.confirm(De))}})).apply(this,arguments)}class X{constructor(W,$){this.resolver=$,this.auth=function Ii(J){return J.wrapped()}(W)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(W){return rr(gs(this.auth),this.resolver.resolveSignIn(W))}}class H{constructor(W){this._delegate=W,this.multiFactor=O.ao(W)}static getOrCreate(W){return H.USER_MAP.has(W)||H.USER_MAP.set(W,new H(W)),H.USER_MAP.get(W)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(W){return this._delegate.getIdTokenResult(W)}getIdToken(W){return this._delegate.getIdToken(W)}linkAndRetrieveDataWithCredential(W){return this.linkWithCredential(W)}linkWithCredential(W){var $=this;return(0,N.Z)(function*(){return rr($.auth,O.Z($._delegate,W))})()}linkWithPhoneNumber(W,$){var De=this;return(0,N.Z)(function*(){return ki(De.auth,O.l(De._delegate,W,$))})()}linkWithPopup(W){var $=this;return(0,N.Z)(function*(){return rr($.auth,O.d($._delegate,W,or))})()}linkWithRedirect(W){var $=this;return(0,N.Z)(function*(){return yield nr(O.aE($.auth)),O.g($._delegate,W,or)})()}reauthenticateAndRetrieveDataWithCredential(W){return this.reauthenticateWithCredential(W)}reauthenticateWithCredential(W){var $=this;return(0,N.Z)(function*(){return rr($.auth,O._($._delegate,W))})()}reauthenticateWithPhoneNumber(W,$){return ki(this.auth,O.r(this._delegate,W,$))}reauthenticateWithPopup(W){return rr(this.auth,O.e(this._delegate,W,or))}reauthenticateWithRedirect(W){var $=this;return(0,N.Z)(function*(){return yield nr(O.aE($.auth)),O.h($._delegate,W,or)})()}sendEmailVerification(W){return O.ab(this._delegate,W)}unlink(W){var $=this;return(0,N.Z)(function*(){return yield O.ak($._delegate,W),$})()}updateEmail(W){return O.ag(this._delegate,W)}updatePassword(W){return O.ah(this._delegate,W)}updatePhoneNumber(W){return O.u(this._delegate,W)}updateProfile(W){return O.af(this._delegate,W)}verifyBeforeUpdateEmail(W,$){return O.ac(this._delegate,W,$)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}H.USER_MAP=new WeakMap;const j=O.ax;let z=(()=>{class J{constructor($,De){if(this.app=$,De.isInitialized())return this._delegate=De.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ke}=$.options;j(Ke,"invalid-api-key",{appName:$.name}),j(Ke,"invalid-api-key",{appName:$.name});const Ee=typeof window<"u"?or:void 0;this._delegate=De.initialize({options:{persistence:Me(Ke,$.name),popupRedirectResolver:Ee}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?H.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode($){this._delegate.languageCode=$}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId($){this._delegate.tenantId=$}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator($,De){O.G(this._delegate,$,De)}applyActionCode($){return O.a2(this._delegate,$)}checkActionCode($){return O.a3(this._delegate,$)}confirmPasswordReset($,De){return O.a1(this._delegate,$,De)}createUserWithEmailAndPassword($,De){var Ke=this;return(0,N.Z)(function*(){return rr(Ke._delegate,O.a5(Ke._delegate,$,De))})()}fetchProvidersForEmail($){return this.fetchSignInMethodsForEmail($)}fetchSignInMethodsForEmail($){return O.aa(this._delegate,$)}isSignInWithEmailLink($){return O.a8(this._delegate,$)}getRedirectResult(){var $=this;return(0,N.Z)(function*(){j(Ir(),$._delegate,"operation-not-supported-in-this-environment");const De=yield O.j($._delegate,or);return De?rr($._delegate,Promise.resolve(De)):{credential:null,user:null}})()}addFrameworkForLogging($){!function hn(J,W){(0,O.aE)(J)._logFramework(W)}(this._delegate,$)}onAuthStateChanged($,De,Ke){const{next:Ee,error:nt,complete:pt}=q($,De,Ke);return this._delegate.onAuthStateChanged(Ee,nt,pt)}onIdTokenChanged($,De,Ke){const{next:Ee,error:nt,complete:pt}=q($,De,Ke);return this._delegate.onIdTokenChanged(Ee,nt,pt)}sendSignInLinkToEmail($,De){return O.a7(this._delegate,$,De)}sendPasswordResetEmail($,De){return O.a0(this._delegate,$,De||void 0)}setPersistence($){var De=this;return(0,N.Z)(function*(){let Ke;switch(function ii(J,W){Mr(Object.values(En).includes(W),J,"invalid-persistence-type"),(0,ce.b$)()?Mr(W!==En.SESSION,J,"unsupported-persistence-type"):(0,ce.UG)()?Mr(W===En.NONE,J,"unsupported-persistence-type"):Vs()?Mr(W===En.NONE||W===En.LOCAL&&(0,ce.hl)(),J,"unsupported-persistence-type"):Mr(W===En.NONE||ps(),J,"unsupported-persistence-type")}(De._delegate,$),$){case En.SESSION:Ke=O.a;break;case En.LOCAL:Ke=(yield O.ay(O.i)._isAvailable())?O.i:O.b;break;case En.NONE:Ke=O.L;break;default:return O.at("argument-error",{appName:De._delegate.name})}return De._delegate.setPersistence(Ke)})()}signInAndRetrieveDataWithCredential($){return this.signInWithCredential($)}signInAnonymously(){return rr(this._delegate,O.X(this._delegate))}signInWithCredential($){return rr(this._delegate,O.Y(this._delegate,$))}signInWithCustomToken($){return rr(this._delegate,O.$(this._delegate,$))}signInWithEmailAndPassword($,De){return rr(this._delegate,O.a6(this._delegate,$,De))}signInWithEmailLink($,De){return rr(this._delegate,O.a9(this._delegate,$,De))}signInWithPhoneNumber($,De){return ki(this._delegate,O.s(this._delegate,$,De))}signInWithPopup($){var De=this;return(0,N.Z)(function*(){return j(Ir(),De._delegate,"operation-not-supported-in-this-environment"),rr(De._delegate,O.c(De._delegate,$,or))})()}signInWithRedirect($){var De=this;return(0,N.Z)(function*(){return j(Ir(),De._delegate,"operation-not-supported-in-this-environment"),yield nr(De._delegate),O.f(De._delegate,$,or)})()}updateCurrentUser($){return this._delegate.updateCurrentUser($)}verifyPasswordResetCode($){return O.a4(this._delegate,$)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return J.Persistence=En,J})();function q(J,W,$){let De=J;"function"!=typeof J&&({next:De,error:W,complete:$}=J);const Ke=De;return{next:nt=>Ke(nt&&H.getOrCreate(nt)),error:W,complete:$}}function Me(J,W){const $=function bo(J,W){const $=si();if(!$)return[];const De=O.az(Pi,J,W);switch($.getItem(De)){case En.NONE:return[O.L];case En.LOCAL:return[O.i,O.a];case En.SESSION:return[O.a];default:return[]}}(J,W);if(typeof self<"u"&&!$.includes(O.i)&&$.push(O.i),typeof window<"u")for(const De of[O.b,O.a])$.includes(De)||$.push(De);return $.includes(O.L)||$.push(O.L),$}class Ze{constructor(){this.providerId="phone",this._delegate=new O.P(gs(U.Z.auth()))}static credential(W,$){return O.P.credential(W,$)}verifyPhoneNumber(W,$){return this._delegate.verifyPhoneNumber(W,$)}unwrap(){return this._delegate}}Ze.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,Ze.PROVIDER_ID=O.P.PROVIDER_ID;const kt=O.ax;class cn{constructor(W,$,De=U.Z.app()){var Ke;kt(null===(Ke=De.options)||void 0===Ke?void 0:Ke.apiKey,"invalid-api-key",{appName:De.name}),this._delegate=new O.R(W,$,De.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function xr(J){J.INTERNAL.registerComponent(new Ie.wA("auth-compat",W=>{const $=W.getProvider("app-compat").getImmediate(),De=W.getProvider("auth");return new z($,De)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:Ze,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:cn,TwitterAuthProvider:O.W,Auth:z,AuthCredential:O.H,Error:ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),J.registerVersion("@firebase/auth-compat","0.2.18")}(U.Z)},7979:(Mt,Be,V)=>{V.d(Be,{y:()=>Z});var N=V(5938),U=V(7746),O=V(6247),ce=V(5637);var Ie=V(1346),he=V(2259),Se=V(208);let Z=(()=>{class Ge{constructor(Je){Je&&(this._subscribe=Je)}lift(Je){const pe=new Ge;return pe.source=this,pe.operator=Je,pe}subscribe(Je,pe,ge){const Xe=function it(Ge){return Ge&&Ge instanceof N.Lv||function ie(Ge){return Ge&&(0,he.m)(Ge.next)&&(0,he.m)(Ge.error)&&(0,he.m)(Ge.complete)}(Ge)&&(0,U.Nn)(Ge)}(Je)?Je:new N.Hp(Je,pe,ge);return(0,Se.x)(()=>{const{operator:Ye,source:Le}=this;Xe.add(Ye?Ye.call(Xe,Le):Le?this._subscribe(Xe):this._trySubscribe(Xe))}),Xe}_trySubscribe(Je){try{return this._subscribe(Je)}catch(pe){Je.error(pe)}}forEach(Je,pe){return new(pe=G(pe))((ge,Xe)=>{const Ye=new N.Hp({next:Le=>{try{Je(Le)}catch(Re){Xe(Re),Ye.unsubscribe()}},error:Xe,complete:ge});this.subscribe(Ye)})}_subscribe(Je){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Je)}[O.L](){return this}pipe(...Je){return function ve(Ge){return 0===Ge.length?ce.y:1===Ge.length?Ge[0]:function(Je){return Ge.reduce((pe,ge)=>ge(pe),Je)}}(Je)(this)}toPromise(Je){return new(Je=G(Je))((pe,ge)=>{let Xe;this.subscribe(Ye=>Xe=Ye,Ye=>ge(Ye),()=>pe(Xe))})}}return Ge.create=Ue=>new Ge(Ue),Ge})();function G(Ge){var Ue;return null!==(Ue=Ge??Ie.v.Promise)&&void 0!==Ue?Ue:Promise}},4220:(Mt,Be,V)=>{V.d(Be,{x:()=>Ie});var N=V(7979),U=V(7746);const ce=(0,V(496).d)(Se=>function(){Se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=V(7922),ve=V(208);let Ie=(()=>{class Se extends N.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const ie=new he(this,this);return ie.operator=G,ie}_throwIfClosed(){if(this.closed)throw new ce}next(G){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ie of this.currentObservers)ie.next(G)}})}error(G){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:ie}=this;for(;ie.length;)ie.shift().error(G)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:ie,isStopped:it,observers:Ge}=this;return ie||it?U.Lc:(this.currentObservers=null,Ge.push(G),new U.w0(()=>{this.currentObservers=null,(0,ae.P)(Ge,G)}))}_checkFinalizedStatuses(G){const{hasError:ie,thrownError:it,isStopped:Ge}=this;ie?G.error(it):Ge&&G.complete()}asObservable(){const G=new N.y;return G.source=this,G}}return Se.create=(Z,G)=>new he(Z,G),Se})();class he extends Ie{constructor(Z,G){super(),this.destination=Z,this.source=G}next(Z){var G,ie;null===(ie=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===ie||ie.call(G,Z)}error(Z){var G,ie;null===(ie=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===ie||ie.call(G,Z)}complete(){var Z,G;null===(G=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===G||G.call(Z)}_subscribe(Z){var G,ie;return null!==(ie=null===(G=this.source)||void 0===G?void 0:G.subscribe(Z))&&void 0!==ie?ie:U.Lc}}},5938:(Mt,Be,V)=>{V.d(Be,{Hp:()=>Je,Lv:()=>ie});var N=V(2259),U=V(7746),O=V(1346),ce=V(1808);function ae(){}const ve=Se("C",void 0,void 0);function Se(Le,Re,Ce){return{kind:Le,value:Re,error:Ce}}var Z=V(9366),G=V(208);class ie extends U.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,U.Nn)(Re)&&Re.add(this)):this.destination=Ye}static create(Re,Ce,et){return new Je(Re,Ce,et)}next(Re){this.isStopped?Xe(function he(Le){return Se("N",Le,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?Xe(function Ie(Le){return Se("E",void 0,Le)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?Xe(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const it=Function.prototype.bind;function Ge(Le,Re){return it.call(Le,Re)}class Ue{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(Re)}catch(et){pe(et)}}error(Re){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(Re)}catch(et){pe(et)}else pe(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(Ce){pe(Ce)}}}class Je extends ie{constructor(Re,Ce,et){let oe;if(super(),(0,N.m)(Re)||!Re)oe={next:Re??void 0,error:Ce??void 0,complete:et??void 0};else{let ye;this&&O.v.useDeprecatedNextContext?(ye=Object.create(Re),ye.unsubscribe=()=>this.unsubscribe(),oe={next:Re.next&&Ge(Re.next,ye),error:Re.error&&Ge(Re.error,ye),complete:Re.complete&&Ge(Re.complete,ye)}):oe=Re}this.destination=new Ue(oe)}}function pe(Le){O.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Le):(0,ce.h)(Le)}function Xe(Le,Re){const{onStoppedNotification:Ce}=O.v;Ce&&Z.z.setTimeout(()=>Ce(Le,Re))}const Ye={closed:!0,next:ae,error:function ge(Le){throw Le},complete:ae}},7746:(Mt,Be,V)=>{V.d(Be,{Lc:()=>ve,w0:()=>ae,Nn:()=>Ie});var N=V(2259);const O=(0,V(496).d)(Se=>function(G){Se(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((ie,it)=>`${it+1}) ${ie.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var ce=V(7922);class ae{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Ge of G)Ge.remove(this);else G.remove(this);const{initialTeardown:ie}=this;if((0,N.m)(ie))try{ie()}catch(Ge){Z=Ge instanceof O?Ge.errors:[Ge]}const{_finalizers:it}=this;if(it){this._finalizers=null;for(const Ge of it)try{he(Ge)}catch(Ue){Z=Z??[],Ue instanceof O?Z=[...Z,...Ue.errors]:Z.push(Ue)}}if(Z)throw new O(Z)}}add(Z){var G;if(Z&&Z!==this)if(this.closed)he(Z);else{if(Z instanceof ae){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(Z)}}_hasParent(Z){const{_parentage:G}=this;return G===Z||Array.isArray(G)&&G.includes(Z)}_addParent(Z){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(Z),G):G?[G,Z]:Z}_removeParent(Z){const{_parentage:G}=this;G===Z?this._parentage=null:Array.isArray(G)&&(0,ce.P)(G,Z)}remove(Z){const{_finalizers:G}=this;G&&(0,ce.P)(G,Z),Z instanceof ae&&Z._removeParent(this)}}ae.EMPTY=(()=>{const Se=new ae;return Se.closed=!0,Se})();const ve=ae.EMPTY;function Ie(Se){return Se instanceof ae||Se&&"closed"in Se&&(0,N.m)(Se.remove)&&(0,N.m)(Se.add)&&(0,N.m)(Se.unsubscribe)}function he(Se){(0,N.m)(Se)?Se():Se.unsubscribe()}},1346:(Mt,Be,V)=>{V.d(Be,{v:()=>N});const N={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9137:(Mt,Be,V)=>{V.d(Be,{E:()=>U});const U=new(V(7979).y)(ae=>ae.complete())},6397:(Mt,Be,V)=>{V.d(Be,{D:()=>Re});var N=V(1997),U=V(7498),O=V(4138),ve=V(7979),he=V(3799),Se=V(2259),Z=V(3054);function ie(Ce,et){if(!Ce)throw new Error("Iterable cannot be null");return new ve.y(oe=>{(0,Z.f)(oe,et,()=>{const ye=Ce[Symbol.asyncIterator]();(0,Z.f)(oe,et,()=>{ye.next().then(Ae=>{Ae.done?oe.complete():oe.next(Ae.value)})},0,!0)})})}var it=V(3585),Ge=V(2898),Ue=V(7601),Je=V(694),pe=V(71),ge=V(6096),Xe=V(5550);function Re(Ce,et){return et?function Le(Ce,et){if(null!=Ce){if((0,it.c)(Ce))return function ce(Ce,et){return(0,N.Xf)(Ce).pipe((0,O.R)(et),(0,U.Q)(et))}(Ce,et);if((0,Ue.z)(Ce))return function Ie(Ce,et){return new ve.y(oe=>{let ye=0;return et.schedule(function(){ye===Ce.length?oe.complete():(oe.next(Ce[ye++]),oe.closed||this.schedule())})})}(Ce,et);if((0,Ge.t)(Ce))return function ae(Ce,et){return(0,N.Xf)(Ce).pipe((0,O.R)(et),(0,U.Q)(et))}(Ce,et);if((0,pe.D)(Ce))return ie(Ce,et);if((0,Je.T)(Ce))return function G(Ce,et){return new ve.y(oe=>{let ye;return(0,Z.f)(oe,et,()=>{ye=Ce[he.h](),(0,Z.f)(oe,et,()=>{let Ae,te;try{({value:Ae,done:te}=ye.next())}catch(le){return void oe.error(le)}te?oe.complete():oe.next(Ae)},0,!0)}),()=>(0,Se.m)(ye?.return)&&ye.return()})}(Ce,et);if((0,Xe.L)(Ce))return function Ye(Ce,et){return ie((0,Xe.Q)(Ce),et)}(Ce,et)}throw(0,ge.z)(Ce)}(Ce,et):(0,N.Xf)(Ce)}},1997:(Mt,Be,V)=>{V.d(Be,{Xf:()=>it});var N=V(1191),U=V(7601),O=V(2898),ce=V(7979),ae=V(3585),ve=V(71),Ie=V(6096),he=V(694),Se=V(5550),Z=V(2259),G=V(1808),ie=V(6247);function it(Le){if(Le instanceof ce.y)return Le;if(null!=Le){if((0,ae.c)(Le))return function Ge(Le){return new ce.y(Re=>{const Ce=Le[ie.L]();if((0,Z.m)(Ce.subscribe))return Ce.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,U.z)(Le))return function Ue(Le){return new ce.y(Re=>{for(let Ce=0;Ce<Le.length&&!Re.closed;Ce++)Re.next(Le[Ce]);Re.complete()})}(Le);if((0,O.t)(Le))return function Je(Le){return new ce.y(Re=>{Le.then(Ce=>{Re.closed||(Re.next(Ce),Re.complete())},Ce=>Re.error(Ce)).then(null,G.h)})}(Le);if((0,ve.D)(Le))return ge(Le);if((0,he.T)(Le))return function pe(Le){return new ce.y(Re=>{for(const Ce of Le)if(Re.next(Ce),Re.closed)return;Re.complete()})}(Le);if((0,Se.L)(Le))return function Xe(Le){return ge((0,Se.Q)(Le))}(Le)}throw(0,Ie.z)(Le)}function ge(Le){return new ce.y(Re=>{(function Ye(Le,Re){var Ce,et,oe,ye;return(0,N.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,N.KL)(Le);!(et=yield Ce.next()).done;)if(Re.next(et.value),Re.closed)return}catch(Ae){oe={error:Ae}}finally{try{et&&!et.done&&(ye=Ce.return)&&(yield ye.call(Ce))}finally{if(oe)throw oe.error}}Re.complete()})})(Le,Re).catch(Ce=>Re.error(Ce))})}},7958:(Mt,Be,V)=>{V.d(Be,{T:()=>ve});var N=V(2435),U=V(1997),O=V(9137),ce=V(8174),ae=V(6397);function ve(...Ie){const he=(0,ce.yG)(Ie),Se=(0,ce._6)(Ie,1/0),Z=Ie;return Z.length?1===Z.length?(0,U.Xf)(Z[0]):(0,N.J)(Se)((0,ae.D)(Z,he)):O.E}},6350:(Mt,Be,V)=>{V.d(Be,{x:()=>U});var N=V(5938);function U(ce,ae,ve,Ie,he){return new O(ce,ae,ve,Ie,he)}class O extends N.Lv{constructor(ae,ve,Ie,he,Se,Z){super(ae),this.onFinalize=Se,this.shouldUnsubscribe=Z,this._next=ve?function(G){try{ve(G)}catch(ie){ae.error(ie)}}:super._next,this._error=he?function(G){try{he(G)}catch(ie){ae.error(ie)}finally{this.unsubscribe()}}:super._error,this._complete=Ie?function(){try{Ie()}catch(G){ae.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},2480:(Mt,Be,V)=>{V.d(Be,{U:()=>O});var N=V(2820),U=V(6350);function O(ce,ae){return(0,N.e)((ve,Ie)=>{let he=0;ve.subscribe((0,U.x)(Ie,Se=>{Ie.next(ce.call(ae,Se,he++))}))})}},2435:(Mt,Be,V)=>{V.d(Be,{J:()=>Z});var N=V(2480),U=V(1997),O=V(2820),ce=V(3054),ae=V(6350),Ie=V(2259);function he(G,ie,it=1/0){return(0,Ie.m)(ie)?he((Ge,Ue)=>(0,N.U)((Je,pe)=>ie(Ge,Je,Ue,pe))((0,U.Xf)(G(Ge,Ue))),it):("number"==typeof ie&&(it=ie),(0,O.e)((Ge,Ue)=>function ve(G,ie,it,Ge,Ue,Je,pe,ge){const Xe=[];let Ye=0,Le=0,Re=!1;const Ce=()=>{Re&&!Xe.length&&!Ye&&ie.complete()},et=ye=>Ye<Ge?oe(ye):Xe.push(ye),oe=ye=>{Je&&ie.next(ye),Ye++;let Ae=!1;(0,U.Xf)(it(ye,Le++)).subscribe((0,ae.x)(ie,te=>{Ue?.(te),Je?et(te):ie.next(te)},()=>{Ae=!0},void 0,()=>{if(Ae)try{for(Ye--;Xe.length&&Ye<Ge;){const te=Xe.shift();pe?(0,ce.f)(ie,pe,()=>oe(te)):oe(te)}Ce()}catch(te){ie.error(te)}}))};return G.subscribe((0,ae.x)(ie,et,()=>{Re=!0,Ce()})),()=>{ge?.()}}(Ge,Ue,G,it)))}var Se=V(5637);function Z(G=1/0){return he(Se.y,G)}},7498:(Mt,Be,V)=>{V.d(Be,{Q:()=>ce});var N=V(3054),U=V(2820),O=V(6350);function ce(ae,ve=0){return(0,U.e)((Ie,he)=>{Ie.subscribe((0,O.x)(he,Se=>(0,N.f)(he,ae,()=>he.next(Se),ve),()=>(0,N.f)(he,ae,()=>he.complete(),ve),Se=>(0,N.f)(he,ae,()=>he.error(Se),ve)))})}},6055:(Mt,Be,V)=>{V.d(Be,{B:()=>ae});var N=V(1997),U=V(4220),O=V(5938),ce=V(2820);function ae(Ie={}){const{connector:he=(()=>new U.x),resetOnError:Se=!0,resetOnComplete:Z=!0,resetOnRefCountZero:G=!0}=Ie;return ie=>{let it,Ge,Ue,Je=0,pe=!1,ge=!1;const Xe=()=>{Ge?.unsubscribe(),Ge=void 0},Ye=()=>{Xe(),it=Ue=void 0,pe=ge=!1},Le=()=>{const Re=it;Ye(),Re?.unsubscribe()};return(0,ce.e)((Re,Ce)=>{Je++,!ge&&!pe&&Xe();const et=Ue=Ue??he();Ce.add(()=>{Je--,0===Je&&!ge&&!pe&&(Ge=ve(Le,G))}),et.subscribe(Ce),!it&&Je>0&&(it=new O.Hp({next:oe=>et.next(oe),error:oe=>{ge=!0,Xe(),Ge=ve(Ye,Se,oe),et.error(oe)},complete:()=>{pe=!0,Xe(),Ge=ve(Ye,Z),et.complete()}}),(0,N.Xf)(Re).subscribe(it))})(ie)}}function ve(Ie,he,...Se){if(!0===he)return void Ie();if(!1===he)return;const Z=new O.Hp({next:()=>{Z.unsubscribe(),Ie()}});return he(...Se).subscribe(Z)}},4138:(Mt,Be,V)=>{V.d(Be,{R:()=>U});var N=V(2820);function U(O,ce=0){return(0,N.e)((ae,ve)=>{ve.add(O.schedule(()=>ae.subscribe(ve),ce))})}},9549:(Mt,Be,V)=>{V.d(Be,{o:()=>ae});var N=V(7746);class U extends N.w0{constructor(Ie,he){super()}schedule(Ie,he=0){return this}}const O={setInterval(ve,Ie,...he){const{delegate:Se}=O;return Se?.setInterval?Se.setInterval(ve,Ie,...he):setInterval(ve,Ie,...he)},clearInterval(ve){const{delegate:Ie}=O;return(Ie?.clearInterval||clearInterval)(ve)},delegate:void 0};var ce=V(7922);class ae extends U{constructor(Ie,he){super(Ie,he),this.scheduler=Ie,this.work=he,this.pending=!1}schedule(Ie,he=0){if(this.closed)return this;this.state=Ie;const Se=this.id,Z=this.scheduler;return null!=Se&&(this.id=this.recycleAsyncId(Z,Se,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(Z,this.id,he),this}requestAsyncId(Ie,he,Se=0){return O.setInterval(Ie.flush.bind(Ie,this),Se)}recycleAsyncId(Ie,he,Se=0){if(null!=Se&&this.delay===Se&&!1===this.pending)return he;O.clearInterval(he)}execute(Ie,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Se=this._execute(Ie,he);if(Se)return Se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ie,he){let Z,Se=!1;try{this.work(Ie)}catch(G){Se=!0,Z=G||new Error("Scheduled action threw falsy error")}if(Se)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:Ie,scheduler:he}=this,{actions:Se}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(Se,this),null!=Ie&&(this.id=this.recycleAsyncId(he,Ie,null)),this.delay=null,super.unsubscribe()}}}},328:(Mt,Be,V)=>{V.d(Be,{v:()=>O});var N=V(9078);class U{constructor(ae,ve=U.now){this.schedulerActionCtor=ae,this.now=ve}schedule(ae,ve=0,Ie){return new this.schedulerActionCtor(this,ae).schedule(Ie,ve)}}U.now=N.l.now;class O extends U{constructor(ae,ve=U.now){super(ae,ve),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ae){const{actions:ve}=this;if(this._active)return void ve.push(ae);let Ie;this._active=!0;do{if(Ie=ae.execute(ae.state,ae.delay))break}while(ae=ve.shift());if(this._active=!1,Ie){for(;ae=ve.shift();)ae.unsubscribe();throw Ie}}}},7020:(Mt,Be,V)=>{V.d(Be,{z:()=>O});var N=V(9549);const O=new(V(328).v)(N.o)},9078:(Mt,Be,V)=>{V.d(Be,{l:()=>N});const N={now:()=>(N.delegate||Date).now(),delegate:void 0}},9366:(Mt,Be,V)=>{V.d(Be,{z:()=>N});const N={setTimeout(U,O,...ce){const{delegate:ae}=N;return ae?.setTimeout?ae.setTimeout(U,O,...ce):setTimeout(U,O,...ce)},clearTimeout(U){const{delegate:O}=N;return(O?.clearTimeout||clearTimeout)(U)},delegate:void 0}},3799:(Mt,Be,V)=>{V.d(Be,{h:()=>U});const U=function N(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},6247:(Mt,Be,V)=>{V.d(Be,{L:()=>N});const N="function"==typeof Symbol&&Symbol.observable||"@@observable"},8174:(Mt,Be,V)=>{V.d(Be,{_6:()=>ve,yG:()=>ae});var N=V(2259);function O(Ie){return Ie[Ie.length-1]}function ae(Ie){return function U(Ie){return Ie&&(0,N.m)(Ie.schedule)}(O(Ie))?Ie.pop():void 0}function ve(Ie,he){return"number"==typeof O(Ie)?Ie.pop():he}},7922:(Mt,Be,V)=>{function N(U,O){if(U){const ce=U.indexOf(O);0<=ce&&U.splice(ce,1)}}V.d(Be,{P:()=>N})},496:(Mt,Be,V)=>{function N(U){const ce=U(ae=>{Error.call(ae),ae.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}V.d(Be,{d:()=>N})},208:(Mt,Be,V)=>{V.d(Be,{O:()=>ce,x:()=>O});var N=V(1346);let U=null;function O(ae){if(N.v.useDeprecatedSynchronousErrorHandling){const ve=!U;if(ve&&(U={errorThrown:!1,error:null}),ae(),ve){const{errorThrown:Ie,error:he}=U;if(U=null,Ie)throw he}}else ae()}function ce(ae){N.v.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=ae)}},3054:(Mt,Be,V)=>{function N(U,O,ce,ae=0,ve=!1){const Ie=O.schedule(function(){ce(),ve?U.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(U.add(Ie),!ve)return Ie}V.d(Be,{f:()=>N})},5637:(Mt,Be,V)=>{function N(U){return U}V.d(Be,{y:()=>N})},7601:(Mt,Be,V)=>{V.d(Be,{z:()=>N});const N=U=>U&&"number"==typeof U.length&&"function"!=typeof U},71:(Mt,Be,V)=>{V.d(Be,{D:()=>U});var N=V(2259);function U(O){return Symbol.asyncIterator&&(0,N.m)(O?.[Symbol.asyncIterator])}},2259:(Mt,Be,V)=>{function N(U){return"function"==typeof U}V.d(Be,{m:()=>N})},3585:(Mt,Be,V)=>{V.d(Be,{c:()=>O});var N=V(6247),U=V(2259);function O(ce){return(0,U.m)(ce[N.L])}},694:(Mt,Be,V)=>{V.d(Be,{T:()=>O});var N=V(3799),U=V(2259);function O(ce){return(0,U.m)(ce?.[N.h])}},2898:(Mt,Be,V)=>{V.d(Be,{t:()=>U});var N=V(2259);function U(O){return(0,N.m)(O?.then)}},5550:(Mt,Be,V)=>{V.d(Be,{L:()=>ce,Q:()=>O});var N=V(1191),U=V(2259);function O(ae){return(0,N.FC)(this,arguments,function*(){const Ie=ae.getReader();try{for(;;){const{value:he,done:Se}=yield(0,N.qq)(Ie.read());if(Se)return yield(0,N.qq)(void 0);yield yield(0,N.qq)(he)}}finally{Ie.releaseLock()}})}function ce(ae){return(0,U.m)(ae?.getReader)}},2820:(Mt,Be,V)=>{V.d(Be,{e:()=>O});var N=V(2259);function O(ce){return ae=>{if(function U(ce){return(0,N.m)(ce?.lift)}(ae))return ae.lift(function(ve){try{return ce(ve,this)}catch(Ie){this.error(Ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},1808:(Mt,Be,V)=>{V.d(Be,{h:()=>O});var N=V(1346),U=V(9366);function O(ce){U.z.setTimeout(()=>{const{onUnhandledError:ae}=N.v;if(!ae)throw ce;ae(ce)})}},6096:(Mt,Be,V)=>{function N(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Be,{z:()=>N})},1191:(Mt,Be,V)=>{function ce(te,le){var we={};for(var ke in te)Object.prototype.hasOwnProperty.call(te,ke)&&le.indexOf(ke)<0&&(we[ke]=te[ke]);if(null!=te&&"function"==typeof Object.getOwnPropertySymbols){var He=0;for(ke=Object.getOwnPropertySymbols(te);He<ke.length;He++)le.indexOf(ke[He])<0&&Object.prototype.propertyIsEnumerable.call(te,ke[He])&&(we[ke[He]]=te[ke[He]])}return we}function he(te,le,we,ke){return new(we||(we=Promise))(function(Ne,Tt){function wn(hn){try{tt(ke.next(hn))}catch(tr){Tt(tr)}}function fn(hn){try{tt(ke.throw(hn))}catch(tr){Tt(tr)}}function tt(hn){hn.done?Ne(hn.value):function He(Ne){return Ne instanceof we?Ne:new we(function(Tt){Tt(Ne)})}(hn.value).then(wn,fn)}tt((ke=ke.apply(te,le||[])).next())})}function pe(te){return this instanceof pe?(this.v=te,this):new pe(te)}function ge(te,le,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var He,ke=we.apply(te,le||[]),Ne=[];return He={},Tt("next"),Tt("throw"),Tt("return"),He[Symbol.asyncIterator]=function(){return this},He;function Tt(Bn){ke[Bn]&&(He[Bn]=function(Ht){return new Promise(function(Rt,jn){Ne.push([Bn,Ht,Rt,jn])>1||wn(Bn,Ht)})})}function wn(Bn,Ht){try{!function fn(Bn){Bn.value instanceof pe?Promise.resolve(Bn.value.v).then(tt,hn):tr(Ne[0][2],Bn)}(ke[Bn](Ht))}catch(Rt){tr(Ne[0][3],Rt)}}function tt(Bn){wn("next",Bn)}function hn(Bn){wn("throw",Bn)}function tr(Bn,Ht){Bn(Ht),Ne.shift(),Ne.length&&wn(Ne[0][0],Ne[0][1])}}function Ye(te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,le=te[Symbol.asyncIterator];return le?le.call(te):(te=function ie(te){var le="function"==typeof Symbol&&Symbol.iterator,we=le&&te[le],ke=0;if(we)return we.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&ke>=te.length&&(te=void 0),{value:te&&te[ke++],done:!te}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(te),we={},ke("next"),ke("throw"),ke("return"),we[Symbol.asyncIterator]=function(){return this},we);function ke(Ne){we[Ne]=te[Ne]&&function(Tt){return new Promise(function(wn,fn){!function He(Ne,Tt,wn,fn){Promise.resolve(fn).then(function(tt){Ne({value:tt,done:wn})},Tt)}(wn,fn,(Tt=te[Ne](Tt)).done,Tt.value)})}}}V.d(Be,{FC:()=>ge,KL:()=>Ye,_T:()=>ce,mG:()=>he,qq:()=>pe})},250:(Mt,Be,V)=>{V.d(Be,{$8M:()=>Sc,AaK:()=>he,EJc:()=>ny,F4k:()=>eI,FiY:()=>b,GfV:()=>Dv,JOm:()=>ya,LFG:()=>Dn,Lbi:()=>Ms,Lck:()=>Ss,OlP:()=>ct,QGY:()=>ym,Qsj:()=>Fg,R0b:()=>mo,Rgc:()=>_p,SBq:()=>eu,TTD:()=>Rr,X6Q:()=>kN,Y36:()=>qh,Yjl:()=>xr,Yz7:()=>Ht,ZZ4:()=>Np,aQg:()=>ly,cJS:()=>jn,cg1:()=>Cf,h0i:()=>Ia,kL8:()=>TI,lG2:()=>kn,oAB:()=>Ze,q4F:()=>wv,sBO:()=>nL,sIi:()=>Gl,s_b:()=>Dp,soG:()=>ty,vHH:()=>Ue,wAp:()=>Lt,zs3:()=>Hl});var N=V(4220),U=V(7746);function ve(o){for(let a in o)if(o[a]===ve)return a;throw Error("Could not find renamed property on target object.")}function he(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(he).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function Se(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}V(7979),V(7958),V(6055);const Z=ve({__forward_ref__:ve});function G(o){return o.__forward_ref__=G,o.toString=function(){return he(this())},o}function ie(o){return function it(o){return"function"==typeof o&&o.hasOwnProperty(Z)&&o.__forward_ref__===G}(o)?o():o}class Ue extends Error{constructor(a,u){super(function Je(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,u)),this.code=a}}function ge(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():function pe(o){return"string"==typeof o?o:null==o?"":String(o)}(o)}function Re(o,a){throw new Ue(-201,!1)}function Ht(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function jn(o){return{providers:o.providers||[],imports:o.imports||[]}}function Zt(o){return Ls(o,ps)||Ls(o,Ir)}function Ls(o,a){return o.hasOwnProperty(a)?o[a]:null}function Qs(o){return o&&(o.hasOwnProperty(Vs)||o.hasOwnProperty(Ys))?o[Vs]:null}const ps=ve({\u0275prov:ve}),Vs=ve({\u0275inj:ve}),Ir=ve({ngInjectableDef:ve}),Ys=ve({ngInjectorDef:ve});var At=(()=>((At=At||{})[At.Default=0]="Default",At[At.Host=1]="Host",At[At.Self=2]="Self",At[At.SkipSelf=4]="SkipSelf",At[At.Optional=8]="Optional",At))();let Gr;function En(o){const a=Gr;return Gr=o,a}function Mr(o,a,u){const l=Zt(o);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:u&At.Optional?null:void 0!==a?a:void Re(he(o))}function ii(o){return{toString:o}.toString()}var nr=(()=>((nr=nr||{})[nr.OnPush=0]="OnPush",nr[nr.Default=1]="Default",nr))(),si=(()=>{return(o=si||(si={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",si;var o})();const $n=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ii={},pn=[],ms=ve({\u0275cmp:ve}),Oi=ve({\u0275dir:ve}),rr=ve({\u0275pipe:ve}),ki=ve({\u0275mod:ve}),pr=ve({\u0275fac:ve}),X=ve({__NG_ELEMENT_ID__:ve});let H=0;function q(o){return J(o)||function W(o){return o[Oi]||null}(o)}function Me(o){return null!==o}function Ze(o){return ii(()=>({type:o.type,bootstrap:o.bootstrap||pn,declarations:o.declarations||pn,imports:o.imports||pn,exports:o.exports||pn,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function cn(o,a){if(null==o)return Ii;const u={};for(const l in o)if(o.hasOwnProperty(l)){let f=o[l],p=f;Array.isArray(f)&&(p=f[1],f=f[0]),u[f]=l,a&&(a[f]=p)}return u}const kn=function j(o){return ii(()=>{const u=!0===o.standalone,l={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===nr.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||pn,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||si.Emulated,id:"c"+H++,styles:o.styles||pn,_:null,setInput:null,schemas:o.schemas||null,tView:null},p=o.dependencies,v=o.features;return f.inputs=cn(o.inputs,l),f.outputs=cn(o.outputs),v&&v.forEach(w=>w(f)),f.directiveDefs=p?()=>("function"==typeof p?p():p).map(q).filter(Me):null,f.pipeDefs=p?()=>("function"==typeof p?p():p).map($).filter(Me):null,f})};function xr(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function J(o){return o[ms]||null}function $(o){return o[rr]||null}function yt(o){return Array.isArray(o)&&"object"==typeof o[1]}function Fi(o){return Array.isArray(o)&&!0===o[1]}function gt(o){return 2==(2&o.flags)}function Nt(o){return null!==o.template}function An(o){return 0!=(256&o[2])}function Gt(o,a){return o.hasOwnProperty(pr)?o[pr]:null}class gc{constructor(a,u,l){this.previousValue=a,this.currentValue=u,this.firstChange=l}isFirstChange(){return this.firstChange}}function Rr(){return Xs}function Xs(o){return o.type.prototype.ngOnChanges&&(o.setInput=ch),ta}function ta(){const o=ml(this),a=o?.current;if(a){const u=o.previous;if(u===Ii)o.previous=a;else for(let l in a)u[l]=a[l];o.current=null,this.ngOnChanges(a)}}function ch(o,a,u,l){const f=ml(o)||function mc(o,a){return o[gl]=a}(o,{previous:Ii,current:null}),p=f.current||(f.current={}),v=f.previous,w=this.declaredInputs[u],C=v[w];p[w]=new gc(C&&C.currentValue,a,v===Ii),o[l]=a}Rr.ngInherit=!0;const gl="__ngSimpleChanges__";function ml(o){return o[gl]||null}function br(o){for(;Array.isArray(o);)o=o[0];return o}function Qi(o,a){return br(a[o.index])}function vi(o,a){const u=a[o];return yt(u)?u:u[0]}function dn(o){return 64==(64&o[2])}function ia(o){o[18]=0}function Ao(o,a){o[5]+=a;let u=o,l=o[3];for(;null!==l&&(1===a&&1===u[5]||-1===a&&0===u[5]);)l[5]+=a,u=l,l=l[3]}const St={lFrame:ka(null),bindingsEnabled:!0};function Oe(){return St.lFrame.lView}function In(){let o=mr();for(;null!==o&&64===o.type;)o=o.parent;return o}function mr(){return St.lFrame.currentTNode}function Tu(o,a){const u=St.lFrame;u.bindingIndex=u.bindingRootIndex=o,function yr(o){St.lFrame.currentDirectiveIndex=o}(a)}function Vi(o){St.lFrame.currentQueryIndex=o}function Us(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function _l(o,a,u){if(u&At.SkipSelf){let f=a,p=o;for(;!(f=f.parent,null!==f||u&At.Host||(f=Us(p),null===f||(p=p[15],10&f.type))););if(null===f)return!1;a=f,o=p}const l=St.lFrame=Dl();return l.currentTNode=a,l.lView=o,!0}function xn(o){const a=Dl(),u=o[1];St.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function Dl(){const o=St.lFrame,a=null===o?null:o.child;return null===a?ka(o):a}function ka(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Su(){const o=St.lFrame;return St.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const No=Su;function sa(){const o=Su();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function no(o){St.lFrame.selectedIndex=o}function Nd(o,a,u){av(o,a,3,u)}function Rd(o,a,u,l){(3&o[2])===u&&av(o,a,u,l)}function Il(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function av(o,a,u,l){const p=l??-1,v=a.length-1;let w=0;for(let C=void 0!==l?65535&o[18]:0;C<v;C++)if("number"==typeof a[C+1]){if(w=a[C],null!=l&&w>=l)break}else a[C]<0&&(o[18]+=65536),(w<p||-1==p)&&(d0(o,u,a,C),o[18]=(4294901760&o[18])+C+2),C++}function d0(o,a,u,l){const f=u[l]<0,p=u[l+1],w=o[f?-u[l]:u[l]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class Cl{constructor(a,u,l){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=l}}function Mu(o,a,u){let l=0;for(;l<u.length;){const f=u[l];if("number"==typeof f){if(0!==f)break;l++;const p=u[l++],v=u[l++],w=u[l++];o.setAttribute(a,v,w,p)}else{const p=f,v=u[++l];oa(p)?o.setProperty(a,p,v):o.setAttribute(a,p,v),l++}}return l}function xu(o){return 3===o||4===o||6===o}function oa(o){return 64===o.charCodeAt(0)}function gh(o){return-1!==o}function es(o){return 32767&o}function Jn(o,a){let u=function vg(o){return o>>16}(o),l=a;for(;u>0;)l=l[15],u--;return l}let Tl=!0;function ja(o){const a=Tl;return Tl=o,a}let mh=0;const Nn={};function Ua(o,a){o.push(0,0,0,0,0,0,0,0,a)}function ua(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function $a(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,l=null,f=a;for(;null!==f;){if(l=Ft(f),null===l)return-1;if(u++,f=f[15],-1!==l.injectorIndex)return l.injectorIndex|u<<16}return-1}function sr(o,a,u){if(u&At.Optional)return o;Re()}function Nu(o,a,u,l){if(u&At.Optional&&void 0===l&&(l=null),0==(u&(At.Self|At.Host))){const f=o[9],p=En(void 0);try{return f?f.get(a,l,u&At.Optional):Mr(a,l,u&At.Optional)}finally{En(p)}}return sr(l,0,u)}function Cc(o,a,u,l=At.Default,f){if(null!==o){if(1024&a[2]){const v=function Od(o,a,u,l,f){let p=o,v=a;for(;null!==p&&null!==v&&1024&v[2]&&!(256&v[2]);){const w=io(p,v,u,l|At.Self,Nn);if(w!==Nn)return w;let C=p.parent;if(!C){const S=v[21];if(S){const P=S.get(u,Nn,l);if(P!==Nn)return P}C=Ft(v),v=v[15]}p=C}return f}(o,a,u,l,Nn);if(v!==Nn)return v}const p=io(o,a,u,l,Nn);if(p!==Nn)return p}return Nu(a,u,l,f)}function io(o,a,u,l,f){const p=function ca(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(X)?o[X]:void 0;return"number"==typeof a?a>=0?255&a:Tc:a}(u);if("function"==typeof p){if(!_l(a,o,l))return l&At.Host?sr(f,0,l):Nu(a,u,l,f);try{const v=p(l);if(null!=v||l&At.Optional)return v;Re()}finally{No()}}else if("number"==typeof p){let v=null,w=ua(o,a),C=-1,S=l&At.Host?a[16][6]:null;for((-1===w||l&At.SkipSelf)&&(C=-1===w?$a(o,a):a[w+8],-1!==C&&Sl(l,!1)?(v=a[1],w=es(C),a=Jn(C,a)):w=-1);-1!==w;){const P=a[1];if(Or(p,w,P.data)){const L=Qr(w,a,u,v,l,S);if(L!==Nn)return L}C=a[w+8],-1!==C&&Sl(l,a[1].data[w+8]===S)&&Or(p,w,a)?(v=P,w=es(C),a=Jn(C,a)):w=-1}}return f}function Qr(o,a,u,l,f,p){const v=a[1],w=v.data[o+8],P=function bc(o,a,u,l,f){const p=o.providerIndexes,v=a.data,w=1048575&p,C=o.directiveStart,P=p>>20,K=f?w+P:o.directiveEnd;for(let se=l?w:w+P;se<K;se++){const be=v[se];if(se<C&&u===be||se>=C&&be.type===u)return se}if(f){const se=v[C];if(se&&Nt(se)&&se.type===u)return C}return null}(w,v,u,null==l?gt(w)&&Tl:l!=v&&0!=(3&w.type),f&At.Host&&p===w);return null!==P?Es(a,v,P,w):Nn}function Es(o,a,u,l){let f=o[u];const p=a.data;if(function Pd(o){return o instanceof Cl}(f)){const v=f;v.resolving&&function Xe(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ue(-200,`Circular dependency in DI detected for ${o}${u}`)}(ge(p[u]));const w=ja(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?En(v.injectImpl):null;_l(o,l,At.Default);try{f=o[u]=v.factory(void 0,p,o,l),a.firstCreatePass&&u>=l.directiveStart&&function El(o,a,u){const{ngOnChanges:l,ngOnInit:f,ngDoCheck:p}=a.type.prototype;if(l){const v=Xs(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,v)}f&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,f),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,p))}(u,p[u],a)}finally{null!==C&&En(C),ja(w),v.resolving=!1,No()}}return f}function Or(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function Sl(o,a){return!(o&At.Self||o&At.Host&&a)}class Bi{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,l){return Cc(this._tNode,this._lView,a,l,u)}}function Tc(){return new Bi(In(),Oe())}function Ft(o){const a=o[1],u=a.type;return 2===u?a.declTNode:1===u?o[6]:null}function Sc(o){return function vh(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const l=u.length;let f=0;for(;f<l;){const p=u[f];if(xu(p))break;if(0===p)f+=2;else if("number"==typeof p)for(f++;f<l&&"string"==typeof u[f];)f++;else{if(p===a)return u[f+1];f+=2}}}return null}(In(),o)}const Ha="__parameters__";function Hs(o,a,u){return ii(()=>{const l=function Wa(o){return function(...u){if(o){const l=o(...u);for(const f in l)this[f]=l[f]}}}(a);function f(...p){if(this instanceof f)return l.apply(this,p),this;const v=new f(...p);return w.annotation=v,w;function w(C,S,P){const L=C.hasOwnProperty(Ha)?C[Ha]:Object.defineProperty(C,Ha,{value:[]})[Ha];for(;L.length<=P;)L.push(null);return(L[P]=L[P]||[]).push(v),C}}return u&&(f.prototype=Object.create(u.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class ct{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Ht({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Lr(o,a){o.forEach(u=>Array.isArray(u)?Lr(u,a):a(u))}function Ac(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function Ou(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}const ha={},Ga="__NG_DI_FLAG__",Rl="ngTempTokenPath",za=/\n/gm,ns="__source";let Po;function Oo(o){const a=Po;return Po=o,a}function Bd(o,a=At.Default){if(void 0===Po)throw new Ue(-203,!1);return null===Po?Mr(o,void 0,a):Po.get(o,a&At.Optional?null:void 0,a)}function Dn(o,a=At.Default){return(function zi(){return Gr}()||Bd)(ie(o),a)}function Rc(o){const a=[];for(let u=0;u<o.length;u++){const l=ie(o[u]);if(Array.isArray(l)){if(0===l.length)throw new Ue(900,!1);let f,p=At.Default;for(let v=0;v<l.length;v++){const w=l[v],C=Pc(w);"number"==typeof C?-1===C?f=w.token:p|=C:f=w}a.push(Dn(f,p))}else a.push(Dn(l))}return a}function ko(o,a){return o[Ga]=a,o.prototype[Ga]=a,o}function Pc(o){return o[Ga]}const b=ko(Hs("Optional"),8),x=ko(Hs("SkipSelf"),4),Bt=new ct("ENVIRONMENT_INITIALIZER"),gv=new ct("INJECTOR",-1),Br=new ct("INJECTOR_DEF_TYPES");class Rg{get(a,u=ha){if(u===ha){const l=new Error(`NullInjectorError: No provider for ${he(a)}!`);throw l.name="NullInjectorError",l}return u}}function Ph(...o){return{\u0275providers:_0(0,o)}}function _0(o,...a){const u=[],l=new Set;let f;return Lr(a,p=>{const v=p;mv(v,u,[],l)&&(f||(f=[]),f.push(v))}),void 0!==f&&D0(f,u),u}function D0(o,a){for(let u=0;u<o.length;u++){const{providers:f}=o[u];Lr(f,p=>{a.push(p)})}}function mv(o,a,u,l){if(!(o=ie(o)))return!1;let f=null,p=Qs(o);const v=!p&&J(o);if(p||v){if(v&&!v.standalone)return!1;f=o}else{const C=o.ngModule;if(p=Qs(C),!p)return!1;f=C}const w=l.has(f);if(v){if(w)return!1;if(l.add(f),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of C)mv(S,a,u,l)}}else{if(!p)return!1;{if(null!=p.imports&&!w){let S;l.add(f);try{Lr(p.imports,P=>{mv(P,a,u,l)&&(S||(S=[]),S.push(P))})}finally{}void 0!==S&&D0(S,a)}if(!w){const S=Gt(f)||(()=>new f);a.push({provide:f,useFactory:S,deps:pn},{provide:Br,useValue:f,multi:!0},{provide:Bt,useValue:()=>Dn(f),multi:!0})}const C=p.providers;null==C||w||Lr(C,P=>{a.push(P)})}}return f!==o&&void 0!==o.providers}const Oh=ve({provide:String,useValue:ve});function Pg(o){return null!==o&&"object"==typeof o&&Oh in o}function Vc(o){return"function"==typeof o}const Fh=new ct("Set Injector scope."),Lh={},LS={};let yv;function zu(){return void 0===yv&&(yv=new Rg),yv}class Xa{}class I0 extends Xa{constructor(a,u,l,f){super(),this.parent=u,this.source=l,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vv(a,v=>this.processProvider(v)),this.records.set(gv,qd(void 0,this)),f.has("environment")&&this.records.set(Xa,qd(void 0,this));const p=this.records.get(Fh);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(Br.multi,pn,At.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const u=Oo(this),l=En(void 0);try{return a()}finally{Oo(u),En(l)}}get(a,u=ha,l=At.Default){this.assertNotDestroyed();const f=Oo(this),p=En(void 0);try{if(!(l&At.SkipSelf)){let w=this.records.get(a);if(void 0===w){const C=function Og(o){return"function"==typeof o||"object"==typeof o&&o instanceof ct}(a)&&Zt(a);w=C&&this.injectableDefInScope(C)?qd(C0(a),Lh):null,this.records.set(a,w)}if(null!=w)return this.hydrate(a,w)}return(l&At.Self?zu():this.parent).get(a,u=l&At.Optional&&u===ha?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Rl]=v[Rl]||[]).unshift(he(a)),f)throw v;return function Pl(o,a,u,l){const f=o[Rl];throw a[ns]&&f.unshift(a[ns]),o.message=function Ih(o,a,u,l=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=he(a);if(Array.isArray(a))f=a.map(he).join(" -> ");else if("object"==typeof a){let p=[];for(let v in a)if(a.hasOwnProperty(v)){let w=a[v];p.push(v+":"+("string"==typeof w?JSON.stringify(w):he(w)))}f=`{${p.join(", ")}}`}return`${u}${l?"("+l+")":""}[${f}]: ${o.replace(za,"\n  ")}`}("\n"+o.message,f,u,l),o.ngTokenPath=f,o[Rl]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{En(p),Oo(f)}}resolveInjectorInitializers(){const a=Oo(this),u=En(void 0);try{const l=this.get(Bt.multi,pn,At.Self);for(const f of l)f()}finally{Oo(a),En(u)}}toString(){const a=[],u=this.records;for(const l of u.keys())a.push(he(l));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ue(205,!1)}processProvider(a){let u=Vc(a=ie(a))?a:ie(a&&a.provide);const l=function VS(o){return Pg(o)?qd(void 0,o.useValue):qd(function BS(o,a,u){let l;if(Vc(o)){const f=ie(o);return Gt(f)||C0(f)}if(Pg(o))l=()=>ie(o.useValue);else if(function E0(o){return!(!o||!o.useFactory)}(o))l=()=>o.useFactory(...Rc(o.deps||[]));else if(function zd(o){return!(!o||!o.useExisting)}(o))l=()=>Dn(ie(o.useExisting));else{const f=ie(o&&(o.useClass||o.provide));if(!function jS(o){return!!o.deps}(o))return Gt(f)||C0(f);l=()=>new f(...Rc(o.deps))}return l}(o),Lh)}(a);if(Vc(a)||!0!==a.multi)this.records.get(u);else{let f=this.records.get(u);f||(f=qd(void 0,Lh,!0),f.factory=()=>Rc(f.multi),this.records.set(u,f)),u=a,f.multi.push(a)}this.records.set(u,l)}hydrate(a,u){return u.value===Lh&&(u.value=LS,u.value=u.factory()),"object"==typeof u.value&&u.value&&function US(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=ie(a.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function C0(o){const a=Zt(o),u=null!==a?a.factory:Gt(o);if(null!==u)return u;if(o instanceof ct)throw new Ue(204,!1);if(o instanceof Function)return function b0(o){const a=o.length;if(a>0)throw function da(o,a){const u=[];for(let l=0;l<o;l++)u.push(a);return u}(a,"?"),new Ue(204,!1);const u=function yi(o){const a=o&&(o[ps]||o[Ir]);if(a){const u=function Kn(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Ue(204,!1)}function qd(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function T0(o){return!!o.\u0275providers}function vv(o,a){for(const u of o)Array.isArray(u)?vv(u,a):T0(u)?vv(u.\u0275providers,a):a(u)}class WS{resolveComponentFactory(a){throw function A0(o){const a=Error(`No component factory found for ${he(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Vh=(()=>{class o{}return o.NULL=new WS,o})();function kg(){return Bc(In(),Oe())}function Bc(o,a){return new eu(Qi(o,a))}let eu=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=kg,o})();class qk{}let Fg=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function _v(){const o=Oe(),u=vi(In().index,o);return(yt(u)?u:o)[11]}(),o})(),x0=(()=>{class o{}return o.\u0275prov=Ht({token:o,providedIn:"root",factory:()=>null}),o})();class Dv{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const wv=new Dv("14.1.3"),Lg={};function Cv(o){return o.ngOriginalError}class Bl{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a);this._console.error("ERROR",a),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&Cv(a);for(;u&&Cv(u);)u=Cv(u);return u||null}}const L0=new Map;let Tv=0;const xv="__ngContext__";function Ui(o,a){yt(a)?(o[xv]=a[20],function Av(o){L0.set(o[20],o)}(a)):o[xv]=a}function jc(o){const a=o[xv];return"number"==typeof a?function ZS(o){return L0.get(o)||null}(a):a||null}function Nv(o){const a=jc(o);return a?yt(a)?a:a.lView:null}const eA=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind($n))();var ya=(()=>((ya=ya||{})[ya.Important=1]="Important",ya[ya.DashCase=2]="DashCase",ya))();function H0(o,a){return undefined(o,a)}function Kd(o){const a=o[3];return Fi(a)?a[3]:a}function $h(o){return z0(o[13])}function Zd(o){return z0(o[4])}function z0(o){for(;null!==o&&!Fi(o);)o=o[4];return o}function qu(o,a,u,l,f){if(null!=l){let p,v=!1;Fi(l)?p=l:yt(l)&&(v=!0,l=l[0]);const w=br(l);0===o&&null!==u?null==f?function X0(o,a,u){o.appendChild(a,u)}(a,u,w):va(a,u,w,f||null,!0):1===o&&null!==u?va(a,u,w,f||null,!0):2===o?function hA(o,a,u){const l=Bv(o,a);l&&function Uc(o,a,u,l){o.removeChild(a,u,l)}(o,l,a,u)}(a,w,v):3===o&&a.destroyNode(w),null!=p&&function sF(o,a,u,l,f){const p=u[7];p!==br(u)&&qu(a,o,l,p,f);for(let w=10;w<u.length;w++){const C=u[w];$l(C[1],C,o,a,l,p)}}(a,o,p,u,f)}}function Z0(o,a){const u=o[9],l=u.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,Ao(f,-1)),u.splice(l,1)}function Hh(o,a){if(o.length<=10)return;const u=10+a,l=o[u];if(l){const f=l[17];null!==f&&f!==o&&Z0(f,l),a>0&&(o[u-1][4]=l[4]);const p=Ou(o,10+a);!function aA(o,a){$l(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(l[1],l);const v=p[19];null!==v&&v.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function Q0(o,a){if(!(128&a[2])){const u=a[11];u.destroyNode&&$l(o,a,u,3,null,null),function uA(o){let a=o[13];if(!a)return Ug(o[1],o);for(;a;){let u=null;if(yt(a))u=a[13];else{const l=a[10];l&&(u=l)}if(!u){for(;a&&!a[4]&&a!==o;)yt(a)&&Ug(a[1],a),a=a[3];null===a&&(a=o),yt(a)&&Ug(a[1],a),u=a&&a[4]}a=u}}(a)}}function Ug(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function Y0(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let l=0;l<u.length;l+=2){const f=a[u[l]];if(!(f instanceof Cl)){const p=u[l+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const w=f[p[v]],C=p[v+1];try{C.call(w)}finally{}}else try{p.call(f)}finally{}}}}(o,a),function dA(o,a){const u=o.cleanup,l=a[7];let f=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const v=u[p+1],w="function"==typeof v?v(a):br(a[v]),C=l[f=u[p+2]],S=u[p+3];"boolean"==typeof S?w.removeEventListener(u[p],C,S):S>=0?l[f=S]():l[f=-S].unsubscribe(),p+=2}else{const v=l[f=u[p+1]];u[p].call(v)}if(null!==l){for(let p=f+1;p<l.length;p++)(0,l[p])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const u=a[17];if(null!==u&&Fi(a[3])){u!==a[3]&&Z0(u,a);const l=a[19];null!==l&&l.detachView(o)}!function tF(o){L0.delete(o[20])}(a)}}function va(o,a,u,l,f){o.insertBefore(a,u,l,f)}function Bv(o,a){return o.parentNode(a)}function $g(o,a){if(null!==a){const u=a.type;if(3&u)return Qi(a,o);if(4&u)return Gh(-1,o[a.index]);if(8&u){const l=a.child;if(null!==l)return $g(o,l);{const f=o[a.index];return Fi(f)?Gh(-1,f):br(f)}}if(32&u)return H0(a,o)()||br(o[a.index]);{const l=iE(o,a);return null!==l?Array.isArray(l)?l[0]:$g(Kd(o[16]),l):$g(o,a.next)}}return null}function iE(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Gh(o,a){const u=10+o+1;if(u<a.length){const l=a[u],f=l[1].firstChild;if(null!==f)return $g(l,f)}return a[7]}function sE(o,a,u,l,f,p,v){for(;null!=u;){const w=l[u.index],C=u.type;if(v&&0===a&&(w&&Ui(br(w),l),u.flags|=4),64!=(64&u.flags))if(8&C)sE(o,a,u.child,l,f,p,!1),qu(a,o,f,w,p);else if(32&C){const S=H0(u,l);let P;for(;P=S();)qu(a,o,f,P,p);qu(a,o,f,w,p)}else 16&C?pA(o,a,l,u,f,p):qu(a,o,f,w,p);u=v?u.projectionNext:u.next}}function $l(o,a,u,l,f,p){sE(u,l,o.firstChild,a,f,p,!1)}function pA(o,a,u,l,f,p){const v=u[16],C=v[6].projection[l.projection];if(Array.isArray(C))for(let S=0;S<C.length;S++)qu(a,o,f,C[S],p);else sE(o,a,C,v[3],f,p,!0)}function jv(o,a,u){""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u)}function Hv(o){return 4===o.type&&"ng-template"!==o.value}function fo(o){return 0==(1&o)}function lE(o,a){return o?":not("+a.trim()+")":a}function DA(o){let a=o[0],u=1,l=2,f="",p=!1;for(;u<o.length;){let v=o[u];if("string"==typeof v)if(2&l){const w=o[++u];f+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?f+="."+v:4&l&&(f+=" "+v);else""!==f&&!fo(v)&&(a+=lE(p,f),f=""),l=v,p=p||!fo(l);u++}return""!==f&&(a+=lE(p,f)),a}const on={};function Wg(o,a=null,u=null,l){const f=fE(o,a,u,l);return f.resolveInjectorInitializers(),f}function fE(o,a=null,u=null,l,f=new Set){const p=[u||pn,Ph(o)];return l=l||("object"==typeof o?void 0:he(o)),new I0(p,a||zu(),l||null,f)}let Hl=(()=>{class o{static create(u,l){if(Array.isArray(u))return Wg({name:""},l,u,"");{const f=u.name??"";return Wg({name:f},u.parent,u.providers,f)}}}return o.THROW_IF_NOT_FOUND=ha,o.NULL=new Rg,o.\u0275prov=Ht({token:o,providedIn:"any",factory:()=>Dn(gv)}),o.__NG_ELEMENT_ID__=-1,o})();function qh(o,a=At.Default){const u=Oe();return null===u?Dn(o,a):Cc(In(),u,ie(o),a)}function ME(o,a){const u=o.contentQueries;if(null!==u)for(let l=0;l<u.length;l+=2){const f=u[l],p=u[l+1];if(-1!==p){const v=o.data[p];Vi(f),v.contentQueries(2,a[p],p)}}}function Yh(o,a,u,l,f,p,v,w,C,S,P){const L=a.blueprint.slice();return L[0]=f,L[2]=76|l,(null!==P||o&&1024&o[2])&&(L[2]|=1024),ia(L),L[3]=L[15]=o,L[8]=u,L[10]=v||o&&o[10],L[11]=w||o&&o[11],L[12]=C||o&&o[12]||null,L[9]=S||o&&o[9]||null,L[6]=p,L[20]=function Sv(){return Tv++}(),L[21]=P,L[16]=2==a.type?o[16]:L,L}function af(o,a,u,l,f){let p=o.data[a];if(null===p)p=function a_(o,a,u,l,f){const p=mr(),v=function at(){return St.lFrame.isParent}(),C=o.data[a]=function PE(o,a,u,l,f,p){return{type:u,index:l,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,u,a,l,f);return null===o.firstChild&&(o.firstChild=C),null!==p&&(v?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}(o,a,u,l,f),function Dc(){return St.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=l,p.attrs=f;const v=function Pr(){const o=St.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return function Zn(o,a){const u=St.lFrame;u.currentTNode=o,u.isParent=a}(p,!0),p}function uf(o,a,u,l){if(0===u)return-1;const f=a.length;for(let p=0;p<u;p++)a.push(l),o.blueprint.push(l),o.data.push(null);return f}function Qt(o,a,u){xn(a);try{const l=o.viewQuery;null!==l&&Xh(1,l,u);const f=o.template;null!==f&&u_(o,a,f,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&ME(o,a),o.staticViewQueries&&Xh(2,o.viewQuery,u);const p=o.components;null!==p&&function GA(o,a){for(let u=0;u<a.length;u++)IF(o,a[u])}(a,p)}catch(l){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),l}finally{a[2]&=-5,sa()}}function Wl(o,a,u,l){const f=a[2];if(128!=(128&f)){xn(a);try{ia(a),function Oa(o){return St.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&u_(o,a,u,2,l);const v=3==(3&f);if(v){const S=o.preOrderCheckHooks;null!==S&&Nd(a,S,null)}else{const S=o.preOrderHooks;null!==S&&Rd(a,S,0,null),Il(a,0)}if(function EF(o){for(let a=$h(o);null!==a;a=Zd(a)){if(!a[2])continue;const u=a[9];for(let l=0;l<u.length;l++){const f=u[l],p=f[3];0==(512&f[2])&&Ao(p,1),f[2]|=512}}}(a),function m_(o){for(let a=$h(o);null!==a;a=Zd(a))for(let u=10;u<a.length;u++){const l=a[u],f=l[1];dn(l)&&Wl(f,l,f.template,l[8])}}(a),null!==o.contentQueries&&ME(o,a),v){const S=o.contentCheckHooks;null!==S&&Nd(a,S)}else{const S=o.contentHooks;null!==S&&Rd(a,S,1),Il(a,1)}!function HA(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let l=0;l<u.length;l++){const f=u[l];if(f<0)no(~f);else{const p=f,v=u[++l],w=u[++l];Tu(v,p),w(2,a[p])}}}finally{no(-1)}}(o,a);const w=o.components;null!==w&&function WA(o,a){for(let u=0;u<a.length;u++)y_(o,a[u])}(a,w);const C=o.viewQuery;if(null!==C&&Xh(2,C,l),v){const S=o.viewCheckHooks;null!==S&&Nd(a,S)}else{const S=o.viewHooks;null!==S&&Rd(a,S,2),Il(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,Ao(a[3],-1))}finally{sa()}}}function xE(o,a,u,l){const f=a[10],v=function Yi(o){return 4==(4&o[2])}(a);try{!v&&f.begin&&f.begin(),v&&Qt(o,a,l),Wl(o,a,u,l)}finally{!v&&f.end&&f.end()}}function u_(o,a,u,l,f){const p=function bn(){return St.lFrame.selectedIndex}(),v=2&l;try{no(-1),v&&a.length>22&&function dE(o,a,u,l){if(!l)if(3==(3&a[2])){const p=o.preOrderCheckHooks;null!==p&&Nd(a,p,u)}else{const p=o.preOrderHooks;null!==p&&Rd(a,p,0,u)}no(u)}(o,a,22,!1),u(l,f)}finally{no(p)}}function sm(o,a,u,l,f,p,v,w,C,S){const P=22+l,L=P+f,K=function zA(o,a){const u=[];for(let l=0;l<a;l++)u.push(l<o?null:on);return u}(P,L),se="function"==typeof S?S():S;return K[1]={type:o,blueprint:K,template:u,queries:null,viewQuery:w,declTNode:a,data:K.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:se,incompleteFirstPass:!1}}function Vo(o,a,u){for(let l in o)if(o.hasOwnProperty(l)){const f=o[l];(u=null===u?{}:u).hasOwnProperty(l)?u[l].push(a,f):u[l]=[a,f]}return u}function h_(o,a,u,l,f,p){const v=p.hostBindings;if(v){let w=o.hostBindingOpCodes;null===w&&(w=o.hostBindingOpCodes=[]);const C=~a.index;(function wF(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(w)!=C&&w.push(C),w.push(l,f,v)}}function QA(o,a){let u=null,l=0;for(;l<a.length;){const f=a[l];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===u&&(u=[]),u.push(f,o[f],a[l+1])),l+=2}else l+=2;else l+=4}return u}function y_(o,a){const u=vi(a,o);if(dn(u)){const l=u[1];48&u[2]?Wl(l,u,l.template,u[8]):u[5]>0&&v_(u)}}function v_(o){for(let l=$h(o);null!==l;l=Zd(l))for(let f=10;f<l.length;f++){const p=l[f];if(dn(p))if(512&p[2]){const v=p[1];Wl(v,p,v.template,p[8])}else p[5]>0&&v_(p)}const u=o[1].components;if(null!==u)for(let l=0;l<u.length;l++){const f=vi(u[l],o);dn(f)&&f[5]>0&&v_(f)}}function IF(o,a){const u=vi(a,o),l=u[1];(function Pt(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(l,u),Qt(l,u,u[8])}function lf(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function um(o,a,u){const l=a[10];l.begin&&l.begin();try{Wl(o,a,o.template,u)}catch(f){throw function ep(o,a){const u=o[9],l=u?u.get(Bl,null):null;l&&l.handleError(a)}(a,f),f}finally{l.end&&l.end()}}function $E(o){!function Bo(o){for(let a=0;a<o.components.length;a++){const u=o.components[a],l=Nv(u);if(null!==l){const f=l[1];xE(f,l,f.template,u)}}}(o[8])}function Xh(o,a,u){Vi(0),a(o,u)}const __=(()=>Promise.resolve(null))();function hf(o,a,u,l,f=!1){for(;null!==u;){const p=a[u.index];if(null!==p&&l.push(br(p)),Fi(p))for(let w=10;w<p.length;w++){const C=p[w],S=C[1].firstChild;null!==S&&hf(C[1],C,S,l)}const v=u.type;if(8&v)hf(o,a,u.child,l);else if(32&v){const w=H0(u,a);let C;for(;C=w();)l.push(C)}else if(16&v){const w=iE(a,u);if(Array.isArray(w))l.push(...w);else{const C=Kd(a[16]);hf(C[1],C,w,l,!0)}}u=f?u.projectionNext:u.next}return l}class cm{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return hf(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Fi(a)){const u=a[8],l=u?u.indexOf(this):-1;l>-1&&(Hh(a,l),Ou(u,l))}this._attachedToViewContainer=!1}Q0(this._lView[1],this._lView)}onDestroy(a){!function l_(o,a,u,l){const f=function XA(o){return o[7]||(o[7]=[])}(a);null===u?f.push(l):(f.push(u),o.firstCreatePass&&function D_(o){return o.cleanup||(o.cleanup=[])}(o).push(l,f.length-1))}(this._lView[1],this._lView,null,a)}markForCheck(){!function om(o){for(;o;){o[2]|=32;const a=Kd(o);if(An(o)&&!a)return o;o=a}return null}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){um(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ue(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Qd(o,a){$l(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ue(902,!1);this._appRef=a}}class tM extends cm{constructor(a){super(a),this._view=a}detectChanges(){$E(this._view)}checkNoChanges(){}get context(){return null}}class w_ extends Vh{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=J(a);return new lm(u,this.ngModule)}}function WE(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class GE{constructor(a,u){this.injector=a,this.parentInjector=u}get(a,u,l){const f=this.injector.get(a,Lg,l);return f!==Lg||u===Lg?f:this.parentInjector.get(a,u,l)}}class lm extends class $S{}{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function wA(o){return o.map(DA).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return WE(this.componentDef.inputs)}get outputs(){return WE(this.componentDef.outputs)}create(a,u,l,f){let p=(f=f||this.ngModule)instanceof Xa?f:f?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new GE(a,p):a,w=v.get(qk,null);if(null===w)throw new Ue(407,!1);const C=v.get(x0,null),S=w.createRenderer(null,this.componentDef),P=this.componentDef.selectors[0][0]||"div",L=l?function vF(o,a,u){return o.selectRootElement(a,u===si.ShadowDom)}(S,l,this.componentDef.encapsulation):function Vv(o,a,u){return o.createElement(a,u)}(w.createRenderer(null,this.componentDef),P,function nM(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(P)),K=this.componentDef.onPush?288:272,se=function CF(o,a){return{components:[],scheduler:o||eA,clean:__,playerHandler:a||null,flags:0}}(),be=sm(0,null,null,1,0,null,null,null,null,null),ze=Yh(null,be,se,K,null,null,w,S,C,v,null);let ot,dt;xn(ze);try{const jt=function sM(o,a,u,l,f,p){const v=u[1];u[22]=o;const C=af(v,22,2,"#host",null),S=C.mergedAttrs=a.hostAttrs;null!==S&&(function ff(o,a,u){let l=u?o.styles:null,f=u?o.classes:null,p=0;if(null!==a)for(let v=0;v<a.length;v++){const w=a[v];"number"==typeof w?p=w:1==p?f=Se(f,w):2==p&&(l=Se(l,w+": "+a[++v]+";"))}u?o.styles=l:o.stylesWithoutHost=l,u?o.classes=f:o.classesWithoutHost=f}(C,S,!0),null!==o&&(Mu(f,o,S),null!==C.classes&&jv(f,o,C.classes),null!==C.styles&&function gA(o,a,u){o.setAttribute(a,"style",u)}(f,o,C.styles)));const P=l.createRenderer(o,a),L=Yh(u,function RE(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=sm(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}(a),null,a.onPush?32:16,u[22],C,l,P,p||null,null,null);return v.firstCreatePass&&(function Ic(o,a,u){!function yh(o,a,u){let l;"string"==typeof u?l=u.charCodeAt(0)||0:u.hasOwnProperty(X)&&(l=u[X]),null==l&&(l=u[X]=mh++);const f=255&l;a.data[o+(f>>5)]|=1<<f}(o,a,u)}(function vr(o,a){const u=ua(o,a);if(-1!==u)return u;const l=a[1];l.firstCreatePass&&(o.injectorIndex=a.length,Ua(l.data,o),Ua(a,null),Ua(l.blueprint,null));const f=$a(o,a),p=o.injectorIndex;if(gh(f)){const v=es(f),w=Jn(f,a),C=w[1].data;for(let S=0;S<8;S++)a[p+S]=w[v+S]|C[v+S]}return a[p+8]=f,p}(C,u),v,a.type),function Jh(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}(v,C),function BE(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}(C,u.length,1)),lf(u,L),u[22]=L}(L,this.componentDef,ze,w,S);if(L)if(l)Mu(S,L,["ng-version",wv.full]);else{const{attrs:Ve,classes:Et}=function Gv(o){const a=[],u=[];let l=1,f=2;for(;l<o.length;){let p=o[l];if("string"==typeof p)2===f?""!==p&&a.push(p,o[++l]):8===f&&u.push(p);else{if(!fo(f))break;f=p}l++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Ve&&Mu(S,L,Ve),Et&&Et.length>0&&jv(S,L,Et.join(" "))}if(dt=function _n(o,a){return o.data[a]}(be,22),void 0!==u){const Ve=dt.projection=[];for(let Et=0;Et<this.ngContentSelectors.length;Et++){const Rn=u[Et];Ve.push(null!=Rn?Array.from(Rn):null)}}ot=function E_(o,a,u,l,f){const p=u[1],v=function DF(o,a,u){const l=In();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),function jE(o,a,u,l,f){o.data[l]=f;const p=f.factory||(f.factory=Gt(f.type)),v=new Cl(p,Nt(f),qh);o.blueprint[l]=v,u[l]=v,h_(o,a,0,l,uf(o,u,f.hostVars,on),f)}(o,l,a,uf(o,a,1,null),u),function OE(o,a){const l=a.directiveEnd,f=o.data,p=a.attrs,v=[];let w=null,C=null;for(let S=a.directiveStart;S<l;S++){const P=f[S],L=P.inputs,K=null===p||Hv(a)?null:QA(L,p);v.push(K),w=Vo(L,S,w),C=Vo(P.outputs,S,C)}null!==w&&(w.hasOwnProperty("class")&&(a.flags|=16),w.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=w,a.outputs=C}(o,l));const f=Es(a,o,l.directiveStart,l);Ui(f,a);const p=Qi(l,a);return p&&Ui(p,a),f}(p,u,a);if(l.components.push(v),o[8]=v,null!==f)for(const C of f)C(v,a);if(a.contentQueries){const C=In();a.contentQueries(1,v,C.directiveStart)}const w=In();return!p.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(no(w.index),h_(u[1],w,0,w.directiveStart,w.directiveEnd,a),function FE(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}(a,v)),v}(jt,this.componentDef,ze,se,[bF]),Qt(be,ze,null)}finally{sa()}return new zE(this.componentType,ot,Bc(dt,ze),ze,dt)}}class zE extends class S0{}{constructor(a,u,l,f,p){super(),this.location=l,this._rootLView=f,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new tM(f),this.componentType=a}setInput(a,u){const l=this._tNode.inputs;let f;if(null!==l&&(f=l[a])){const p=this._rootLView;(function df(o,a,u,l,f){for(let p=0;p<u.length;){const v=u[p++],w=u[p++],C=a[v],S=o.data[v];null!==S.setInput?S.setInput(C,f,l,w):C[w]=f}})(p[1],p,f,a,u),function kE(o,a){const u=vi(a,o);16&u[2]||(u[2]|=32)}(p,this._tNode.index)}}get injector(){return new Bi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function bF(){const o=In();!function xd(o,a){for(let u=a.directiveStart,l=a.directiveEnd;u<l;u++){const p=o.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:C,ngAfterViewChecked:S,ngOnDestroy:P}=p;v&&(o.contentHooks||(o.contentHooks=[])).push(-u,v),w&&((o.contentHooks||(o.contentHooks=[])).push(u,w),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,w)),C&&(o.viewHooks||(o.viewHooks=[])).push(-u,C),S&&((o.viewHooks||(o.viewHooks=[])).push(u,S),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,S)),null!=P&&(o.destroyHooks||(o.destroyHooks=[])).push(u,P)}}(Oe()[1],o)}let tp=null;function Yu(){if(!tp){const o=$n.Symbol;if(o&&o.iterator)tp=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const l=a[u];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(tp=l)}}}return tp}function Gl(o){return!!dm(o)&&(Array.isArray(o)||!(o instanceof Map)&&Yu()in o)}function dm(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function ym(o){return!!o&&"function"==typeof o.then}function eI(o){return!!o&&"function"==typeof o.subscribe}const Yc=void 0;var Pm=["en",[["a","p"],["AM","PM"],Yc],[["AM","PM"],Yc,Yc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yc,"{1} 'at' {0}",Yc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function jM(o){const u=Math.floor(Math.abs(o)),l=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===l?1:5}];let td={};function Cf(o){const a=function WM(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=B_(a);if(u)return u;const l=a.split("-")[0];if(u=B_(l),u)return u;if("en"===l)return Pm;throw new Ue(701,!1)}function TI(o){return Cf(o)[Lt.PluralCase]}function B_(o){return o in td||(td[o]=$n.ng&&$n.ng.common&&$n.ng.common.locales&&$n.ng.common.locales[o]),td[o]}var Lt=(()=>((Lt=Lt||{})[Lt.LocaleId=0]="LocaleId",Lt[Lt.DayPeriodsFormat=1]="DayPeriodsFormat",Lt[Lt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Lt[Lt.DaysFormat=3]="DaysFormat",Lt[Lt.DaysStandalone=4]="DaysStandalone",Lt[Lt.MonthsFormat=5]="MonthsFormat",Lt[Lt.MonthsStandalone=6]="MonthsStandalone",Lt[Lt.Eras=7]="Eras",Lt[Lt.FirstDayOfWeek=8]="FirstDayOfWeek",Lt[Lt.WeekendRange=9]="WeekendRange",Lt[Lt.DateFormat=10]="DateFormat",Lt[Lt.TimeFormat=11]="TimeFormat",Lt[Lt.DateTimeFormat=12]="DateTimeFormat",Lt[Lt.NumberSymbols=13]="NumberSymbols",Lt[Lt.NumberFormats=14]="NumberFormats",Lt[Lt.CurrencyCode=15]="CurrencyCode",Lt[Lt.CurrencySymbol=16]="CurrencySymbol",Lt[Lt.CurrencyName=17]="CurrencyName",Lt[Lt.Currencies=18]="Currencies",Lt[Lt.Directionality=19]="Directionality",Lt[Lt.PluralCase=20]="PluralCase",Lt[Lt.ExtraData=21]="ExtraData",Lt))();class Ia{}function Ss(o,a){return new eD(o,a??null)}class eD extends Ia{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new w_(this);const l=function De(o,a){const u=o[ki]||null;if(!u&&!0===a)throw new Error(`Type ${he(o)} does not have '\u0275mod' property.`);return u}(a);this._bootstrapComponents=function lo(o){return o instanceof Function?o():o}(l.bootstrap),this._r3Injector=fE(a,u,[{provide:Ia,useValue:this},{provide:Vh,useValue:this.componentFactoryResolver}],he(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}function oD(o){return a=>{setTimeout(o,void 0,a)}}const ic=class $m extends N.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,l){let f=a,p=u||(()=>null),v=l;if(a&&"object"==typeof a){const C=a;f=C.next?.bind(C),p=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(p=oD(p),f&&(f=oD(f)),v&&(v=oD(v)));const w=super.subscribe({next:f,error:p,complete:v});return a instanceof U.w0&&a.add(w),w}};let _p=(()=>{class o{}return o.__NG_ELEMENT_ID__=Fx,o})();const Ox=_p,kx=class extends Ox{constructor(a,u,l){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=l}createEmbeddedView(a,u){const l=this._declarationTContainer.tViews,f=Yh(this._declarationLView,l,a,16,null,l.declTNode,null,null,null,null,u||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(l)),Qt(l,f,a),new cm(f)}};function Fx(){return function Hm(o,a){return 4&o.type?new kx(a,o,Bc(o,a)):null}(In(),Oe())}let Dp=(()=>{class o{}return o.__NG_ELEMENT_ID__=Lx,o})();function Lx(){return function mC(o,a){let u;const l=a[o.index];if(Fi(l))u=l;else{let f;if(8&o.type)f=br(l);else{const p=a[11];f=p.createComment("");const v=Qi(o,a);va(p,Bv(p,v),f,function eE(o,a){return o.nextSibling(a)}(p,v),!1)}a[o.index]=u=function g_(o,a,u,l){return new Array(o,!0,!1,a,null,0,l,u,null,null)}(l,a,f,o),lf(a,u)}return new id(u,o,a)}(In(),Oe())}const Vx=Dp,id=class extends Vx{constructor(a,u,l){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=l}get element(){return Bc(this._hostTNode,this._hostLView)}get injector(){return new Bi(this._hostTNode,this._hostLView)}get parentInjector(){const a=$a(this._hostTNode,this._hostLView);if(gh(a)){const u=Jn(a,this._hostLView),l=es(a);return new Bi(u[1].data[l+8],u)}return new Bi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=gC(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,l){let f,p;"number"==typeof l?f=l:null!=l&&(f=l.index,p=l.injector);const v=a.createEmbeddedView(u||{},p);return this.insert(v,f),v}createComponent(a,u,l,f,p){const v=a&&!function Fr(o){return"function"==typeof o}(a);let w;if(v)w=u;else{const L=u||{};w=L.index,l=L.injector,f=L.projectableNodes,p=L.environmentInjector||L.ngModuleRef}const C=v?a:new lm(J(a)),S=l||this.parentInjector;if(!p&&null==C.ngModule){const K=(v?S:this.parentInjector).get(Xa,null);K&&(p=K)}const P=C.create(S,f,void 0,p);return this.insert(P.hostView,w),P}insert(a,u){const l=a._lView,f=l[1];if(function ra(o){return Fi(o[3])}(l)){const P=this.indexOf(a);if(-1!==P)this.detach(P);else{const L=l[3],K=new id(L,L[6],L[3]);K.detach(K.indexOf(a))}}const p=this._adjustIndex(u),v=this._lContainer;!function cA(o,a,u,l){const f=10+l,p=u.length;l>0&&(u[f-1][4]=a),l<p-10?(a[4]=u[f],Ac(u,10+l,a)):(u.push(a),a[4]=null),a[3]=u;const v=a[17];null!==v&&u!==v&&function lA(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(v,a);const w=a[19];null!==w&&w.insertView(o),a[2]|=64}(f,l,v,p);const w=Gh(p,v),C=l[11],S=Bv(C,v[7]);return null!==S&&function K0(o,a,u,l,f,p){l[0]=f,l[6]=a,$l(o,l,u,1,f,p)}(f,v[6],C,l,S,w),a.attachToViewContainerRef(),Ac(Wm(v),p,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=gC(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),l=Hh(this._lContainer,u);l&&(Ou(Wm(this._lContainer),u),Q0(l[1],l))}detach(a){const u=this._adjustIndex(a,-1),l=Hh(this._lContainer,u);return l&&null!=Ou(Wm(this._lContainer),u)?new cm(l):null}_adjustIndex(a,u=0){return a??this.length+u}};function gC(o){return o[8]}function Wm(o){return o[8]||(o[8]=[])}function vD(...o){}const Ms=new ct("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ty=new ct("LocaleId",{providedIn:"root",factory:()=>function pa(o,a=At.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Dn(o,a)}(ty,At.Optional|At.SkipSelf)||function EN(){return typeof $localize<"u"&&$localize.locale||"en-US"}()}),ny=new ct("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class mo{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ic(!1),this.onMicrotaskEmpty=new ic(!1),this.onStable=new ic(!1),this.onError=new ic(!1),typeof Zone>"u")throw new Ue(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const p=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new p("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!l&&u,f.shouldCoalesceRunChangeDetection=l,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function ID(){let o=$n.requestAnimationFrame,a=$n.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const l=a[Zone.__symbol__("OriginalDelegate")];l&&(a=l)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function UC(o){const a=()=>{!function AN(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call($n,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Ip(o),o.isCheckStableRunning=!0,CD(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Ip(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,l,f,p,v,w)=>{try{return ry(o),u.invokeTask(f,p,v,w)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||o.shouldCoalesceRunChangeDetection)&&a(),$C(o)}},onInvoke:(u,l,f,p,v,w,C)=>{try{return ry(o),u.invoke(f,p,v,w,C)}finally{o.shouldCoalesceRunChangeDetection&&a(),$C(o)}},onHasTask:(u,l,f,p)=>{u.hasTask(f,p),l===f&&("microTask"==p.change?(o._hasPendingMicrotasks=p.microTask,Ip(o),CD(o)):"macroTask"==p.change&&(o.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,l,f,p)=>(u.handleError(f,p),o.runOutsideAngular(()=>o.onError.emit(p)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!mo.isInAngularZone())throw new Ue(909,!1)}static assertNotInAngularZone(){if(mo.isInAngularZone())throw new Ue(909,!1)}run(a,u,l){return this._inner.run(a,u,l)}runTask(a,u,l,f){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+f,a,SN,vD,vD);try{return p.runTask(v,u,l)}finally{p.cancelTask(v)}}runGuarded(a,u,l){return this._inner.runGuarded(a,u,l)}runOutsideAngular(a){return this._outer.run(a)}}const SN={};function CD(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Ip(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function ry(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function $C(o){o._nesting--,CD(o)}let od=!1;function kN(){return od=!0,true}let nL=(()=>{class o{}return o.__NG_ELEMENT_ID__=LN,o})();function LN(o){return function VN(o,a,u){if(gt(o)&&!u){const l=vi(o.index,a);return new cm(l,l)}return 47&o.type?new cm(a[16],a):null}(In(),Oe(),16==(16&o))}class WN{constructor(){}supports(a){return Gl(a)}create(a){return new oL(a)}}const sL=(o,a)=>a;class oL{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||sL}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,l=this._removalsHead,f=0,p=null;for(;u||l;){const v=!l||u&&u.currentIndex<Ap(l,f,p)?u:l,w=Ap(v,f,p),C=v.currentIndex;if(v===l)f--,l=l._nextRemoved;else if(u=u._next,null==v.previousIndex)f++;else{p||(p=[]);const S=w-f,P=C-f;if(S!=P){for(let K=0;K<S;K++){const se=K<p.length?p[K]:p[K]=0,be=se+K;P<=be&&be<S&&(p[K]=se+1)}p[v.previousIndex]=P-S}}w!==C&&a(v,w,C)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!Gl(a))throw new Ue(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,p,v,u=this._itHead,l=!1;if(Array.isArray(a)){this.length=a.length;for(let w=0;w<this.length;w++)p=a[w],v=this._trackByFn(w,p),null!==u&&Object.is(u.trackById,v)?(l&&(u=this._verifyReinsertion(u,p,v,w)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,v,w),l=!0),u=u._next}else f=0,function Gc(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[Yu()]();let l;for(;!(l=u.next()).done;)a(l.value)}}(a,w=>{v=this._trackByFn(f,w),null!==u&&Object.is(u.trackById,v)?(l&&(u=this._verifyReinsertion(u,w,v,f)),Object.is(u.item,w)||this._addIdentityChange(u,w)):(u=this._mismatch(u,w,v,f),l=!0),u=u._next,f++}),this.length=f;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,l,f){let p;return null===a?p=this._itTail:(p=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,p,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(l,f))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,p,f)):a=this._addAfter(new aL(u,l),p,f),a}_verifyReinsertion(a,u,l,f){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?a=this._reinsertAfter(p,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,p=a._nextRemoved;return null===f?this._removalsHead=p:f._nextRemoved=p,null===p?this._removalsTail=f:p._prevRemoved=f,this._insertAfter(a,u,l),this._addToMoves(a,l),a}_moveAfter(a,u,l){return this._unlink(a),this._insertAfter(a,u,l),this._addToMoves(a,l),a}_addAfter(a,u,l){return this._insertAfter(a,u,l),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,l){const f=null===u?this._itHead:u._next;return a._next=f,a._prev=u,null===f?this._itTail=a:f._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new GN),this._linkedRecords.put(a),a.currentIndex=l,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,l=a._next;return null===u?this._itHead=l:u._next=l,null===l?this._itTail=u:l._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new GN),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class aL{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cy{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===u||u<=l.currentIndex)&&Object.is(l.trackById,a))return l;return null}remove(a){const u=a._prevDup,l=a._nextDup;return null===u?this._head=l:u._nextDup=l,null===l?this._tail=u:l._prevDup=u,null===this._head}}class GN{constructor(){this.map=new Map}put(a){const u=a.trackById;let l=this.map.get(u);l||(l=new cy,this.map.set(u,l)),l.add(a)}get(a,u){const f=this.map.get(a);return f?f.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ap(o,a,u){const l=o.previousIndex;if(null===l)return l;let f=0;return u&&l<u.length&&(f=u[l]),l+a+f}class Mp{constructor(){}supports(a){return a instanceof Map||dm(a)}create(){return new xp}}class xp{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||dm(a)))throw new Ue(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(l,f)=>{if(u&&u.key===f)this._maybeAddToChanges(u,l),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(f,l);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let l=u;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const l=a._prev;return u._next=a,u._prev=l,a._prev=u,l&&(l._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,u);const p=f._prev,v=f._next;return p&&(p._next=v),v&&(v._prev=p),f._next=null,f._prev=null,f}const l=new rb(a);return this._records.set(a,l),l.currentValue=u,this._addToAdditions(l),l}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(l=>u(a[l],l))}}class rb{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function zN(){return new Np([new WN])}let Np=(()=>{class o{constructor(u){this.factories=u}static create(u,l){if(null!=l){const f=l.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:l=>o.create(u,l||zN()),deps:[[o,new x,new b]]}}find(u){const l=this.factories.find(f=>f.supports(u));if(null!=l)return l;throw new Ue(901,!1)}}return o.\u0275prov=Ht({token:o,providedIn:"root",factory:zN}),o})();function PD(){return new ly([new Mp])}let ly=(()=>{class o{constructor(u){this.factories=u}static create(u,l){if(l){const f=l.factories.slice();u=u.concat(f)}return new o(u)}static extend(u){return{provide:o,useFactory:l=>o.create(u,l||PD()),deps:[[o,new x,new b]]}}find(u){const l=this.factories.find(f=>f.supports(u));if(l)return l;throw new Ue(901,!1)}}return o.\u0275prov=Ht({token:o,providedIn:"root",factory:PD}),o})()},8201:(Mt,Be,V)=>{V.d(Be,{Z:()=>Ue});var N=V(9835),U=V(9903),O=V(4567),ce=V(9794);class ae{constructor(pe,ge){this._delegate=pe,this.firebase=ge,(0,O._addComponent)(pe,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(pe,ge=O._DEFAULT_ENTRY_NAME){var Xe;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(pe);return!Ye.isInitialized()&&"EXPLICIT"===(null===(Xe=Ye.getComponent())||void 0===Xe?void 0:Xe.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:ge})}_removeServiceInstance(pe,ge=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(ge)}_addComponent(pe){(0,O._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,O._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new N.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function Se(){const Je=function he(Je){const pe={},ge={__esModule:!0,initializeApp:function Le(oe,ye={}){const Ae=O.initializeApp(oe,ye);if((0,N.r3)(pe,Ae.name))return pe[Ae.name];const te=new Je(Ae,ge);return pe[Ae.name]=te,te},app:Ye,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Ce(oe){const ye=oe.name,Ae=ye.replace("-compat","");if(O._registerComponent(oe)&&"PUBLIC"===oe.type){const te=(le=Ye())=>{if("function"!=typeof le[Ae])throw Ie.create("invalid-app-argument",{appName:ye});return le[Ae]()};void 0!==oe.serviceProps&&(0,N.ZB)(te,oe.serviceProps),ge[Ae]=te,Je.prototype[Ae]=function(...le){return this._getService.bind(this,ye).apply(this,oe.multipleInstances?le:[])}}return"PUBLIC"===oe.type?ge[Ae]:null},removeApp:function Xe(oe){delete pe[oe]},useAsService:function et(oe,ye){return"serverAuth"===ye?null:ye},modularAPIs:O}};function Ye(oe){if(!(0,N.r3)(pe,oe=oe||O._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:oe});return pe[oe]}return ge.default=ge,Object.defineProperty(ge,"apps",{get:function Re(){return Object.keys(pe).map(oe=>pe[oe])}}),Ye.App=Je,ge}(ae);return Je.INTERNAL=Object.assign(Object.assign({},Je.INTERNAL),{createFirebaseNamespace:Se,extendNamespace:function pe(ge){(0,N.ZB)(Je,ge)},createSubscribe:N.ne,ErrorFactory:N.LL,deepExtend:N.ZB}),Je}(),G=new ce.Yd("@firebase/app-compat");if((0,N.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Je=self.firebase.SDK_VERSION;Je&&Je.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ue=Z;!function Ge(Je){(0,O.registerVersion)("@firebase/app-compat","0.1.32",Je)}()},4567:(Mt,Be,V)=>{V.r(Be),V.d(Be,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>ps,_DEFAULT_ENTRY_NAME:()=>fn,_addComponent:()=>Bn,_addOrOverwriteComponent:()=>Ht,_apps:()=>hn,_clearComponents:()=>Ls,_components:()=>tr,_getProvider:()=>jn,_registerComponent:()=>Rt,_removeServiceInstance:()=>Zt,deleteApp:()=>At,getApp:()=>Ir,getApps:()=>Ys,initializeApp:()=>Vs,onLog:()=>En,registerVersion:()=>zi,setLogLevel:()=>Mr});var N=V(5861),U=V(9903),O=V(9794),ce=V(9835),ae=V(1592);class ve{constructor(z){this.container=z}getPlatformInfoString(){return this.container.getProviders().map(q=>{if(function Ie(j){return"VERSION"===j.getComponent()?.type}(q)){const Me=q.getImmediate();return`${Me.library}/${Me.version}`}return null}).filter(q=>q).join(" ")}}const he="@firebase/app",Z=new O.Yd("@firebase/app"),fn="[DEFAULT]",tt={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},hn=new Map,tr=new Map;function Bn(j,z){try{j.container.addComponent(z)}catch(q){Z.debug(`Component ${z.name} failed to register with FirebaseApp ${j.name}`,q)}}function Ht(j,z){j.container.addOrOverwriteComponent(z)}function Rt(j){const z=j.name;if(tr.has(z))return Z.debug(`There were multiple attempts to register component ${z}.`),!1;tr.set(z,j);for(const q of hn.values())Bn(q,j);return!0}function jn(j,z){const q=j.container.getProvider("heartbeat").getImmediate({optional:!0});return q&&q.triggerHeartbeat(),j.container.getProvider(z)}function Zt(j,z,q=fn){jn(j,z).clearInstance(q)}function Ls(){tr.clear()}const Kn=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Qs{constructor(z,q,Me){this._isDeleted=!1,this._options=Object.assign({},z),this._config=Object.assign({},q),this._name=q.name,this._automaticDataCollectionEnabled=q.automaticDataCollectionEnabled,this._container=Me,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(z){this.checkDestroyed(),this._automaticDataCollectionEnabled=z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(z){this._isDeleted=z}checkDestroyed(){if(this.isDeleted)throw Kn.create("app-deleted",{appName:this._name})}}const ps="9.9.3";function Vs(j,z={}){"object"!=typeof z&&(z={name:z});const q=Object.assign({name:fn,automaticDataCollectionEnabled:!1},z),Me=q.name;if("string"!=typeof Me||!Me)throw Kn.create("bad-app-name",{appName:String(Me)});const Ze=hn.get(Me);if(Ze){if((0,ce.vZ)(j,Ze.options)&&(0,ce.vZ)(q,Ze.config))return Ze;throw Kn.create("duplicate-app",{appName:Me})}const kt=new U.H0(Me);for(const kn of tr.values())kt.addComponent(kn);const cn=new Qs(j,q,kt);return hn.set(Me,cn),cn}function Ir(j=fn){const z=hn.get(j);if(!z)throw Kn.create("no-app",{appName:j});return z}function Ys(){return Array.from(hn.values())}function At(j){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,N.Z)(function*(j){const z=j.name;hn.has(z)&&(hn.delete(z),yield Promise.all(j.container.getProviders().map(q=>q.delete())),j.isDeleted=!0)})).apply(this,arguments)}function zi(j,z,q){var Me;let Ze=null!==(Me=tt[j])&&void 0!==Me?Me:j;q&&(Ze+=`-${q}`);const kt=Ze.match(/\s|\//),cn=z.match(/\s|\//);if(kt||cn){const kn=[`Unable to register library "${Ze}" with version "${z}":`];return kt&&kn.push(`library name "${Ze}" contains illegal characters (whitespace or "/")`),kt&&cn&&kn.push("and"),cn&&kn.push(`version name "${z}" contains illegal characters (whitespace or "/")`),void Z.warn(kn.join(" "))}Rt(new U.wA(`${Ze}-version`,()=>({library:Ze,version:z}),"VERSION"))}function En(j,z){if(null!==j&&"function"!=typeof j)throw Kn.create("invalid-log-argument");(0,O.Am)(j,z)}function Mr(j){(0,O.Ub)(j)}const nr="firebase-heartbeat-store";let Cr=null;function bo(){return Cr||(Cr=(0,ae.X3)("firebase-heartbeat-database",1,{upgrade:(j,z)=>{0===z&&j.createObjectStore(nr)}}).catch(j=>{throw Kn.create("idb-open",{originalErrorMessage:j.message})})),Cr}function $n(){return($n=(0,N.Z)(function*(j){var z;try{return(yield bo()).transaction(nr).objectStore(nr).get(Ii(j))}catch(q){if(q instanceof ce.ZR)Z.warn(q.message);else{const Me=Kn.create("idb-get",{originalErrorMessage:null===(z=q)||void 0===z?void 0:z.message});Z.warn(Me.message)}}})).apply(this,arguments)}function or(j,z){return gs.apply(this,arguments)}function gs(){return(gs=(0,N.Z)(function*(j,z){var q;try{const Ze=(yield bo()).transaction(nr,"readwrite");return yield Ze.objectStore(nr).put(z,Ii(j)),Ze.done}catch(Me){if(Me instanceof ce.ZR)Z.warn(Me.message);else{const Ze=Kn.create("idb-set",{originalErrorMessage:null===(q=Me)||void 0===q?void 0:q.message});Z.warn(Ze.message)}}})).apply(this,arguments)}function Ii(j){return`${j.name}!${j.options.appId}`}class Oi{constructor(z){this.container=z,this._heartbeatsCache=null;const q=this.container.getProvider("app").getImmediate();this._storage=new pr(q),this._heartbeatsCachePromise=this._storage.read().then(Me=>(this._heartbeatsCache=Me,Me))}triggerHeartbeat(){var z=this;return(0,N.Z)(function*(){const Me=z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ze=rr();if(null===z._heartbeatsCache&&(z._heartbeatsCache=yield z._heartbeatsCachePromise),z._heartbeatsCache.lastSentHeartbeatDate!==Ze&&!z._heartbeatsCache.heartbeats.some(kt=>kt.date===Ze))return z._heartbeatsCache.heartbeats.push({date:Ze,agent:Me}),z._heartbeatsCache.heartbeats=z._heartbeatsCache.heartbeats.filter(kt=>{const cn=new Date(kt.date).valueOf();return Date.now()-cn<=2592e6}),z._storage.overwrite(z._heartbeatsCache)})()}getHeartbeatsHeader(){var z=this;return(0,N.Z)(function*(){if(null===z._heartbeatsCache&&(yield z._heartbeatsCachePromise),null===z._heartbeatsCache||0===z._heartbeatsCache.heartbeats.length)return"";const q=rr(),{heartbeatsToSend:Me,unsentEntries:Ze}=function ki(j,z=1024){const q=[];let Me=j.slice();for(const Ze of j){const kt=q.find(cn=>cn.agent===Ze.agent);if(kt){if(kt.dates.push(Ze.date),X(q)>z){kt.dates.pop();break}}else if(q.push({agent:Ze.agent,dates:[Ze.date]}),X(q)>z){q.pop();break}Me=Me.slice(1)}return{heartbeatsToSend:q,unsentEntries:Me}}(z._heartbeatsCache.heartbeats),kt=(0,ce.L)(JSON.stringify({version:2,heartbeats:Me}));return z._heartbeatsCache.lastSentHeartbeatDate=q,Ze.length>0?(z._heartbeatsCache.heartbeats=Ze,yield z._storage.overwrite(z._heartbeatsCache)):(z._heartbeatsCache.heartbeats=[],z._storage.overwrite(z._heartbeatsCache)),kt})()}}function rr(){return(new Date).toISOString().substring(0,10)}class pr{constructor(z){this.app=z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,N.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var z=this;return(0,N.Z)(function*(){return(yield z._canUseIndexedDBPromise)&&(yield function si(j){return $n.apply(this,arguments)}(z.app))||{heartbeats:[]}})()}overwrite(z){var q=this;return(0,N.Z)(function*(){var Me;if(yield q._canUseIndexedDBPromise){const kt=yield q.read();return or(q.app,{lastSentHeartbeatDate:null!==(Me=z.lastSentHeartbeatDate)&&void 0!==Me?Me:kt.lastSentHeartbeatDate,heartbeats:z.heartbeats})}})()}add(z){var q=this;return(0,N.Z)(function*(){var Me;if(yield q._canUseIndexedDBPromise){const kt=yield q.read();return or(q.app,{lastSentHeartbeatDate:null!==(Me=z.lastSentHeartbeatDate)&&void 0!==Me?Me:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,...z.heartbeats]})}})()}}function X(j){return(0,ce.L)(JSON.stringify({version:2,heartbeats:j})).length}!function H(j){Rt(new U.wA("platform-logger",z=>new ve(z),"PRIVATE")),Rt(new U.wA("heartbeat",z=>new Oi(z),"PRIVATE")),zi(he,"0.7.31",j),zi(he,"0.7.31","esm2017"),zi("fire-js","")}("")},9903:(Mt,Be,V)=>{V.d(Be,{H0:()=>he,wA:()=>O});var N=V(5861),U=V(9835);class O{constructor(Z,G,ie){this.name=Z,this.instanceFactory=G,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const ce="[DEFAULT]";class ae{constructor(Z,G){this.name=Z,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const G=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has(G)){const ie=new U.BH;if(this.instancesDeferred.set(G,ie),this.isInitialized(G)||this.shouldAutoInitialize())try{const it=this.getOrInitializeService({instanceIdentifier:G});it&&ie.resolve(it)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(Z){var G;const ie=this.normalizeInstanceIdentifier(Z?.identifier),it=null!==(G=Z?.optional)&&void 0!==G&&G;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(it)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Ge){if(it)return null;throw Ge}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function Ie(Se){return"EAGER"===Se.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:ce})}catch{}for(const[G,ie]of this.instancesDeferred.entries()){const it=this.normalizeInstanceIdentifier(G);try{const Ge=this.getOrInitializeService({instanceIdentifier:it});ie.resolve(Ge)}catch{}}}}clearInstance(Z=ce){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,N.Z)(function*(){const G=Array.from(Z.instances.values());yield Promise.all([...G.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...G.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=ce){return this.instances.has(Z)}getOptions(Z=ce){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:G={}}=Z,ie=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const it=this.getOrInitializeService({instanceIdentifier:ie,options:G});for(const[Ge,Ue]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Ge)&&Ue.resolve(it);return it}onInit(Z,G){var ie;const it=this.normalizeInstanceIdentifier(G),Ge=null!==(ie=this.onInitCallbacks.get(it))&&void 0!==ie?ie:new Set;Ge.add(Z),this.onInitCallbacks.set(it,Ge);const Ue=this.instances.get(it);return Ue&&Z(Ue,it),()=>{Ge.delete(Z)}}invokeOnInitCallbacks(Z,G){const ie=this.onInitCallbacks.get(G);if(ie)for(const it of ie)try{it(Z,G)}catch{}}getOrInitializeService({instanceIdentifier:Z,options:G={}}){let ie=this.instances.get(Z);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(Se=Z,Se===ce?void 0:Se),options:G}),this.instances.set(Z,ie),this.instancesOptions.set(Z,G),this.invokeOnInitCallbacks(ie,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,ie)}catch{}var Se;return ie||null}normalizeInstanceIdentifier(Z=ce){return this.component?this.component.multipleInstances?Z:ce:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const G=this.getProvider(Z.name);if(G.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);G.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const G=new ae(Z,this);return this.providers.set(Z,G),G}getProviders(){return Array.from(this.providers.values())}}},9794:(Mt,Be,V)=>{V.d(Be,{Am:()=>Se,Ub:()=>he,Yd:()=>Ie,in:()=>U});const N=[];var U=(()=>{return(Z=U||(U={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",U;var Z})();const O={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},ce=U.INFO,ae={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},ve=(Z,G,...ie)=>{if(G<Z.logLevel)return;const it=(new Date).toISOString(),Ge=ae[G];if(!Ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Ge](`[${it}]  ${Z.name}:`,...ie)};class Ie{constructor(G){this.name=G,this._logLevel=ce,this._logHandler=ve,this._userLogHandler=null,N.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in U))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?O[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...G),this._logHandler(this,U.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...G),this._logHandler(this,U.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,U.INFO,...G),this._logHandler(this,U.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,U.WARN,...G),this._logHandler(this,U.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...G),this._logHandler(this,U.ERROR,...G)}}function he(Z){N.forEach(G=>{G.setLogLevel(Z)})}function Se(Z,G){for(const ie of N){let it=null;G&&G.level&&(it=O[G.level]),ie.userLogHandler=null===Z?null:(Ge,Ue,...Je)=>{const pe=Je.map(ge=>{if(null==ge)return null;if("string"==typeof ge)return ge;if("number"==typeof ge||"boolean"==typeof ge)return ge.toString();if(ge instanceof Error)return ge.message;try{return JSON.stringify(ge)}catch{return null}}).filter(ge=>ge).join(" ");Ue>=(it??Ge.logLevel)&&Z({level:U[Ue].toLowerCase(),message:pe,args:Je,type:Ge.name})}}}},1592:(Mt,Be,V)=>{V.d(Be,{Lj:()=>Le,X3:()=>Ye});var N=V(5861);let O,ce;const Ie=new WeakMap,he=new WeakMap,Se=new WeakMap,Z=new WeakMap,G=new WeakMap;let Ge={get(ye,Ae,te){if(ye instanceof IDBTransaction){if("done"===Ae)return he.get(ye);if("objectStoreNames"===Ae)return ye.objectStoreNames||Se.get(ye);if("store"===Ae)return te.objectStoreNames[1]?void 0:te.objectStore(te.objectStoreNames[0])}return ge(ye[Ae])},set:(ye,Ae,te)=>(ye[Ae]=te,!0),has:(ye,Ae)=>ye instanceof IDBTransaction&&("done"===Ae||"store"===Ae)||Ae in ye};function pe(ye){return"function"==typeof ye?function Je(ye){return ye!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ye)?function(...Ae){return ye.apply(Xe(this),Ae),ge(Ie.get(this))}:function(...Ae){return ge(ye.apply(Xe(this),Ae))}:function(Ae,...te){const le=ye.call(Xe(this),Ae,...te);return Se.set(le,Ae.sort?Ae.sort():[Ae]),ge(le)}}(ye):(ye instanceof IDBTransaction&&function it(ye){if(he.has(ye))return;const Ae=new Promise((te,le)=>{const we=()=>{ye.removeEventListener("complete",ke),ye.removeEventListener("error",He),ye.removeEventListener("abort",He)},ke=()=>{te(),we()},He=()=>{le(ye.error||new DOMException("AbortError","AbortError")),we()};ye.addEventListener("complete",ke),ye.addEventListener("error",He),ye.addEventListener("abort",He)});he.set(ye,Ae)}(ye),((ye,Ae)=>Ae.some(te=>ye instanceof te))(ye,function ae(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ye,Ge):ye)}function ge(ye){if(ye instanceof IDBRequest)return function ie(ye){const Ae=new Promise((te,le)=>{const we=()=>{ye.removeEventListener("success",ke),ye.removeEventListener("error",He)},ke=()=>{te(ge(ye.result)),we()},He=()=>{le(ye.error),we()};ye.addEventListener("success",ke),ye.addEventListener("error",He)});return Ae.then(te=>{te instanceof IDBCursor&&Ie.set(te,ye)}).catch(()=>{}),G.set(Ae,ye),Ae}(ye);if(Z.has(ye))return Z.get(ye);const Ae=pe(ye);return Ae!==ye&&(Z.set(ye,Ae),G.set(Ae,ye)),Ae}const Xe=ye=>G.get(ye);function Ye(ye,Ae,{blocked:te,upgrade:le,blocking:we,terminated:ke}={}){const He=indexedDB.open(ye,Ae),Ne=ge(He);return le&&He.addEventListener("upgradeneeded",Tt=>{le(ge(He.result),Tt.oldVersion,Tt.newVersion,ge(He.transaction))}),te&&He.addEventListener("blocked",()=>te()),Ne.then(Tt=>{ke&&Tt.addEventListener("close",()=>ke()),we&&Tt.addEventListener("versionchange",()=>we())}).catch(()=>{}),Ne}function Le(ye,{blocked:Ae}={}){const te=indexedDB.deleteDatabase(ye);return Ae&&te.addEventListener("blocked",()=>Ae()),ge(te).then(()=>{})}const Re=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],et=new Map;function oe(ye,Ae){if(!(ye instanceof IDBDatabase)||Ae in ye||"string"!=typeof Ae)return;if(et.get(Ae))return et.get(Ae);const te=Ae.replace(/FromIndex$/,""),le=Ae!==te,we=Ce.includes(te);if(!(te in(le?IDBIndex:IDBObjectStore).prototype)||!we&&!Re.includes(te))return;const ke=function(){var He=(0,N.Z)(function*(Ne,...Tt){const wn=this.transaction(Ne,we?"readwrite":"readonly");let fn=wn.store;return le&&(fn=fn.index(Tt.shift())),(yield Promise.all([fn[te](...Tt),we&&wn.done]))[0]});return function(Tt){return He.apply(this,arguments)}}();return et.set(Ae,ke),ke}!function Ue(ye){Ge=ye(Ge)}(ye=>({...ye,get:(Ae,te,le)=>oe(Ae,te)||ye.get(Ae,te,le),has:(Ae,te)=>!!oe(Ae,te)||ye.has(Ae,te)}))},5861:(Mt,Be,V)=>{function N(O,ce,ae,ve,Ie,he,Se){try{var Z=O[he](Se),G=Z.value}catch(ie){return void ae(ie)}Z.done?ce(G):Promise.resolve(G).then(ve,Ie)}function U(O){return function(){var ce=this,ae=arguments;return new Promise(function(ve,Ie){var he=O.apply(ce,ae);function Se(G){N(he,ve,Ie,Se,Z,"next",G)}function Z(G){N(he,ve,Ie,Se,Z,"throw",G)}Se(void 0)})}}V.d(Be,{Z:()=>U})}},Mt=>{Mt(Mt.s=174)}]);